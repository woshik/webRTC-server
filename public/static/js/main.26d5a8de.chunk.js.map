{"version":3,"sources":["actions/meActions.js","RoomContext.js","deviceInfo.js","components/UnsupportedBrowser.js","index.js","actions/settingsActions.js","actions/notificationActions.js","reducers/room.js","reducers/me.js","reducers/producers.js","reducers/peers.js","reducers/lobbyPeers.js","reducers/consumers.js","reducers/peerVolumes.js","reducers/notifications.js","reducers/chat.js","reducers/helper.js","reducers/toolarea.js","reducers/files.js","reducers/settings.js","reducers/transports.js","reducers/rootReducer.js","store.js","Logger.js","actions/roomActions.js","utils.js","components/LoadingView.js","urlFactory.js","actions/requestActions.js","actions/peerActions.js","actions/peerVolumeActions.js","actions/chatActions.js","actions/fileActions.js","actions/lobbyPeerActions.js","actions/consumerActions.js","actions/producerActions.js","actions/transportActions.js","RoomClient.js"],"names":["setMe","peerId","loginEnabled","type","payload","setBrowser","browser","loggedIn","flag","addRole","role","removeRole","setPicture","picture","setMediaCapabilities","canSendMic","canSendWebcam","canShareScreen","canShareFiles","setAudioDevices","devices","setAudioOutputDevices","setWebcamDevices","setRaisedHand","setAudioInProgress","setAudioOutputInProgress","setWebcamInProgress","setScreenShareInProgress","setRaisedHandInProgress","setDisplayNameInProgress","setIsSpeaking","setAutoMuted","RoomContext","React","createContext","withRoomContext","Component","props","Consumer","roomClient","window","BB","bowser","ua","navigator","userAgent","getParser","satisfies","chrome","chromium","firefox","safari","opera","os","getOSName","platform","getPlatformType","name","getBrowserName","version","getBrowserVersion","dense","supportedBrowsers","vendor","withStyles","theme","dialogPaper","width","breakpoints","down","list","backgroundColor","palette","background","paper","errorAvatar","spacing","height","webrtcUnavailable","classes","open","scroll","id","defaultMessage","dividers","container","justify","alignItems","item","xs","md","className","map","index","supportedBrowser","supportedVersion","key","primary","secondary","align","mdDown","color","App","lazy","Login","Registration","ForgotPassword","ChooseRoom","cache","createIntlCache","messages","en","messagesEnglish","nb","messagesNorwegian","de","messagesGerman","hu","messagesHungarian","pl","messagesPolish","dk","messagesDanish","fr","messagesFrench","el","messagesGreek","ro","messagesRomanian","pt","messagesPortuguese","messagesChineseSimplified","messagesChineseTraditional","es","messagesSpanish","hr","messagesCroatian","cs","messagesCzech","it","messagesItalian","uk","messagesUkrainian","tr","messagesTurkish","lv","messagesLatvian","windows","browserLanguage","language","toLowerCase","locale","split","intl","createIntl","document","documentElement","lang","process","REACT_APP_DEBUG","debug","enable","logger","Logger","RoomClient","init","store","createMuiTheme","config","Router","isElectron","HashRouter","BrowserRouter","domready","randomString","length","parameters","URL","location","searchParams","accessCode","get","produce","forceTcp","displayName","muted","pathname","basePath","substring","lastIndexOf","device","deviceInfo","unsupportedBrowser","undefined","detectDevice","error","mediaDevices","getUserMedia","RTCPeerConnection","render","value","getElementById","dispatch","meActions","global","CLIENT","loading","persistor","Provider","basename","fallback","exact","path","component","run","setSelectedAudioDevice","deviceId","setSelectedAudioOutputDevice","setSelectedWebcamDevice","setVideoResolution","resolution","setVideoFrameRate","frameRate","setScreenSharingResolution","screenSharingResolution","setScreenSharingFrameRate","screenSharingFrameRate","setDisplayName","toggleAdvancedMode","togglePermanentTopBar","toggleButtonControlBar","toggleDrawerOverlayed","toggleShowNotifications","setEchoCancellation","echoCancellation","setAutoGainControl","autoGainControl","setNoiseSuppression","noiseSuppression","setVoiceActivatedUnmute","voiceActivatedUnmute","setNoiseThreshold","noiseThreshold","toggleHiddenControls","toggleNotificationSounds","setLastN","lastN","addNotification","notification","removeNotification","notificationId","removeAllNotifications","initialState","state","locked","inLobby","signInRequired","overRoomLimit","joinByAccessCode","activeSpeakerId","torrentSupport","showSettings","fullScreenConsumer","windowConsumer","toolbarsVisible","mode","defaultLayout","selectedPeerId","spotlights","settingsOpen","extraVideoOpen","helpOpen","aboutOpen","currentSettingsTab","lockDialogOpen","joined","muteAllInProgress","lobbyPeersPromotionInProgress","stopAllVideoInProgress","closeMeetingInProgress","clearChatInProgress","clearFileSharingInProgress","roomPermissions","allowWhenRoleMissing","room","action","roomState","tab","supported","consumerId","currentConsumer","stopAllScreenSharingInProgress","roles","audioDevices","webcamDevices","webcamInProgress","audioInProgress","screenShareInProgress","displayNameInProgress","raisedHand","raisedHandInProgress","isSpeaking","isAutoMuted","me","includes","filter","audioOutputDevices","producers","producer","producerId","newState","originator","newProducer","locallyPaused","remotelyPaused","track","score","peer","peerVideoInProgress","peerAudioInProgress","peerScreenInProgress","peerKickInProgress","raisedHandTimestamp","consumers","consumer","stopPeerAudioInProgress","stopPeerVideoInProgress","stopPeerScreenSharingInProgress","peers","oldPeer","Error","lobbyPeer","promotionInProgress","lobbyPeers","oldLobbyPeer","newConsumer","spatialLayer","temporalLayer","currentSpatialLayer","currentTemporalLayer","preferredSpatialLayer","preferredTemporalLayer","priority","peerVolumes","dBs","volume","Math","round","notifications","chat","message","text","sender","time","Date","now","createNewMessage","chatHistory","toolAreaOpen","currentToolTab","unreadMessages","unreadFiles","toolarea","toolTab","files","magnetUri","newFile","active","progress","fileHistory","newFileHistory","file","sharedFiles","timeout","selectedWebcam","selectedAudioDevice","advancedMode","sampleRate","channelCount","sampleSize","defaultResolution","defaultFrameRate","defaultScreenResolution","defaultScreenSharingFrameRate","permanentTopBar","hiddenControls","showNotifications","notificationSounds","buttonControlBar","drawerOverlayed","defaultAudio","settings","selectedAudioOutputDevice","audio","transports","transport","combineReducers","persistConfig","storage","stateReconciler","autoMergeLevel2","whitelist","reduxMiddlewares","thunk","reduxLogger","createLogger","predicate","getState","duration","timestamp","level","logErrors","push","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","pReducer","persistReducer","rootReducer","createStore","persistStore","APP_NAME","constructor","prefix","this","_debug","_warn","_error","log","console","info","bind","warn","setRoomName","setRoomState","setRoomActiveSpeaker","setRoomLocked","setRoomUnLocked","setInLobby","setSignInRequired","setOverRoomLimit","setAccessCode","setJoinByAccessCode","setSettingsOpen","setExtraVideoOpen","setHelpOpen","setAboutOpen","setSettingsTab","setLockDialogOpen","toggleConsumerWindow","setToolbarsVisible","setDisplayMode","setSelectedPeer","setSpotlights","clearSpotlights","toggleJoined","toggleConsumerFullscreen","setLobbyPeersPromotionInProgress","setMuteAllInProgress","setStopAllVideoInProgress","setStopAllScreenSharingInProgress","setCloseMeetingInProgress","setClearChatInProgress","setClearFileSharingInProgress","setRoomPermissions","setAllowWhenRoleMissing","idle","callback","delay","handle","clearTimeout","setTimeout","SocketTimeoutError","super","hasOwnProperty","captureStackTrace","stack","LoadingView","getSignalingUrl","roomId","port","productionPort","hostname","notify","notificationActions","addPeer","removePeer","setPeerDisplayName","setPeerVideoInProgress","setPeerAudioInProgress","setPeerScreenInProgress","setPeerRaisedHand","setPeerRaisedHandInProgress","setPeerPicture","addPeerRole","removePeerRole","setPeerKickInProgress","setMutePeerInProgress","setStopPeerVideoInProgress","setStopPeerScreenSharingInProgress","setPeerVolume","addChatHistory","addFile","addFileHistory","setFileDone","addLobbyPeer","removeLobbyPeer","setLobbyPeerDisplayName","setLobbyPeerPicture","setLobbyPeerPromotionInProgress","addConsumer","removeConsumer","setConsumerPaused","setConsumerResumed","setConsumerCurrentLayers","setConsumerPreferredLayers","setConsumerPriority","setConsumerScore","addProducer","removeProducer","setProducerScore","addTransportStats","createTorrent","WebTorrent","saveAs","mediasoupClient","io","ScreenShare","Spotlights","requestTimeout","transportOptions","mobileLastN","ROOM_OPTIONS","VIDEO_CONSTRAINS","ideal","aspectRatio","PC_PROPRIETARY_CONSTRAINTS","optional","googDscp","VIDEO_SIMULCAST_ENCODINGS","scaleResolutionDownBy","VIDEO_KSVC_ENCODINGS","scalabilityMode","VIDEO_SVC_ENCODINGS","dtx","data","_signalingUrl","_closed","_produce","_forceTcp","_basePath","settingsActions","_tracker","_torrentSupport","_useSimulcast","simulcast","_useSharingSimulcast","simulcastSharing","_muted","_device","_peerId","_accessCode","_soundAlert","Audio","_signalingSocket","_roomId","_mediasoupDevice","_webTorrent","_maxSpotlights","_spotlights","_sendTransport","_recvTransport","_micProducer","_hark","_harkStream","_webcamProducer","_extraVideoProducers","Map","_webcams","_audioDevices","_audioOutputDevices","_consumers","_screenSharing","_screenSharingProducer","_startKeyListener","_startDevicesListener","close","roomActions","addEventListener","event","repeat","String","fromCharCode","which","source","target","indexOf","tagName","newPeerId","getPrevAsSelected","getNextAsSelected","requestActions","formatMessage","paused","unmuteMic","muteMic","updateMic","start","disableWebcam","updateWebcam","preventDefault","a","_updateAudioDevices","_updateWebcams","_updateAudioOutputDevices","login","url","logout","receiveLoginChildWindow","receiveLogoutChildWindow","_soundNotification","alertPromise","play","then","catch","timeoutCallback","called","interval","args","_sendRequest","method","Promise","resolve","reject","emit","err","response","getTransportStats","sendRequest","transportId","recv","transportActions","send","requestRetries","tries","changeDisplayName","changePicture","sendChatMessage","chatMessage","saveFile","getBlob","blob","handleDownload","fileActions","existingTorrent","_handleTorrent","add","torrent","magnetURI","lastMove","on","shareFiles","_sendFile","seed","announceList","newTorrent","pause","producerActions","resume","changeMaxSpotlights","maxSpotlights","updateSpotlights","values","kind","appData","_resumeConsumer","_pauseConsumer","disconnectLocalHark","getAudioTracks","stop","connectLocalHark","MediaStream","newTrack","clone","addTrack","enabled","hark","threshold","history","lastVolume","pow","peerVolumeActions","changeAudioOutputDevice","restart","newDeviceId","canProduce","_getAudioDeviceId","disableMic","stream","getSettings","trackDeviceId","codecOptions","opusStereo","opusDtx","opusFec","opusPtime","opusMaxPlaybackRate","rtpParameters","codec","codecs","mimeType","applyConstraints","harkTrack","newResolution","newFrameRate","_getWebcamDeviceId","video","getVideoTracks","firstVideoCodec","rtpCapabilities","find","c","encodings","simulcastEncodings","videoGoogleStartBitrate","setPeerSpotlight","promoteAllLobbyPeers","promoteLobbyPeer","lobbyPeerActions","clearChat","clearFileSharing","kickPeer","peerActions","mutePeer","stopPeerVideo","stopPeerScreenSharing","muteAllPeers","stopAllPeerVideo","stopAllPeerScreenSharing","closeMeeting","modifyPeerConsumer","mute","closed","consumerActions","lowerPeerHand","setMaxSendingSpatialLayer","setMaxSpatialLayer","requestConsumerKeyFrame","_loadDynamicImports","default","join","joinVideo","create","reason","attemptNumber","request","cb","producerPaused","consume","set","delete","parseScalabilityMode","spatialLayers","temporalLayers","turnServers","_turnServers","_joinRoom","forEach","handleActiveSpeaker","oldDisplayName","disableScreenSharing","WEBRTC_SUPPORT","tracker","rtcConfig","iceServers","Device","routerRtpCapabilities","headerExtensions","ext","uri","load","producing","consuming","transportInfo","iceParameters","iceCandidates","dtlsParameters","createSendTransport","iceTransportPolicy","proprietaryConstraints","errback","createRecvTransport","isScreenShareAvailable","authenticated","lastNHistory","myRoles","addPeers","chatActions","addSpeakerList","autoMuteThreshold","Object","keys","lockRoom","unlockRoom","code","addExtraVideo","videoDeviceId","deviceLabel","label","disableExtraVideo","updateScreenSharing","encoding","_setNoiseThreshold","setThreshold","enumerateDevices","webcams"],"mappings":"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","file":"static/js/main.26d5a8de.chunk.js","sourcesContent":["export const setMe = ({ peerId, loginEnabled }) =>\n\t({\n\t\ttype    : 'SET_ME',\n\t\tpayload : { peerId, loginEnabled }\n\t});\n\nexport const setBrowser = (browser) =>\n\t({\n\t\ttype    : 'SET_BROWSER',\n\t\tpayload : { browser }\n\t});\n\nexport const loggedIn = (flag) =>\n\t({\n\t\ttype    : 'LOGGED_IN',\n\t\tpayload : { flag }\n\t});\n\nexport const addRole = (role) =>\n\t({\n\t\ttype    : 'ADD_ROLE',\n\t\tpayload : { role }\n\t});\n\nexport const removeRole = (role) =>\n\t({\n\t\ttype    : 'REMOVE_ROLE',\n\t\tpayload : { role }\n\t});\n\nexport const setPicture = (picture) =>\n\t({\n\t\ttype    : 'SET_PICTURE',\n\t\tpayload : { picture }\n\t});\n\nexport const setMediaCapabilities = ({\n\tcanSendMic,\n\tcanSendWebcam,\n\tcanShareScreen,\n\tcanShareFiles\n}) =>\n\t({\n\t\ttype    : 'SET_MEDIA_CAPABILITIES',\n\t\tpayload : { canSendMic, canSendWebcam, canShareScreen, canShareFiles }\n\t});\n\nexport const setAudioDevices = (devices) =>\n\t({\n\t\ttype    : 'SET_AUDIO_DEVICES',\n\t\tpayload : { devices }\n\t});\n\nexport const setAudioOutputDevices = (devices) =>\n\t({\n\t\ttype    : 'SET_AUDIO_OUTPUT_DEVICES',\n\t\tpayload : { devices }\n\t});\n\nexport const setWebcamDevices = (devices) =>\n\t({\n\t\ttype    : 'SET_WEBCAM_DEVICES',\n\t\tpayload : { devices }\n\t});\n\nexport const setRaisedHand = (flag) =>\n\t({\n\t\ttype    : 'SET_RAISED_HAND',\n\t\tpayload : { flag }\n\t});\n\nexport const setAudioInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_AUDIO_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setAudioOutputInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_AUDIO_OUTPUT_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setWebcamInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_WEBCAM_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setScreenShareInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_SCREEN_SHARE_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setRaisedHandInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_RAISED_HAND_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setDisplayNameInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_DISPLAY_NAME_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setIsSpeaking = (flag) =>\n\t({\n\t\ttype    : 'SET_IS_SPEAKING',\n\t\tpayload : { flag }\n\t});\n\nexport const setAutoMuted = (flag) =>\n\t({\n\t\ttype    : 'SET_AUTO_MUTED',\n\t\tpayload : { flag }\n\t});\n","import React from 'react';\n\nconst RoomContext = React.createContext();\n\nexport default RoomContext;\n\nexport function withRoomContext(Component)\n{\n\treturn (props) => ( // eslint-disable-line react/display-name\n\t\t<RoomContext.Consumer>\n\t\t\t{(roomClient) => <Component {...props} roomClient={roomClient} />}\n\t\t</RoomContext.Consumer>\n\t);\n}","import bowser from 'bowser';\n\nwindow.BB = bowser;\n\nexport default function()\n{\n\tconst ua = navigator.userAgent;\n\tconst browser = bowser.getParser(ua);\n\n\tlet flag;\n\n\tif (browser.satisfies({ chrome: '>=0', chromium: '>=0' }))\n\t\tflag = 'chrome';\n\telse if (browser.satisfies({ firefox: '>=0' }))\n\t\tflag = 'firefox';\n\telse if (browser.satisfies({ safari: '>=0' }))\n\t\tflag = 'safari';\n\telse if (browser.satisfies({ opera: '>=0' }))\n\t\tflag = 'opera';\n\telse if (browser.satisfies({ 'microsoft edge': '>=0' }))\n\t\tflag = 'edge';\n\telse\n\t\tflag = 'unknown';\n\n\treturn {\n\t\tflag,\n\t\tos       : browser.getOSName(true), // ios, android, linux...\n\t\tplatform : browser.getPlatformType(true), // mobile, desktop, tablet\n\t\tname     : browser.getBrowserName(true),\n\t\tversion  : browser.getBrowserVersion(),\n\t\tbowser   : browser\n\t};\n}\n","import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport WebAssetIcon from '@material-ui/icons/WebAsset';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport Hidden from '@material-ui/core/Hidden';\n\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '40vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t\t// display       : 'flex',\n\t\t\t// flexDirection : 'column'\n\t\t},\n\t\tlist : {\n\t\t\tbackgroundColor : theme.palette.background.paper\n\t\t},\n\t\terrorAvatar : {\n\t\t\twidth  : theme.spacing(20),\n\t\t\theight : theme.spacing(20)\n\t\t}\n\t});\n\nlet dense = false;\n\nconst supportedBrowsers=[\n\t{ name: 'Chrome/Chromium', version: '74', vendor: 'Google' },\n\t{ name: 'Edge', version: '18', vendor: 'Microsoft' },\n\t{ name: 'Firefox', version: '60', vendor: 'Mozilla' },\n\t{ name: 'Safari', version: '12', vendor: 'Apple' },\n\t{ name: 'Opera', version: '62', vendor: '' },\n\t//\t{ name: 'Brave', version: '1.5', vendor: '' },\n\t//  { name: 'Vivaldi', version: '3', vendor: '' },\n\t{ name: 'Samsung Internet', version: '11.1.1.52', vendor: '' }\n];\n\nconst UnsupportedBrowser = ({\n\tplatform,\n\twebrtcUnavailable,\n\tclasses\n}) =>\n{\n\tif (platform !== 'desktop')\n\t\tdense = true;\n\n\treturn (\n\t\t<Dialog\n\t\t\topen\n\t\t\tscroll={'body'}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t{!webrtcUnavailable &&\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='unsupportedBrowser.titleUnsupportedBrowser'\n\t\t\t\t\tdefaultMessage='Browser not supported'\n\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\t{webrtcUnavailable &&\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='unsupportedBrowser.titlewebrtcUnavailable'\n\t\t\t\t\tdefaultMessage='Required functionality not availble in your browser'\n\t\t\t\t/>\n\t\t\t\t}\n\t\t\t</DialogTitle>\n\t\t\t<DialogContent dividers>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='unsupportedBrowser.bodyText'\n\t\t\t\t\tdefaultMessage='This meeting service requires\n\t\t\t\t\t\tfunctionality not supported by your browser.\n\t\t\t\t\t\tPlease upgrade, switch to a different browser, or\n\t\t\t\t\t\tcheck your settings. Supported browsers:'\n\t\t\t\t/>\n\t\t\t\t<Grid container spacing={2} justify='center' alignItems='center'>\n\t\t\t\t\t<Grid item xs={12} md={7}>\n\n\t\t\t\t\t\t<div className={classes.list}>\n\t\t\t\t\t\t\t<List dense={dense}>\n\t\t\t\t\t\t\t\t{supportedBrowsers.map((browser, index) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst supportedBrowser = `${browser.vendor} ${browser.name}`;\n\t\t\t\t\t\t\t\t\tconst supportedVersion = `${browser.version}+`;\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<ListItem key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<ListItemAvatar>\n\t\t\t\t\t\t\t\t\t\t\t\t<Avatar>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<WebAssetIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t\t\t</ListItemAvatar>\n\t\t\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\t\t\tprimary={supportedBrowser}\n\t\t\t\t\t\t\t\t\t\t\t\tsecondary={supportedVersion}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12} md={5} align='center'>\n\t\t\t\t\t\t<Hidden mdDown>\n\t\t\t\t\t\t\t<ErrorIcon className={classes.errorAvatar} color='error'/>\n\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n};\n\nUnsupportedBrowser.propTypes =\n{\n\twebrtcUnavailable : PropTypes.bool.isRequired,\n\tplatform          : PropTypes.string.isRequired,\n\tclasses           : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(UnsupportedBrowser);\n","import domready from 'domready';\nimport React, { Suspense } from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport isElectron from 'is-electron';\nimport { createIntl, createIntlCache, RawIntlProvider } from 'react-intl';\nimport { Route, HashRouter, BrowserRouter, Switch } from 'react-router-dom';\nimport randomString from 'random-string';\nimport Logger from './Logger';\nimport debug from 'debug';\nimport RoomClient from './RoomClient';\nimport RoomContext from './RoomContext';\nimport deviceInfo from './deviceInfo';\nimport * as meActions from './actions/meActions';\nimport UnsupportedBrowser from './components/UnsupportedBrowser';\nimport LoadingView from './components/LoadingView';\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport { PersistGate } from 'redux-persist/lib/integration/react';\nimport { persistor, store } from './store';\nimport { SnackbarProvider } from 'notistack';\nimport { detectDevice } from 'mediasoup-client';\n\n// translate files\nimport messagesEnglish from './translations/en';\nimport messagesNorwegian from './translations/nb';\nimport messagesGerman from './translations/de';\nimport messagesHungarian from './translations/hu';\nimport messagesPolish from './translations/pl';\nimport messagesDanish from './translations/dk';\nimport messagesFrench from './translations/fr';\nimport messagesGreek from './translations/el';\nimport messagesRomanian from './translations/ro';\nimport messagesPortuguese from './translations/pt';\nimport messagesChineseSimplified from './translations/cn';\nimport messagesChineseTraditional from './translations/tw';\nimport messagesSpanish from './translations/es';\nimport messagesCroatian from './translations/hr';\nimport messagesCzech from './translations/cs';\nimport messagesItalian from './translations/it';\nimport messagesUkrainian from './translations/uk';\nimport messagesTurkish from './translations/tr';\nimport messagesLatvian from './translations/lv';\n\n// application style file\nimport './main.css';\n\n// load component lazyly\nconst App = React.lazy(() => import('./components/App'));\nconst Login = React.lazy(() => import('./components/Login/Login'));\nconst Registration = React.lazy(() => import('./components/Registration/Registration'));\nconst ForgotPassword = React.lazy(() => import('./components/ForgotPassword/ForgotPassword'));\nconst ChooseRoom = React.lazy(() => import('./components/ChooseRoom'));\n\nconst cache = createIntlCache();\n\nconst messages = {\n  en: messagesEnglish,\n  nb: messagesNorwegian,\n  de: messagesGerman,\n  hu: messagesHungarian,\n  pl: messagesPolish,\n  dk: messagesDanish,\n  fr: messagesFrench,\n  el: messagesGreek,\n  ro: messagesRomanian,\n  pt: messagesPortuguese,\n  'zh-hans': messagesChineseSimplified,\n  'zh-hant': messagesChineseTraditional,\n  es: messagesSpanish,\n  hr: messagesCroatian,\n  cs: messagesCzech,\n  it: messagesItalian,\n  uk: messagesUkrainian,\n  tr: messagesTurkish,\n  lv: messagesLatvian,\n};\n\nconst supportedBrowsers = {\n  windows: {\n    'internet explorer': '>12',\n    'microsoft edge': '>18',\n  },\n  safari: '>12',\n  firefox: '>=60',\n  chrome: '>=74',\n  chromium: '>=74',\n  opera: '>=62',\n  'samsung internet for android': '>=11.1.1.52',\n};\n\nconst browserLanguage = (navigator.language || navigator.browserLanguage).toLowerCase();\n\nlet locale = browserLanguage.split(/[-_]/)[0]; // language without region code\n\nif (locale === 'zh') {\n  if (browserLanguage === 'zh-cn') locale = 'zh-hans';\n  else locale = 'zh-hant';\n}\n\nconst intl = createIntl(\n  {\n    locale,\n    messages: messages[locale],\n  },\n  cache\n);\n\ndocument.documentElement.lang = locale;\n\nif (process.env.REACT_APP_DEBUG === '*' || process.env.NODE_ENV !== 'production') {\n  debug.enable('* -engine* -socket* -RIE* *WARN* *ERROR*');\n}\n\nconst logger = new Logger();\n\nlet roomClient;\n\nRoomClient.init({ store, intl });\n\nconst theme = createMuiTheme(window.config.theme);\n\nlet Router;\n\nif (isElectron()) Router = HashRouter;\nelse Router = BrowserRouter;\n\ndomready(() => {\n  logger.debug('DOM ready');\n\n  run();\n});\n\nfunction run() {\n  logger.debug('run() [environment:%s]', process.env.NODE_ENV);\n\n  const peerId = randomString({ length: 8 }).toLowerCase();\n  const urlParser = new URL(window.location);\n  const parameters = urlParser.searchParams;\n\n  const accessCode = parameters.get('code');\n  const produce = parameters.get('produce') !== 'false';\n  const forceTcp = parameters.get('forceTcp') === 'true';\n  const displayName = parameters.get('displayName');\n  const muted = parameters.get('muted') === 'true';\n\n  const { pathname } = window.location;\n\n  let basePath = pathname.substring(0, pathname.lastIndexOf('/'));\n\n  if (!basePath) basePath = '/';\n\n  // Get current device.\n  const device = deviceInfo();\n\n  let unsupportedBrowser = false;\n\n  let webrtcUnavailable = false;\n\n  if (detectDevice() === undefined) {\n    logger.error('Your browser is not supported [deviceInfo:\"%o\"]', device);\n\n    unsupportedBrowser = true;\n  } else if (\n    navigator.mediaDevices === undefined ||\n    navigator.mediaDevices.getUserMedia === undefined ||\n    window.RTCPeerConnection === undefined\n  ) {\n    logger.error('Your browser is not supported [deviceInfo:\"%o\"]', device);\n\n    webrtcUnavailable = true;\n  } else if (!device.bowser.satisfies(window.config.supportedBrowsers || supportedBrowsers)) {\n    logger.error('Your browser is not supported [deviceInfo:\"%o\"]', device);\n\n    unsupportedBrowser = true;\n  } else {\n    logger.debug('Your browser is supported [deviceInfo:\"%o\"]', device);\n  }\n\n  if (unsupportedBrowser || webrtcUnavailable) {\n    render(\n      <MuiThemeProvider theme={theme}>\n        <RawIntlProvider value={intl}>\n          <UnsupportedBrowser webrtcUnavailable={webrtcUnavailable} platform={device.platform} />\n        </RawIntlProvider>\n      </MuiThemeProvider>,\n      document.getElementById('multiparty-meeting')\n    );\n\n    return;\n  }\n\n  store.dispatch(\n    meActions.setMe({\n      peerId,\n      loginEnabled: window.config.loginEnabled,\n    })\n  );\n\n  roomClient = new RoomClient({\n    peerId,\n    accessCode,\n    device,\n    produce,\n    forceTcp,\n    displayName,\n    muted,\n    basePath,\n  });\n\n  global.CLIENT = roomClient;\n\n  render(\n    <Provider store={store}>\n      <MuiThemeProvider theme={theme}>\n        <RawIntlProvider value={intl}>\n          <PersistGate loading={<LoadingView />} persistor={persistor}>\n            <RoomContext.Provider value={roomClient}>\n              <SnackbarProvider>\n                <Router basename={basePath}>\n                  <Suspense fallback={<LoadingView />}>\n                    <Switch>\n                      <Route exact path=\"/\" component={Login} />\n                      <Route path=\"/registration\" component={Registration} />\n                      <Route path=\"/forgot-password\" component={ForgotPassword} />\n                      <Route path=\"/meeting/:id\" component={App} />\n                      <Route path=\"/meeting\" component={ChooseRoom} />\n                    </Switch>\n                  </Suspense>\n                </Router>\n              </SnackbarProvider>\n            </RoomContext.Provider>\n          </PersistGate>\n        </RawIntlProvider>\n      </MuiThemeProvider>\n    </Provider>,\n    document.getElementById('multiparty-meeting')\n  );\n}\n","export const setSelectedAudioDevice = (deviceId) =>\n\t({\n\t\ttype    : 'CHANGE_AUDIO_DEVICE',\n\t\tpayload : { deviceId }\n\t});\n\nexport const setSelectedAudioOutputDevice = (deviceId) =>\n\t({\n\t\ttype    : 'CHANGE_AUDIO_OUTPUT_DEVICE',\n\t\tpayload : { deviceId }\n\t});\n\nexport const setSelectedWebcamDevice = (deviceId) =>\n\t({\n\t\ttype    : 'CHANGE_WEBCAM',\n\t\tpayload : { deviceId }\n\t});\n\nexport const setVideoResolution = (resolution) =>\n\t({\n\t\ttype    : 'SET_VIDEO_RESOLUTION',\n\t\tpayload : { resolution }\n\t});\n\nexport const setVideoFrameRate = (frameRate) =>\n\t({\n\t\ttype    : 'SET_VIDEO_FRAME_RATE',\n\t\tpayload : { frameRate }\n\t});\n\nexport const setScreenSharingResolution = (screenSharingResolution) =>\n\t({\n\t\ttype    : 'SET_SCREEN_SHARING_RESOLUTION',\n\t\tpayload : { screenSharingResolution }\n\t});\n\nexport const setScreenSharingFrameRate = (screenSharingFrameRate) =>\n\t({\n\t\ttype    : 'SET_SCREEN_SHARING_FRAME_RATE',\n\t\tpayload : { screenSharingFrameRate }\n\t});\n\nexport const setDisplayName = (displayName) =>\n\t({\n\t\ttype    : 'SET_DISPLAY_NAME',\n\t\tpayload : { displayName }\n\t});\n\nexport const toggleAdvancedMode = () =>\n\t({\n\t\ttype : 'TOGGLE_ADVANCED_MODE'\n\t});\n\nexport const togglePermanentTopBar = () =>\n\t({\n\t\ttype : 'TOGGLE_PERMANENT_TOPBAR'\n\t});\n\nexport const toggleButtonControlBar = () =>\n\t({\n\t\ttype : 'TOGGLE_BUTTON_CONTROL_BAR'\n\t});\n\nexport const toggleDrawerOverlayed = () =>\n\t({\n\t\ttype : 'TOGGLE_DRAWER_OVERLAYED'\n\t});\n\nexport const toggleShowNotifications = () =>\n\t({\n\t\ttype : 'TOGGLE_SHOW_NOTIFICATIONS'\n\t});\n\nexport const setEchoCancellation = (echoCancellation) =>\n\t({\n\t\ttype    : 'SET_ECHO_CANCELLATION',\n\t\tpayload : { echoCancellation }\n\t});\n\nexport const setAutoGainControl = (autoGainControl) =>\n\t({\n\t\ttype    : 'SET_AUTO_GAIN_CONTROL',\n\t\tpayload : { autoGainControl }\n\t});\n\nexport const setNoiseSuppression = (noiseSuppression) =>\n\t({\n\t\ttype    : 'SET_NOISE_SUPPRESSION',\n\t\tpayload : { noiseSuppression }\n\t});\n\nexport const setVoiceActivatedUnmute = (voiceActivatedUnmute) =>\n\t({\n\t\ttype    : 'SET_VOICE_ACTIVATED_UNMUTE',\n\t\tpayload : { voiceActivatedUnmute }\n\t});\n\nexport const setNoiseThreshold = (noiseThreshold) =>\n\t({\n\t\ttype    : 'SET_NOISE_THRESHOLD',\n\t\tpayload : { noiseThreshold }\n\t});\n\nexport const setDefaultAudio = (audio) =>\n\t({\n\t\ttype    : 'SET_DEFAULT_AUDIO',\n\t\tpayload : { audio }\n\t});\n\nexport const toggleHiddenControls = () =>\n\t({\n\t\ttype : 'TOGGLE_HIDDEN_CONTROLS'\n\t});\n\nexport const toggleNotificationSounds = () =>\n\t({\n\t\ttype : 'TOGGLE_NOTIFICATION_SOUNDS'\n\t});\n\nexport const setLastN = (lastN) =>\n\t({\n\t\ttype    : 'SET_LAST_N',\n\t\tpayload : { lastN }\n\t});","export const addNotification = (notification) =>\n\t({\n\t\ttype    : 'ADD_NOTIFICATION',\n\t\tpayload : { notification }\n\t});\n\nexport const removeNotification = (notificationId) =>\n\t({\n\t\ttype    : 'REMOVE_NOTIFICATION',\n\t\tpayload : { notificationId }\n\t});\n\nexport const removeAllNotifications = () =>\n\t({\n\t\ttype : 'REMOVE_ALL_NOTIFICATIONS'\n\t});","const initialState =\n{\n\tname                          : '',\n\t// new/connecting/connected/disconnected/closed,\n\tstate                         : 'new',\n\tlocked                        : false,\n\tinLobby                       : false,\n\tsignInRequired                : false,\n\toverRoomLimit                 : false,\n\t// access code to the room if locked and joinByAccessCode == true\n\taccessCode                    : '',\n\t// if true: accessCode is a possibility to open the room\n\tjoinByAccessCode              : true,\n\tactiveSpeakerId               : null,\n\ttorrentSupport                : false,\n\tshowSettings                  : false,\n\tfullScreenConsumer            : null, // ConsumerID\n\twindowConsumer                : null, // ConsumerID\n\ttoolbarsVisible               : true,\n\tmode                          : window.config.defaultLayout || 'democratic',\n\tselectedPeerId                : null,\n\tspotlights                    : [],\n\tsettingsOpen                  : false,\n\textraVideoOpen                : false,\n\thelpOpen                      : false,\n\taboutOpen                     : false,\n\tcurrentSettingsTab            : 'media', // media, appearence, advanced\n\tlockDialogOpen                : false,\n\tjoined                        : false,\n\tmuteAllInProgress             : false,\n\tlobbyPeersPromotionInProgress : false,\n\tstopAllVideoInProgress        : false,\n\tcloseMeetingInProgress        : false,\n\tclearChatInProgress           : false,\n\tclearFileSharingInProgress    : false,\n\troomPermissions               : null,\n\tallowWhenRoleMissing          : null\n};\n\nconst room = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'SET_ROOM_NAME':\n\t\t{\n\t\t\tconst { name } = action.payload;\n\n\t\t\treturn { ...state, name };\n\t\t}\n\n\t\tcase 'SET_ROOM_STATE':\n\t\t{\n\t\t\tconst roomState = action.payload.state;\n\n\t\t\tif (roomState === 'connected')\n\t\t\t\treturn { ...state, state: roomState };\n\t\t\telse\n\t\t\t\treturn { ...state, state: roomState, activeSpeakerId: null };\n\t\t}\n\n\t\tcase 'SET_ROOM_LOCKED':\n\t\t{\n\t\t\treturn { ...state, locked: true };\n\t\t}\n\n\t\tcase 'SET_ROOM_UNLOCKED':\n\t\t{\n\t\t\treturn { ...state, locked: false };\n\t\t}\n\n\t\tcase 'SET_IN_LOBBY':\n\t\t{\n\t\t\tconst { inLobby } = action.payload;\n\n\t\t\treturn { ...state, inLobby };\n\t\t}\n\n\t\tcase 'SET_SIGN_IN_REQUIRED':\n\t\t{\n\t\t\tconst { signInRequired } = action.payload;\n\n\t\t\treturn { ...state, signInRequired };\n\t\t}\n\t\tcase 'SET_OVER_ROOM_LIMIT':\n\t\t{\n\t\t\tconst { overRoomLimit } = action.payload;\n\n\t\t\treturn { ...state, overRoomLimit };\n\t\t}\n\t\tcase 'SET_ACCESS_CODE':\n\t\t{\n\t\t\tconst { accessCode } = action.payload;\n\n\t\t\treturn { ...state, accessCode };\n\t\t}\n\n\t\tcase 'SET_JOIN_BY_ACCESS_CODE':\n\t\t{\n\t\t\tconst { joinByAccessCode } = action.payload;\n\n\t\t\treturn { ...state, joinByAccessCode };\n\t\t}\n\n\t\tcase 'SET_LOCK_DIALOG_OPEN':\n\t\t{\n\t\t\tconst { lockDialogOpen } = action.payload;\n\n\t\t\treturn { ...state, lockDialogOpen };\n\t\t}\n\n\t\tcase 'SET_SETTINGS_OPEN':\n\t\t{\n\t\t\tconst { settingsOpen } = action.payload;\n\n\t\t\treturn { ...state, settingsOpen };\n\t\t}\n\n\t\tcase 'SET_EXTRA_VIDEO_OPEN':\n\t\t{\n\t\t\tconst { extraVideoOpen } = action.payload;\n\n\t\t\treturn { ...state, extraVideoOpen };\n\t\t}\n\n\t\tcase 'SET_HELP_OPEN':\n\t\t{\n\t\t\tconst { helpOpen } = action.payload;\n\n\t\t\treturn { ...state, helpOpen };\n\t\t}\n\n\t\tcase 'SET_ABOUT_OPEN':\n\t\t{\n\t\t\tconst { aboutOpen } = action.payload;\n\n\t\t\treturn { ...state, aboutOpen };\n\t\t}\n\n\t\tcase 'SET_SETTINGS_TAB':\n\t\t{\n\t\t\tconst { tab } = action.payload;\n\n\t\t\treturn { ...state, currentSettingsTab: tab };\n\t\t}\n\n\t\tcase 'SET_ROOM_ACTIVE_SPEAKER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\n\t\t\treturn { ...state, activeSpeakerId: peerId };\n\t\t}\n\n\t\tcase 'FILE_SHARING_SUPPORTED':\n\t\t{\n\t\t\tconst { supported } = action.payload;\n\n\t\t\treturn { ...state, torrentSupport: supported };\n\t\t}\n\n\t\tcase 'TOGGLE_JOINED':\n\t\t{\n\t\t\tconst joined = true;\n\n\t\t\treturn { ...state, joined };\n\t\t}\n\n\t\tcase 'TOGGLE_FULLSCREEN_CONSUMER':\n\t\t{\n\t\t\tconst { consumerId } = action.payload;\n\t\t\tconst currentConsumer = state.fullScreenConsumer;\n\n\t\t\treturn { ...state, fullScreenConsumer: currentConsumer ? null : consumerId };\n\t\t}\n\n\t\tcase 'TOGGLE_WINDOW_CONSUMER':\n\t\t{\n\t\t\tconst { consumerId } = action.payload;\n\t\t\tconst currentConsumer = state.windowConsumer;\n\n\t\t\tif (currentConsumer === consumerId)\n\t\t\t\treturn { ...state, windowConsumer: null };\n\t\t\telse\n\t\t\t\treturn { ...state, windowConsumer: consumerId };\n\t\t}\n\n\t\tcase 'SET_TOOLBARS_VISIBLE':\n\t\t{\n\t\t\tconst { toolbarsVisible } = action.payload;\n\n\t\t\treturn { ...state, toolbarsVisible };\n\t\t}\n\n\t\tcase 'SET_DISPLAY_MODE':\n\t\t\treturn { ...state, mode: action.payload.mode };\n\n\t\tcase 'SET_SELECTED_PEER':\n\t\t{\n\t\t\tconst { selectedPeerId } = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\n\t\t\t\tselectedPeerId : state.selectedPeerId === selectedPeerId ?\n\t\t\t\t\tnull : selectedPeerId\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_SPOTLIGHTS':\n\t\t{\n\t\t\tconst { spotlights } = action.payload;\n\n\t\t\treturn { ...state, spotlights };\n\t\t}\n\n\t\tcase 'CLEAR_SPOTLIGHTS':\n\t\t{\n\t\t\treturn { ...state, spotlights: [] };\n\t\t}\n\n\t\tcase 'SET_LOBBY_PEERS_PROMOTION_IN_PROGRESS':\n\t\t\treturn { ...state, lobbyPeersPromotionInProgress: action.payload.flag };\n\n\t\tcase 'MUTE_ALL_IN_PROGRESS':\n\t\t\treturn { ...state, muteAllInProgress: action.payload.flag };\n\n\t\tcase 'STOP_ALL_VIDEO_IN_PROGRESS':\n\t\t\treturn { ...state, stopAllVideoInProgress: action.payload.flag };\n\n\t\tcase 'STOP_ALL_SCREEN_SHARING_IN_PROGRESS':\n\t\t\treturn { ...state, stopAllScreenSharingInProgress: action.payload.flag };\n\n\t\tcase 'CLOSE_MEETING_IN_PROGRESS':\n\t\t\treturn { ...state, closeMeetingInProgress: action.payload.flag };\n\n\t\tcase 'CLEAR_CHAT_IN_PROGRESS':\n\t\t\treturn { ...state, clearChatInProgress: action.payload.flag };\n\n\t\tcase 'CLEAR_FILE_SHARING_IN_PROGRESS':\n\t\t\treturn { ...state, clearFileSharingInProgress: action.payload.flag };\n\n\t\tcase 'SET_ROOM_PERMISSIONS':\n\t\t{\n\t\t\tconst { roomPermissions } = action.payload;\n\n\t\t\treturn { ...state, roomPermissions };\n\t\t}\n\n\t\tcase 'SET_ALLOW_WHEN_ROLE_MISSING':\n\t\t{\n\t\t\tconst { allowWhenRoleMissing } = action.payload;\n\n\t\t\treturn { ...state, allowWhenRoleMissing };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default room;\n","const initialState =\n{\n\tid                    : null,\n\tpicture               : null,\n\tbrowser               : null,\n\troles                 : [ 'normal' ], // Default role\n\tcanSendMic            : false,\n\tcanSendWebcam         : false,\n\tcanShareScreen        : false,\n\tcanShareFiles         : false,\n\taudioDevices          : null,\n\twebcamDevices         : null,\n\twebcamInProgress      : false,\n\taudioInProgress       : false,\n\tscreenShareInProgress : false,\n\tdisplayNameInProgress : false,\n\tloginEnabled          : false,\n\traisedHand            : false,\n\traisedHandInProgress  : false,\n\tloggedIn              : false,\n\tisSpeaking            : false,\n\tisAutoMuted           : true\n};\n\nconst me = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'SET_ME':\n\t\t{\n\t\t\tconst {\n\t\t\t\tpeerId,\n\t\t\t\tloginEnabled\n\t\t\t} = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tid : peerId,\n\t\t\t\tloginEnabled\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_BROWSER':\n\t\t{\n\t\t\tconst { browser } = action.payload;\n\n\t\t\treturn { ...state, browser };\n\t\t}\n\n\t\tcase 'LOGGED_IN':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, loggedIn: flag };\n\t\t}\n\n\t\tcase 'ADD_ROLE':\n\t\t{\n\t\t\tif (state.roles.includes(action.payload.role))\n\t\t\t\treturn state;\n\n\t\t\tconst roles = [ ...state.roles, action.payload.role ];\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'REMOVE_ROLE':\n\t\t{\n\t\t\tconst roles = state.roles.filter((role) =>\n\t\t\t\trole !== action.payload.role);\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'SET_PICTURE':\n\t\t\treturn { ...state, picture: action.payload.picture };\n\n\t\tcase 'SET_MEDIA_CAPABILITIES':\n\t\t{\n\t\t\tconst {\n\t\t\t\tcanSendMic,\n\t\t\t\tcanSendWebcam,\n\t\t\t\tcanShareScreen,\n\t\t\t\tcanShareFiles\n\t\t\t} = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcanSendMic,\n\t\t\t\tcanSendWebcam,\n\t\t\t\tcanShareScreen,\n\t\t\t\tcanShareFiles\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_AUDIO_DEVICES':\n\t\t{\n\t\t\tconst { devices } = action.payload;\n\n\t\t\treturn { ...state, audioDevices: devices };\n\t\t}\n\n\t\tcase 'SET_AUDIO_OUTPUT_DEVICES':\n\t\t{\n\t\t\tconst { devices } = action.payload;\n\n\t\t\treturn { ...state, audioOutputDevices: devices };\n\t\t}\n\n\t\tcase 'SET_WEBCAM_DEVICES':\n\t\t{\n\t\t\tconst { devices } = action.payload;\n\n\t\t\treturn { ...state, webcamDevices: devices };\n\t\t}\n\n\t\tcase 'SET_AUDIO_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, audioInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_WEBCAM_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, webcamInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_SCREEN_SHARE_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, screenShareInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_RAISED_HAND':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, raisedHand: flag };\n\t\t}\n\n\t\tcase 'SET_RAISED_HAND_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, raisedHandInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_DISPLAY_NAME_IN_PROGRESS':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, displayNameInProgress: flag };\n\t\t}\n\n\t\tcase 'SET_IS_SPEAKING':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, isSpeaking: flag };\n\t\t}\n\n\t\tcase 'SET_AUTO_MUTED':\n\t\t{\n\t\t\tconst { flag } = action.payload;\n\n\t\t\treturn { ...state, isAutoMuted: flag };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default me;\n","const initialState = {};\n\nconst producers = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_PRODUCER':\n\t\t{\n\t\t\tconst { producer } = action.payload;\n\n\t\t\treturn { ...state, [producer.id]: producer };\n\t\t}\n\n\t\tcase 'REMOVE_PRODUCER':\n\t\t{\n\t\t\tconst { producerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[producerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_PRODUCER_PAUSED':\n\t\t{\n\t\t\tconst { producerId, originator } = action.payload;\n\t\t\tconst producer = state[producerId];\n\n\t\t\tlet newProducer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewProducer = { ...producer, locallyPaused: true };\n\t\t\telse\n\t\t\t\tnewProducer = { ...producer, remotelyPaused: true };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tcase 'SET_PRODUCER_RESUMED':\n\t\t{\n\t\t\tconst { producerId, originator } = action.payload;\n\t\t\tconst producer = state[producerId];\n\n\t\t\tlet newProducer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewProducer = { ...producer, locallyPaused: false };\n\t\t\telse\n\t\t\t\tnewProducer = { ...producer, remotelyPaused: false };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tcase 'SET_PRODUCER_TRACK':\n\t\t{\n\t\t\tconst { producerId, track } = action.payload;\n\t\t\tconst producer = state[producerId];\n\t\t\tconst newProducer = { ...producer, track };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tcase 'SET_PRODUCER_SCORE':\n\t\t{\n\t\t\tconst { producerId, score } = action.payload;\n\n\t\t\tconst producer = state[producerId];\n\n\t\t\tconst newProducer = { ...producer, score };\n\n\t\t\treturn { ...state, [producerId]: newProducer };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default producers;\n","const initialState = {};\n\nconst peer = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_PEER':\n\t\t\treturn action.payload.peer;\n\n\t\tcase 'SET_PEER_DISPLAY_NAME':\n\t\t\treturn { ...state, displayName: action.payload.displayName };\n\n\t\tcase 'SET_PEER_VIDEO_IN_PROGRESS':\n\t\t\treturn { ...state, peerVideoInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_AUDIO_IN_PROGRESS':\n\t\t\treturn { ...state, peerAudioInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_SCREEN_IN_PROGRESS':\n\t\t\treturn { ...state, peerScreenInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_KICK_IN_PROGRESS':\n\t\t\treturn { ...state, peerKickInProgress: action.payload.flag };\n\n\t\tcase 'SET_PEER_RAISED_HAND':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\traisedHand          : action.payload.raisedHand,\n\t\t\t\traisedHandTimestamp : action.payload.raisedHandTimestamp\n\t\t\t};\n\n\t\tcase 'SET_PEER_RAISED_HAND_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\traisedHandInProgress : action.payload.flag\n\t\t\t};\n\n\t\tcase 'ADD_CONSUMER':\n\t\t{\n\t\t\tconst consumers = [ ...state.consumers, action.payload.consumer.id ];\n\n\t\t\treturn { ...state, consumers };\n\t\t}\n\n\t\tcase 'REMOVE_CONSUMER':\n\t\t{\n\t\t\tconst consumers = state.consumers.filter((consumer) =>\n\t\t\t\tconsumer !== action.payload.consumerId);\n\n\t\t\treturn { ...state, consumers };\n\t\t}\n\n\t\tcase 'SET_PEER_PICTURE':\n\t\t{\n\t\t\treturn { ...state, picture: action.payload.picture };\n\t\t}\n\n\t\tcase 'ADD_PEER_ROLE':\n\t\t{\n\t\t\tconst roles = [ ...state.roles, action.payload.role ];\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'REMOVE_PEER_ROLE':\n\t\t{\n\t\t\tconst roles = state.roles.filter((role) =>\n\t\t\t\trole !== action.payload.role);\n\n\t\t\treturn { ...state, roles };\n\t\t}\n\n\t\tcase 'STOP_PEER_AUDIO_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstopPeerAudioInProgress : action.payload.flag\n\t\t\t};\n\n\t\tcase 'STOP_PEER_VIDEO_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstopPeerVideoInProgress : action.payload.flag\n\t\t\t};\n\n\t\tcase 'STOP_PEER_SCREEN_SHARING_IN_PROGRESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstopPeerScreenSharingInProgress : action.payload.flag\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nconst peers = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_PEER':\n\t\t{\n\t\t\treturn { ...state, [action.payload.peer.id]: peer(undefined, action) };\n\t\t}\n\n\t\tcase 'REMOVE_PEER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[peerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_PEER_DISPLAY_NAME':\n\t\tcase 'SET_PEER_VIDEO_IN_PROGRESS':\n\t\tcase 'SET_PEER_AUDIO_IN_PROGRESS':\n\t\tcase 'SET_PEER_SCREEN_IN_PROGRESS':\n\t\tcase 'SET_PEER_RAISED_HAND':\n\t\tcase 'SET_PEER_RAISED_HAND_IN_PROGRESS':\n\t\tcase 'SET_PEER_PICTURE':\n\t\tcase 'ADD_CONSUMER':\n\t\tcase 'ADD_PEER_ROLE':\n\t\tcase 'REMOVE_PEER_ROLE':\n\t\tcase 'STOP_PEER_AUDIO_IN_PROGRESS':\n\t\tcase 'STOP_PEER_VIDEO_IN_PROGRESS':\n\t\tcase 'STOP_PEER_SCREEN_SHARING_IN_PROGRESS':\n\t\t{\n\t\t\tconst oldPeer = state[action.payload.peerId];\n\n\t\t\tif (!oldPeer)\n\t\t\t{\n\t\t\t\tthrow new Error('no Peer found');\n\t\t\t}\n\n\t\t\treturn { ...state, [oldPeer.id]: peer(oldPeer, action) };\n\t\t}\n\n\t\tcase 'SET_PEER_KICK_IN_PROGRESS':\n\t\tcase 'REMOVE_CONSUMER':\n\t\t{\n\t\t\tconst oldPeer = state[action.payload.peerId];\n\n\t\t\t// NOTE: This means that the Peer was closed before, so it's ok.\n\t\t\tif (!oldPeer)\n\t\t\t\treturn state;\n\n\t\t\treturn { ...state, [oldPeer.id]: peer(oldPeer, action) };\n\t\t}\n\n\t\tcase 'CLEAR_PEERS':\n\t\t{\n\t\t\treturn initialState;\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default peers;\n","const lobbyPeer = (state = {}, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_LOBBY_PEER':\n\t\t\treturn { id: action.payload.peerId };\n\n\t\tcase 'SET_LOBBY_PEER_DISPLAY_NAME':\n\t\t\treturn { ...state, displayName: action.payload.displayName };\n\t\tcase 'SET_LOBBY_PEER_PICTURE':\n\t\t\treturn { ...state, picture: action.payload.picture };\n\t\tcase 'SET_LOBBY_PEER_PROMOTION_IN_PROGRESS':\n\t\t\treturn { ...state, promotionInProgress: action.payload.flag };\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nconst lobbyPeers = (state = {}, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_LOBBY_PEER':\n\t\t{\n\t\t\treturn { ...state, [action.payload.peerId]: lobbyPeer(undefined, action) };\n\t\t}\n\n\t\tcase 'REMOVE_LOBBY_PEER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[peerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_LOBBY_PEER_DISPLAY_NAME':\n\t\tcase 'SET_LOBBY_PEER_PICTURE':\n\t\tcase 'SET_LOBBY_PEER_PROMOTION_IN_PROGRESS':\n\t\t{\n\t\t\tconst oldLobbyPeer = state[action.payload.peerId];\n\n\t\t\tif (!oldLobbyPeer)\n\t\t\t{\n\t\t\t\t// Tried to update non-existent lobbyPeer. Has probably been promoted, or left.\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { ...state, [oldLobbyPeer.id]: lobbyPeer(oldLobbyPeer, action) };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default lobbyPeers;\n","const initialState = {};\n\nconst consumers = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_CONSUMER':\n\t\t{\n\t\t\tconst { consumer } = action.payload;\n\n\t\t\treturn { ...state, [consumer.id]: consumer };\n\t\t}\n\n\t\tcase 'REMOVE_CONSUMER':\n\t\t{\n\t\t\tconst { consumerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[consumerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_CONSUMER_PAUSED':\n\t\t{\n\t\t\tconst { consumerId, originator } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\n\t\t\tlet newConsumer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewConsumer = { ...consumer, locallyPaused: true };\n\t\t\telse\n\t\t\t\tnewConsumer = { ...consumer, remotelyPaused: true };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_RESUMED':\n\t\t{\n\t\t\tconst { consumerId, originator } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\n\t\t\tlet newConsumer;\n\n\t\t\tif (originator === 'local')\n\t\t\t\tnewConsumer = { ...consumer, locallyPaused: false };\n\t\t\telse\n\t\t\t\tnewConsumer = { ...consumer, remotelyPaused: false };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_CURRENT_LAYERS':\n\t\t{\n\t\t\tconst { consumerId, spatialLayer, temporalLayer } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer =\n\t\t\t{\n\t\t\t\t...consumer,\n\t\t\t\tcurrentSpatialLayer  : spatialLayer,\n\t\t\t\tcurrentTemporalLayer : temporalLayer\n\t\t\t};\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_PREFERRED_LAYERS':\n\t\t{\n\t\t\tconst { consumerId, spatialLayer, temporalLayer } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer =\n\t\t\t{\n\t\t\t\t...consumer,\n\t\t\t\tpreferredSpatialLayer  : spatialLayer,\n\t\t\t\tpreferredTemporalLayer : temporalLayer\n\t\t\t};\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_PRIORITY':\n\t\t{\n\t\t\tconst { consumerId, priority } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer = { ...consumer, priority };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_TRACK':\n\t\t{\n\t\t\tconst { consumerId, track } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\t\t\tconst newConsumer = { ...consumer, track };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'SET_CONSUMER_SCORE':\n\t\t{\n\t\t\tconst { consumerId, score } = action.payload;\n\t\t\tconst consumer = state[consumerId];\n\n\t\t\tif (!consumer)\n\t\t\t\treturn state;\n\n\t\t\tconst newConsumer = { ...consumer, score };\n\n\t\t\treturn { ...state, [consumerId]: newConsumer };\n\t\t}\n\n\t\tcase 'CLEAR_CONSUMERS':\n\t\t{\n\t\t\treturn initialState;\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default consumers;\n","const initialState = {};\n\nconst peerVolumes = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'SET_ME':\n\t\t{\n\t\t\tconst {\n\t\t\t\tpeerId\n\t\t\t} = action.payload;\n\n\t\t\treturn { ...state, [peerId]: -100 };\n\t\t}\n\t\tcase 'ADD_PEER':\n\t\t{\n\t\t\tconst { peer } = action.payload;\n\n\t\t\treturn { ...state, [peer.id]: -100 };\n\t\t}\n\n\t\tcase 'REMOVE_PEER':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst newState = { ...state };\n\n\t\t\tdelete newState[peerId];\n\n\t\t\treturn newState;\n\t\t}\n\n\t\tcase 'SET_PEER_VOLUME':\n\t\t{\n\t\t\tconst { peerId } = action.payload;\n\t\t\tconst dBs = action.payload.volume < -100 ? -100 : action.payload.volume;\n\n\t\t\treturn { ...state, [peerId]: Math.round(dBs) };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default peerVolumes;\n","const notifications = (state = [], action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_NOTIFICATION':\n\t\t{\n\t\t\tconst { notification } = action.payload;\n\n\t\t\treturn [ ...state, notification ];\n\t\t}\n\n\t\tcase 'REMOVE_NOTIFICATION':\n\t\t{\n\t\t\tconst { notificationId } = action.payload;\n\n\t\t\treturn state.filter((notification) => notification.id !== notificationId);\n\t\t}\n\n\t\tcase 'REMOVE_ALL_NOTIFICATIONS':\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default notifications;\n","import\n{\n\tcreateNewMessage\n} from './helper';\n\nconst chat = (state = [], action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_NEW_USER_MESSAGE':\n\t\t{\n\t\t\tconst { text } = action.payload;\n\n\t\t\tconst message = createNewMessage(text, 'client', 'Me', undefined);\n\n\t\t\treturn [ ...state, message ];\n\t\t}\n\n\t\tcase 'ADD_NEW_RESPONSE_MESSAGE':\n\t\t{\n\t\t\tconst { message } = action.payload;\n\n\t\t\treturn [ ...state, message ];\n\t\t}\n\n\t\tcase 'ADD_CHAT_HISTORY':\n\t\t{\n\t\t\tconst { chatHistory } = action.payload;\n\n\t\t\treturn [ ...state, ...chatHistory ];\n\t\t}\n\n\t\tcase 'CLEAR_CHAT':\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default chat;\n","export function createNewMessage(text, sender, name, picture)\n{\n\treturn {\n\t\ttype : 'message',\n\t\ttext,\n\t\ttime : Date.now(),\n\t\tname,\n\t\tsender,\n\t\tpicture\n\t};\n}","const initialState =\n{\n\ttoolAreaOpen   : false,\n\tcurrentToolTab : 'chat', // chat, settings, users\n\tunreadMessages : 0,\n\tunreadFiles    : 0\n};\n\nconst toolarea = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'TOGGLE_TOOL_AREA':\n\t\t{\n\t\t\tconst toolAreaOpen = !state.toolAreaOpen;\n\t\t\tconst unreadMessages = toolAreaOpen && state.currentToolTab === 'chat' ? 0 : state.unreadMessages;\n\t\t\tconst unreadFiles = toolAreaOpen && state.currentToolTab === 'files' ? 0 : state.unreadFiles;\n\n\t\t\treturn { ...state, toolAreaOpen, unreadMessages, unreadFiles };\n\t\t}\n\n\t\tcase 'OPEN_TOOL_AREA':\n\t\t{\n\t\t\tconst toolAreaOpen = true;\n\t\t\tconst unreadMessages = state.currentToolTab === 'chat' ? 0 : state.unreadMessages;\n\t\t\tconst unreadFiles = state.currentToolTab === 'files' ? 0 : state.unreadFiles;\n\n\t\t\treturn { ...state, toolAreaOpen, unreadMessages, unreadFiles };\n\t\t}\n\n\t\tcase 'CLOSE_TOOL_AREA':\n\t\t{\n\t\t\tconst toolAreaOpen = false;\n\n\t\t\treturn { ...state, toolAreaOpen };\n\t\t}\n\n\t\tcase 'SET_TOOL_TAB':\n\t\t{\n\t\t\tconst { toolTab } = action.payload;\n\t\t\tconst unreadMessages = toolTab === 'chat' ? 0 : state.unreadMessages;\n\t\t\tconst unreadFiles = toolTab === 'files' ? 0 : state.unreadFiles;\n\n\t\t\treturn { ...state, currentToolTab: toolTab, unreadMessages, unreadFiles };\n\t\t}\n\n\t\tcase 'ADD_NEW_RESPONSE_MESSAGE':\n\t\t{\n\t\t\tif (state.toolAreaOpen && state.currentToolTab === 'chat')\n\t\t\t{\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { ...state, unreadMessages: state.unreadMessages + 1 };\n\t\t}\n\n\t\tcase 'ADD_FILE':\n\t\t{\n\t\t\tif (state.toolAreaOpen && state.currentToolTab === 'files')\n\t\t\t{\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { ...state, unreadFiles: state.unreadFiles + 1 };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default toolarea;\n","const files = (state = {}, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_FILE':\n\t\t{\n\t\t\tconst { peerId, magnetUri } = action.payload;\n\n\t\t\tconst newFile = {\n\t\t\t\tactive    : false,\n\t\t\t\tprogress  : 0,\n\t\t\t\tfiles     : null,\n\t\t\t\tpeerId    : peerId,\n\t\t\t\tmagnetUri : magnetUri\n\t\t\t};\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'ADD_FILE_HISTORY':\n\t\t{\n\t\t\tconst { fileHistory } = action.payload;\n\t\t\tconst newFileHistory = {};\n\n\t\t\t// eslint-disable-next-line\n\t\t\tfileHistory.map((file) =>\n\t\t\t{\n\t\t\t\tconst newFile =\n\t\t\t\t{\n\t\t\t\t\tactive   : false,\n\t\t\t\t\tprogress : 0,\n\t\t\t\t\tfiles    : null,\n\t\t\t\t\t...file\n\t\t\t\t};\n\n\t\t\t\tnewFileHistory[file.magnetUri] = newFile;\n\t\t\t});\n\n\t\t\treturn { ...state, ...newFileHistory };\n\t\t}\n\n\t\tcase 'SET_FILE_ACTIVE':\n\t\t{\n\t\t\tconst { magnetUri } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = { ...file, active: true };\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'SET_FILE_INACTIVE':\n\t\t{\n\t\t\tconst { magnetUri } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = { ...file, active: false };\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'SET_FILE_PROGRESS':\n\t\t{\n\t\t\tconst { magnetUri, progress } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = { ...file, progress: progress };\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'SET_FILE_DONE':\n\t\t{\n\t\t\tconst { magnetUri, sharedFiles } = action.payload;\n\t\t\tconst file = state[magnetUri];\n\n\t\t\tconst newFile = {\n\t\t\t\t...file,\n\t\t\t\tfiles    : sharedFiles,\n\t\t\t\tprogress : 1,\n\t\t\t\tactive   : false,\n\t\t\t\ttimeout  : false\n\t\t\t};\n\n\t\t\treturn { ...state, [magnetUri]: newFile };\n\t\t}\n\n\t\tcase 'CLEAR_FILES':\n\t\t\treturn {};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default files;\n","const initialState =\n{\n\tdisplayName             : 'Guest',\n\tselectedWebcam          : null,\n\tselectedAudioDevice     : null,\n\tadvancedMode            : false,\n\tsampleRate              : 48000,\n\tchannelCount            : 1,\n\tvolume                  : 1.0,\n\tautoGainControl         : false,\n\techoCancellation        : true,\n\tnoiseSuppression        : true,\n\tvoiceActivatedUnmute    : false,\n\tnoiseThreshold          : -50,\n\tsampleSize              : 16,\n\t// low, medium, high, veryhigh, ultra\n\tresolution              : window.config.defaultResolution || 'medium',\n\tframeRate               : window.config.defaultFrameRate || 15,\n\tscreenSharingResolution : window.config.defaultScreenResolution || 'veryhigh',\n\tscreenSharingFrameRate  : window.config.defaultScreenSharingFrameRate || 5,\n\tlastN                   : 4,\n\tpermanentTopBar         : true,\n\thiddenControls          : false,\n\tshowNotifications       : true,\n\tnotificationSounds      : true,\n\tbuttonControlBar        : window.config.buttonControlBar || false,\n\tdrawerOverlayed         : window.config.drawerOverlayed || true,\n\t...window.config.defaultAudio\n};\n\nconst settings = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'CHANGE_WEBCAM':\n\t\t{\n\t\t\treturn { ...state, selectedWebcam: action.payload.deviceId };\n\t\t}\n\n\t\tcase 'CHANGE_AUDIO_DEVICE':\n\t\t{\n\t\t\treturn { ...state, selectedAudioDevice: action.payload.deviceId };\n\t\t}\n\n\t\tcase 'CHANGE_AUDIO_OUTPUT_DEVICE':\n\t\t{\n\t\t\treturn { ...state, selectedAudioOutputDevice: action.payload.deviceId };\n\t\t}\n\n\t\tcase 'SET_DISPLAY_NAME':\n\t\t{\n\t\t\tconst { displayName } = action.payload;\n\n\t\t\treturn { ...state, displayName };\n\t\t}\n\n\t\tcase 'TOGGLE_ADVANCED_MODE':\n\t\t{\n\t\t\tconst advancedMode = !state.advancedMode;\n\n\t\t\treturn { ...state, advancedMode };\n\t\t}\n\n\t\tcase 'SET_SAMPLE_RATE':\n\t\t{\n\t\t\tconst { sampleRate } = action.payload;\n\n\t\t\treturn { ...state, sampleRate };\n\t\t}\n\n\t\tcase 'SET_CHANNEL_COUNT':\n\t\t{\n\t\t\tconst { channelCount } = action.payload;\n\n\t\t\treturn { ...state, channelCount };\n\t\t}\n\n\t\tcase 'SET_VOLUME':\n\t\t{\n\t\t\tconst { volume } = action.payload;\n\n\t\t\treturn { ...state, volume };\n\t\t}\n\n\t\tcase 'SET_AUTO_GAIN_CONTROL':\n\t\t{\n\t\t\tconst { autoGainControl } = action.payload;\n\n\t\t\treturn { ...state, autoGainControl };\n\t\t}\n\n\t\tcase 'SET_ECHO_CANCELLATION':\n\t\t{\n\t\t\tconst { echoCancellation } = action.payload;\n\n\t\t\treturn { ...state, echoCancellation };\n\t\t}\n\n\t\tcase 'SET_NOISE_SUPPRESSION':\n\t\t{\n\t\t\tconst { noiseSuppression } = action.payload;\n\n\t\t\treturn { ...state, noiseSuppression };\n\t\t}\n\n\t\tcase 'SET_VOICE_ACTIVATED_UNMUTE':\n\t\t{\n\t\t\tconst { voiceActivatedUnmute } = action.payload;\n\n\t\t\treturn { ...state, voiceActivatedUnmute };\n\t\t}\n\n\t\tcase 'SET_NOISE_THRESHOLD':\n\t\t{\n\t\t\tconst { noiseThreshold } = action.payload;\n\n\t\t\treturn { ...state, noiseThreshold };\n\t\t}\n\n\t\tcase 'SET_DEFAULT_AUDIO':\n\t\t{\n\t\t\tconst { audio } = action.payload;\n\n\t\t\treturn { ...state, audio };\n\t\t}\n\n\t\tcase 'SET_SAMPLE_SIZE':\n\t\t{\n\t\t\tconst { sampleSize } = action.payload;\n\n\t\t\treturn { ...state, sampleSize };\n\t\t}\n\n\t\tcase 'SET_LAST_N':\n\t\t{\n\t\t\tconst { lastN } = action.payload;\n\n\t\t\treturn { ...state, lastN };\n\t\t}\n\n\t\tcase 'TOGGLE_PERMANENT_TOPBAR':\n\t\t{\n\t\t\tconst permanentTopBar = !state.permanentTopBar;\n\n\t\t\treturn { ...state, permanentTopBar };\n\t\t}\n\n\t\tcase 'TOGGLE_BUTTON_CONTROL_BAR':\n\t\t{\n\t\t\tconst buttonControlBar = !state.buttonControlBar;\n\n\t\t\treturn { ...state, buttonControlBar };\n\t\t}\n\n\t\tcase 'TOGGLE_DRAWER_OVERLAYED':\n\t\t{\n\t\t\tconst drawerOverlayed = !state.drawerOverlayed;\n\n\t\t\treturn { ...state, drawerOverlayed };\n\t\t}\n\n\t\tcase 'TOGGLE_HIDDEN_CONTROLS':\n\t\t{\n\t\t\tconst hiddenControls = !state.hiddenControls;\n\n\t\t\treturn { ...state, hiddenControls };\n\t\t}\n\n\t\tcase 'TOGGLE_NOTIFICATION_SOUNDS':\n\t\t{\n\t\t\tconst notificationSounds = !state.notificationSounds;\n\n\t\t\treturn { ...state, notificationSounds };\n\t\t}\n\n\t\tcase 'TOGGLE_SHOW_NOTIFICATIONS':\n\t\t{\n\t\t\tconst showNotifications = !state.showNotifications;\n\n\t\t\treturn { ...state, showNotifications };\n\t\t}\n\n\t\tcase 'SET_VIDEO_RESOLUTION':\n\t\t{\n\t\t\tconst { resolution } = action.payload;\n\n\t\t\treturn { ...state, resolution };\n\t\t}\n\n\t\tcase 'SET_VIDEO_FRAME_RATE':\n\t\t{\n\t\t\tconst { frameRate } = action.payload;\n\n\t\t\treturn { ...state, frameRate };\n\t\t}\n\n\t\tcase 'SET_SCREEN_SHARING_RESOLUTION':\n\t\t{\n\t\t\tconst { screenSharingResolution } = action.payload;\n\n\t\t\treturn { ...state, screenSharingResolution };\n\t\t}\n\n\t\tcase 'SET_SCREEN_SHARING_FRAME_RATE':\n\t\t{\n\t\t\tconst { screenSharingFrameRate } = action.payload;\n\n\t\t\treturn { ...state, screenSharingFrameRate };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default settings;\n","const initialState = {};\n\nconst transports = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_TRANSPORT_STATS':\n\t\t{\n\t\t\tconst { transport, type } = action.payload;\n\n\t\t\treturn { ...state, [type]: transport[0] };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default transports;\n","import { combineReducers } from 'redux';\nimport room from './room';\nimport me from './me';\nimport producers from './producers';\nimport peers from './peers';\nimport lobbyPeers from './lobbyPeers';\nimport consumers from './consumers';\nimport peerVolumes from './peerVolumes';\nimport notifications from './notifications';\nimport chat from './chat';\nimport toolarea from './toolarea';\nimport files from './files';\nimport settings from './settings';\nimport transports from './transports';\n\nexport default combineReducers({\n\troom,\n\tme,\n\tproducers,\n\tconsumers,\n\ttransports,\n\tpeers,\n\tlobbyPeers,\n\tpeerVolumes,\n\tnotifications,\n\tchat,\n\ttoolarea,\n\tfiles,\n\tsettings\n});\n","import {\n\tcreateStore,\n\tapplyMiddleware,\n\tcompose\n} from 'redux';\nimport thunk from 'redux-thunk';\nimport { createLogger } from 'redux-logger';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport autoMergeLevel2 from 'redux-persist/lib/stateReconciler/autoMergeLevel2';\nimport rootReducer from './reducers/rootReducer';\n\nconst persistConfig =\n{\n\tkey             : 'root',\n\tstorage         : storage,\n\tstateReconciler : autoMergeLevel2,\n\twhitelist       : [ 'settings' ]\n};\n\nconst reduxMiddlewares =\n[\n\tthunk\n];\n\nif (process.env.REACT_APP_DEBUG === '*' || process.env.NODE_ENV !== 'production')\n{\n\tconst reduxLogger = createLogger(\n\t\t{\n\t\t\t// filter VOLUME level actions from log\n\t\t\tpredicate : (getState, action) => !(action.type === 'SET_PEER_VOLUME'),\n\t\t\tduration  : true,\n\t\t\ttimestamp : false,\n\t\t\tlevel     : 'log',\n\t\t\tlogErrors : true\n\t\t});\n\n\treduxMiddlewares.push(reduxLogger);\n}\n\nconst composeEnhancers =\n\ttypeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\n\t\twindow.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}) :\n\t\tcompose;\n\nconst enhancer = composeEnhancers(\n\tapplyMiddleware(...reduxMiddlewares)\n);\n\nconst pReducer = persistReducer(persistConfig, rootReducer);\n\nexport const store = createStore(\n\tpReducer,\n\tenhancer\n);\n\nexport const persistor = persistStore(store);","import debug from 'debug';\n\nconst APP_NAME = 'multiparty-meeting';\n\nexport default class Logger\n{\n\tconstructor(prefix)\n\t{\n\t\tif (prefix)\n\t\t{\n\t\t\tthis._debug = debug(`${APP_NAME}:${prefix}`);\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN:${prefix}`);\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR:${prefix}`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._debug = debug(APP_NAME);\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN`);\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR`);\n\t\t}\n\n\t\t/* eslint-disable no-console */\n\t\tthis._debug.log = console.info.bind(console);\n\t\tthis._warn.log = console.warn.bind(console);\n\t\tthis._error.log = console.error.bind(console);\n\t\t/* eslint-enable no-console */\n\t}\n\n\tget debug()\n\t{\n\t\treturn this._debug;\n\t}\n\n\tget warn()\n\t{\n\t\treturn this._warn;\n\t}\n\n\tget error()\n\t{\n\t\treturn this._error;\n\t}\n}\n","export const setRoomName = (name) =>\n\t({\n\t\ttype    : 'SET_ROOM_NAME',\n\t\tpayload : { name }\n\n\t});\n\nexport const setRoomState = (state) =>\n\t({\n\t\ttype    : 'SET_ROOM_STATE',\n\t\tpayload : { state }\n\n\t});\n\nexport const setRoomActiveSpeaker = (peerId) =>\n\t({\n\t\ttype    : 'SET_ROOM_ACTIVE_SPEAKER',\n\t\tpayload : { peerId }\n\t});\n\nexport const setRoomLocked = () =>\n\t({\n\t\ttype : 'SET_ROOM_LOCKED'\n\t});\n\nexport const setRoomUnLocked = () =>\n\t({\n\t\ttype : 'SET_ROOM_UNLOCKED'\n\t});\n\nexport const setInLobby = (inLobby) =>\n\t({\n\t\ttype    : 'SET_IN_LOBBY',\n\t\tpayload : { inLobby }\n\t});\n\nexport const setSignInRequired = (signInRequired) =>\n\t({\n\t\ttype    : 'SET_SIGN_IN_REQUIRED',\n\t\tpayload : { signInRequired }\n\t});\n\nexport const setOverRoomLimit = (overRoomLimit) =>\n\t({\n\t\ttype    : 'SET_OVER_ROOM_LIMIT',\n\t\tpayload : { overRoomLimit }\n\t});\n\nexport const setAccessCode = (accessCode) =>\n\t({\n\t\ttype    : 'SET_ACCESS_CODE',\n\t\tpayload : { accessCode }\n\t});\n\nexport const setJoinByAccessCode = (joinByAccessCode) =>\n\t({\n\t\ttype    : 'SET_JOIN_BY_ACCESS_CODE',\n\t\tpayload : { joinByAccessCode }\n\t});\n\nexport const setSettingsOpen = (settingsOpen) =>\n\t({\n\t\ttype    : 'SET_SETTINGS_OPEN',\n\t\tpayload : { settingsOpen }\n\t});\n\nexport const setExtraVideoOpen = (extraVideoOpen) =>\n\t({\n\t\ttype    : 'SET_EXTRA_VIDEO_OPEN',\n\t\tpayload : { extraVideoOpen }\n\t});\n\nexport const setHelpOpen = (helpOpen) =>\n\t({\n\t\ttype    : 'SET_HELP_OPEN',\n\t\tpayload : { helpOpen }\n\t});\n\nexport const setAboutOpen = (aboutOpen) =>\n\t({\n\t\ttype    : 'SET_ABOUT_OPEN',\n\t\tpayload : { aboutOpen }\n\t});\n\nexport const setSettingsTab = (tab) =>\n\t({\n\t\ttype    : 'SET_SETTINGS_TAB',\n\t\tpayload : { tab }\n\t});\n\nexport const setLockDialogOpen = (lockDialogOpen) =>\n\t({\n\t\ttype    : 'SET_LOCK_DIALOG_OPEN',\n\t\tpayload : { lockDialogOpen }\n\t});\n\nexport const setFileSharingSupported = (supported) =>\n\t({\n\t\ttype    : 'FILE_SHARING_SUPPORTED',\n\t\tpayload : { supported }\n\t});\n\nexport const toggleConsumerWindow = (consumerId) =>\n\t({\n\t\ttype    : 'TOGGLE_WINDOW_CONSUMER',\n\t\tpayload : { consumerId }\n\t});\n\nexport const setToolbarsVisible = (toolbarsVisible) =>\n\t({\n\t\ttype    : 'SET_TOOLBARS_VISIBLE',\n\t\tpayload : { toolbarsVisible }\n\t});\n\nexport const setDisplayMode = (mode) =>\n\t({\n\t\ttype    : 'SET_DISPLAY_MODE',\n\t\tpayload : { mode }\n\t});\n\nexport const setSelectedPeer = (selectedPeerId) =>\n\t({\n\t\ttype    : 'SET_SELECTED_PEER',\n\t\tpayload : { selectedPeerId }\n\t});\n\nexport const setSpotlights = (spotlights) =>\n\t({\n\t\ttype    : 'SET_SPOTLIGHTS',\n\t\tpayload : { spotlights }\n\t});\n\nexport const clearSpotlights = () =>\n\t({\n\t\ttype : 'CLEAR_SPOTLIGHTS'\n\t});\n\nexport const toggleJoined = () =>\n\t({\n\t\ttype : 'TOGGLE_JOINED'\n\t});\n\nexport const toggleConsumerFullscreen = (consumerId) =>\n\t({\n\t\ttype    : 'TOGGLE_FULLSCREEN_CONSUMER',\n\t\tpayload : { consumerId }\n\t});\n\nexport const setLobbyPeersPromotionInProgress = (flag) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEERS_PROMOTION_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setMuteAllInProgress = (flag) =>\n\t({\n\t\ttype    : 'MUTE_ALL_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setStopAllVideoInProgress = (flag) =>\n\t({\n\t\ttype    : 'STOP_ALL_VIDEO_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setStopAllScreenSharingInProgress = (flag) =>\n\t({\n\t\ttype    : 'STOP_ALL_SCREEN_SHARING_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setCloseMeetingInProgress = (flag) =>\n\t({\n\t\ttype    : 'CLOSE_MEETING_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setClearChatInProgress = (flag) =>\n\t({\n\t\ttype    : 'CLEAR_CHAT_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setClearFileSharingInProgress = (flag) =>\n\t({\n\t\ttype    : 'CLEAR_FILE_SHARING_IN_PROGRESS',\n\t\tpayload : { flag }\n\t});\n\nexport const setRoomPermissions = (roomPermissions) =>\n\t({\n\t\ttype    : 'SET_ROOM_PERMISSIONS',\n\t\tpayload : { roomPermissions }\n\t});\n\nexport const setAllowWhenRoleMissing = (allowWhenRoleMissing) =>\n\t({\n\t\ttype    : 'SET_ALLOW_WHEN_ROLE_MISSING',\n\t\tpayload : { allowWhenRoleMissing }\n\t});\n","/**\n * Create a function which will call the callback function\n * after the given amount of milliseconds has passed since\n * the last time the callback function was called.\n */\nexport const idle = (callback, delay) =>\n{\n\tlet handle;\n\n\treturn () =>\n\t{\n\t\tif (handle)\n\t\t{\n\t\t\tclearTimeout(handle);\n\t\t}\n\n\t\thandle = setTimeout(callback, delay);\n\t};\n};\n\n/**\n * Error produced when a socket request has a timeout.\n */\nexport class SocketTimeoutError extends Error\n{\n\tconstructor(message)\n\t{\n\t\tsuper(message);\n\n\t\tthis.name = 'SocketTimeoutError';\n\n\t\tif (Error.hasOwnProperty('captureStackTrace')) // Just in V8.\n\t\t\tError.captureStackTrace(this, SocketTimeoutError);\n\t\telse\n\t\t\tthis.stack = (new Error(message)).stack;\n\t}\n}","import React from 'react';\n\nimport './LoadingView.css';\n\nconst LoadingView = () =>\n{\n\treturn (\n\t\t<div className='LoadingView' />\n\t);\n};\n\nexport default LoadingView;\n","export function getSignalingUrl(peerId, roomId)\n{\n\tconst port =\n\t\tprocess.env.NODE_ENV !== 'production' ?\n\t\t\twindow.config.developmentPort\n\t\t\t:\n\t\t\twindow.config.productionPort;\n\n\tconst url = `wss://${window.location.hostname}:${port}/?peerId=${peerId}&roomId=${roomId}`;\n\n\treturn url;\n}\n","import randomString from 'random-string';\nimport * as notificationActions from './notificationActions';\n\n// This returns a redux-thunk action (a function).\nexport const notify = ({ type = 'info', text, timeout }) =>\n{\n\tif (!timeout)\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'info':\n\t\t\t\ttimeout = 3000;\n\t\t\t\tbreak;\n\t\t\tcase 'error':\n\t\t\t\ttimeout = 5000;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttimeout = 3000;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tconst notification =\n\t{\n\t\tid      : randomString({ length: 6 }).toLowerCase(),\n\t\ttype    : type,\n\t\ttext    : text,\n\t\ttimeout : timeout\n\t};\n\n\treturn (dispatch) =>\n\t{\n\t\tdispatch(notificationActions.addNotification(notification));\n\n\t\tsetTimeout(() =>\n\t\t{\n\t\t\tdispatch(notificationActions.removeNotification(notification.id));\n\t\t}, timeout);\n\t};\n};\n","export const addPeer = (peer) =>\n\t({\n\t\ttype    : 'ADD_PEER',\n\t\tpayload : { peer }\n\t});\n\nexport const removePeer = (peerId) =>\n\t({\n\t\ttype    : 'REMOVE_PEER',\n\t\tpayload : { peerId }\n\t});\n\nexport const clearPeers = () =>\n\t({\n\t\ttype : 'CLEAR_PEERS'\n\t});\n\nexport const setPeerDisplayName = (displayName, peerId) =>\n\t({\n\t\ttype    : 'SET_PEER_DISPLAY_NAME',\n\t\tpayload : { displayName, peerId }\n\t});\n\nexport const setPeerVideoInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_VIDEO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerAudioInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_AUDIO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerScreenInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_SCREEN_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerRaisedHand = (peerId, raisedHand, raisedHandTimestamp) =>\n\t({\n\t\ttype    : 'SET_PEER_RAISED_HAND',\n\t\tpayload : { peerId, raisedHand, raisedHandTimestamp }\n\t});\n\nexport const setPeerRaisedHandInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_RAISED_HAND_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setPeerPicture = (peerId, picture) =>\n\t({\n\t\ttype    : 'SET_PEER_PICTURE',\n\t\tpayload : { peerId, picture }\n\t});\n\nexport const addPeerRole = (peerId, role) =>\n\t({\n\t\ttype    : 'ADD_PEER_ROLE',\n\t\tpayload : { peerId, role }\n\t});\n\nexport const removePeerRole = (peerId, role) =>\n\t({\n\t\ttype    : 'REMOVE_PEER_ROLE',\n\t\tpayload : { peerId, role }\n\t});\n\nexport const setPeerKickInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_PEER_KICK_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setMutePeerInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'STOP_PEER_AUDIO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setStopPeerVideoInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'STOP_PEER_VIDEO_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n\nexport const setStopPeerScreenSharingInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'STOP_PEER_SCREEN_SHARING_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});\n","export const setPeerVolume = (peerId, volume) =>\n\t({\n\t\ttype    : 'SET_PEER_VOLUME',\n\t\tpayload : { peerId, volume }\n\t});\n","export const addUserMessage = (text) =>\n\t({\n\t\ttype    : 'ADD_NEW_USER_MESSAGE',\n\t\tpayload : { text }\n\t});\n\nexport const addResponseMessage = (message) =>\n\t({\n\t\ttype    : 'ADD_NEW_RESPONSE_MESSAGE',\n\t\tpayload : { message }\n\t});\n\nexport const addChatHistory = (chatHistory) =>\n\t({\n\t\ttype    : 'ADD_CHAT_HISTORY',\n\t\tpayload : { chatHistory }\n\t});\n\nexport const clearChat = () =>\n\t({\n\t\ttype : 'CLEAR_CHAT'\n\t});","export const addFile = (peerId, magnetUri) =>\n\t({\n\t\ttype    : 'ADD_FILE',\n\t\tpayload : { peerId, magnetUri }\n\t});\n\nexport const addFileHistory = (fileHistory) =>\n\t({\n\t\ttype    : 'ADD_FILE_HISTORY',\n\t\tpayload : { fileHistory }\n\t});\n\nexport const setFileActive = (magnetUri) =>\n\t({\n\t\ttype    : 'SET_FILE_ACTIVE',\n\t\tpayload : { magnetUri }\n\t});\n\nexport const setFileInActive = (magnetUri) =>\n\t({\n\t\ttype    : 'SET_FILE_INACTIVE',\n\t\tpayload : { magnetUri }\n\t});\n\nexport const setFileProgress = (magnetUri, progress) =>\n\t({\n\t\ttype    : 'SET_FILE_PROGRESS',\n\t\tpayload : { magnetUri, progress }\n\t});\n\nexport const setFileDone = (magnetUri, sharedFiles) =>\n\t({\n\t\ttype    : 'SET_FILE_DONE',\n\t\tpayload : { magnetUri, sharedFiles }\n\t});\n\nexport const clearFiles = () =>\n\t({\n\t\ttype : 'CLEAR_FILES'\n\t});","export const addLobbyPeer = (peerId) =>\n\t({\n\t\ttype    : 'ADD_LOBBY_PEER',\n\t\tpayload : { peerId }\n\t});\n\nexport const removeLobbyPeer = (peerId) =>\n\t({\n\t\ttype    : 'REMOVE_LOBBY_PEER',\n\t\tpayload : { peerId }\n\t});\n\nexport const setLobbyPeerDisplayName = (displayName, peerId) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEER_DISPLAY_NAME',\n\t\tpayload : { displayName, peerId }\n\t});\n\nexport const setLobbyPeerPicture = (picture, peerId) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEER_PICTURE',\n\t\tpayload : { picture, peerId }\n\t});\n\nexport const setLobbyPeerPromotionInProgress = (peerId, flag) =>\n\t({\n\t\ttype    : 'SET_LOBBY_PEER_PROMOTION_IN_PROGRESS',\n\t\tpayload : { peerId, flag }\n\t});","export const addConsumer = (consumer, peerId) =>\n\t({\n\t\ttype    : 'ADD_CONSUMER',\n\t\tpayload : { consumer, peerId }\n\t});\n\nexport const removeConsumer = (consumerId, peerId) =>\n\t({\n\t\ttype    : 'REMOVE_CONSUMER',\n\t\tpayload : { consumerId, peerId }\n\t});\n\nexport const clearConsumers = () =>\n\t({\n\t\ttype : 'CLEAR_CONSUMERS'\n\t});\n\nexport const setConsumerPaused = (consumerId, originator) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_PAUSED',\n\t\tpayload : { consumerId, originator }\n\t});\n\nexport const setConsumerResumed = (consumerId, originator) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_RESUMED',\n\t\tpayload : { consumerId, originator }\n\t});\n\nexport const setConsumerCurrentLayers = (consumerId, spatialLayer, temporalLayer) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_CURRENT_LAYERS',\n\t\tpayload : { consumerId, spatialLayer, temporalLayer }\n\t});\n\nexport const setConsumerPreferredLayers = (consumerId, spatialLayer, temporalLayer) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_PREFERRED_LAYERS',\n\t\tpayload : { consumerId, spatialLayer, temporalLayer }\n\t});\n\nexport const setConsumerPriority = (consumerId, priority) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_PRIORITY',\n\t\tpayload : { consumerId, priority }\n\t});\n\nexport const setConsumerTrack = (consumerId, track) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_TRACK',\n\t\tpayload : { consumerId, track }\n\t});\n\nexport const setConsumerScore = (consumerId, score) =>\n\t({\n\t\ttype    : 'SET_CONSUMER_SCORE',\n\t\tpayload : { consumerId, score }\n\t});","export const addProducer = (producer) =>\n\t({\n\t\ttype    : 'ADD_PRODUCER',\n\t\tpayload : { producer }\n\t});\n\nexport const removeProducer = (producerId) =>\n\t({\n\t\ttype    : 'REMOVE_PRODUCER',\n\t\tpayload : { producerId }\n\t});\n\nexport const setProducerPaused = (producerId, originator) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_PAUSED',\n\t\tpayload : { producerId, originator }\n\t});\n\nexport const setProducerResumed = (producerId, originator) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_RESUMED',\n\t\tpayload : { producerId, originator }\n\t});\n\nexport const setProducerTrack = (producerId, track) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_TRACK',\n\t\tpayload : { producerId, track }\n\t});\n\nexport const setProducerScore = (producerId, score) =>\n\t({\n\t\ttype    : 'SET_PRODUCER_SCORE',\n\t\tpayload : { producerId, score }\n\t});","export const addTransportStats = (transport, type) =>\n\t({\n\t\ttype    : 'ADD_TRANSPORT_STATS',\n\t\tpayload : { transport, type }\n\t});","import Logger from './Logger';\nimport hark from 'hark';\nimport { getSignalingUrl } from './urlFactory';\nimport { SocketTimeoutError } from './utils';\nimport * as requestActions from './actions/requestActions';\nimport * as meActions from './actions/meActions';\nimport * as roomActions from './actions/roomActions';\nimport * as peerActions from './actions/peerActions';\nimport * as peerVolumeActions from './actions/peerVolumeActions';\nimport * as settingsActions from './actions/settingsActions';\nimport * as chatActions from './actions/chatActions';\nimport * as fileActions from './actions/fileActions';\nimport * as lobbyPeerActions from './actions/lobbyPeerActions';\nimport * as consumerActions from './actions/consumerActions';\nimport * as producerActions from './actions/producerActions';\nimport * as notificationActions from './actions/notificationActions';\nimport * as transportActions from './actions/transportActions';\n\nlet createTorrent;\n\nlet WebTorrent;\n\nlet saveAs;\n\nlet mediasoupClient;\n\nlet io;\n\nlet ScreenShare;\n\nlet Spotlights;\n\nlet requestTimeout,\n\ttransportOptions,\n\tlastN,\n\tmobileLastN;\n\nif (process.env.NODE_ENV !== 'test')\n{\n\t({\n\t\trequestTimeout,\n\t\ttransportOptions,\n\t\tlastN,\n\t\tmobileLastN\n\t} = window.config);\n}\n\nconst logger = new Logger('RoomClient');\n\nconst ROOM_OPTIONS =\n{\n\trequestTimeout   : requestTimeout,\n\ttransportOptions : transportOptions\n};\n\nconst VIDEO_CONSTRAINS =\n{\n\t'low' :\n\t{\n\t\twidth       : { ideal: 320 },\n\t\taspectRatio : 1.334\n\t},\n\t'medium' :\n\t{\n\t\twidth       : { ideal: 640 },\n\t\taspectRatio : 1.334\n\t},\n\t'high' :\n\t{\n\t\twidth       : { ideal: 1280 },\n\t\taspectRatio : 1.334\n\t},\n\t'veryhigh' :\n\t{\n\t\twidth       : { ideal: 1920 },\n\t\taspectRatio : 1.334\n\t},\n\t'ultra' :\n\t{\n\t\twidth       : { ideal: 3840 },\n\t\taspectRatio : 1.334\n\t}\n};\n\nconst PC_PROPRIETARY_CONSTRAINTS =\n{\n\toptional : [ { googDscp: true } ]\n};\n\nconst VIDEO_SIMULCAST_ENCODINGS =\n[\n\t{ scaleResolutionDownBy: 4 },\n\t{ scaleResolutionDownBy: 2 },\n\t{ scaleResolutionDownBy: 1 }\n];\n\n// Used for VP9 webcam video.\nconst VIDEO_KSVC_ENCODINGS =\n[\n\t{ scalabilityMode: 'S3T3_KEY' }\n];\n\n// Used for VP9 desktop sharing.\nconst VIDEO_SVC_ENCODINGS =\n[\n\t{ scalabilityMode: 'S3T3', dtx: true }\n];\n\nlet store;\n\nlet intl;\n\nexport default class RoomClient\n{\n\t/**\n\t * @param  {Object} data\n\t * @param  {Object} data.store - The Redux store.\n\t * @param  {Object} data.intl - react-intl object\n\t */\n\tstatic init(data)\n\t{\n\t\tstore = data.store;\n\t\tintl = data.intl;\n\t}\n\n\tconstructor(\n\t\t{\n\t\t\tpeerId,\n\t\t\taccessCode,\n\t\t\tdevice,\n\t\t\tproduce,\n\t\t\tforceTcp,\n\t\t\tdisplayName,\n\t\t\tmuted,\n\t\t\tbasePath\n\t\t} = {})\n\t{\n\t\tif (!peerId)\n\t\t\tthrow new Error('Missing peerId');\n\t\telse if (!device)\n\t\t\tthrow new Error('Missing device');\n\n\t\tlogger.debug(\n\t\t\t'constructor() [peerId: \"%s\", device: \"%s\", produce: \"%s\", forceTcp: \"%s\", displayName \"\"]',\n\t\t\tpeerId, device.flag, produce, forceTcp, displayName);\n\n\t\tthis._signalingUrl = null;\n\n\t\t// Closed flag.\n\t\tthis._closed = false;\n\n\t\t// Whether we should produce.\n\t\tthis._produce = produce;\n\n\t\t// Whether we force TCP\n\t\tthis._forceTcp = forceTcp;\n\n\t\t// URL basepath\n\t\tthis._basePath = basePath;\n\n\t\t// Use displayName\n\t\tif (displayName)\n\t\t\tstore.dispatch(settingsActions.setDisplayName(displayName));\n\n\t\tthis._tracker = 'wss://tracker.lab.vvc.niif.hu:443';\n\n\t\t// Torrent support\n\t\tthis._torrentSupport = null;\n\n\t\t// Whether simulcast should be used.\n\t\tthis._useSimulcast = false;\n\n\t\tif ('simulcast' in window.config)\n\t\t\tthis._useSimulcast = window.config.simulcast;\n\n\t\t// Whether simulcast should be used for sharing\n\t\tthis._useSharingSimulcast = false;\n\n\t\tif ('simulcastSharing' in window.config)\n\t\t\tthis._useSharingSimulcast = window.config.simulcastSharing;\n\n\t\tthis._muted = muted;\n\n\t\t// This device\n\t\tthis._device = device;\n\n\t\t// My peer name.\n\t\tthis._peerId = peerId;\n\n\t\t// Access code\n\t\tthis._accessCode = accessCode;\n\n\t\t// Alert sound\n\t\tthis._soundAlert = new Audio('/sounds/notify.mp3');\n\n\t\t// Socket.io peer connection\n\t\tthis._signalingSocket = null;\n\n\t\t// The room ID\n\t\tthis._roomId = null;\n\n\t\t// mediasoup-client Device instance.\n\t\t// @type {mediasoupClient.Device}\n\t\tthis._mediasoupDevice = null;\n\n\t\t// Put the browser info into state\n\t\tstore.dispatch(meActions.setBrowser(device));\n\n\t\t// Our WebTorrent client\n\t\tthis._webTorrent = null;\n\n\t\t// Max spotlights\n\t\tif (device.platform === 'desktop')\n\t\t\tthis._maxSpotlights = lastN;\n\t\telse\n\t\t\tthis._maxSpotlights = mobileLastN;\n\n\t\tstore.dispatch(\n\t\t\tsettingsActions.setLastN(this._maxSpotlights));\n\n\t\t// Manager of spotlight\n\t\tthis._spotlights = null;\n\n\t\t// Transport for sending.\n\t\tthis._sendTransport = null;\n\n\t\t// Transport for receiving.\n\t\tthis._recvTransport = null;\n\n\t\t// Local mic mediasoup Producer.\n\t\tthis._micProducer = null;\n\n\t\t// Local mic hark\n\t\tthis._hark = null;\n\n\t\t// Local MediaStream for hark\n\t\tthis._harkStream = null;\n\n\t\t// Local webcam mediasoup Producer.\n\t\tthis._webcamProducer = null;\n\n\t\t// Extra videos being produced\n\t\tthis._extraVideoProducers = new Map();\n\n\t\t// Map of webcam MediaDeviceInfos indexed by deviceId.\n\t\t// @type {Map<String, MediaDeviceInfos>}\n\t\tthis._webcams = {};\n\n\t\tthis._audioDevices = {};\n\n\t\tthis._audioOutputDevices = {};\n\n\t\t// mediasoup Consumers.\n\t\t// @type {Map<String, mediasoupClient.Consumer>}\n\t\tthis._consumers = new Map();\n\n\t\tthis._screenSharing = null;\n\n\t\tthis._screenSharingProducer = null;\n\n\t\tthis._startKeyListener();\n\n\t\tthis._startDevicesListener();\n\t}\n\n\tclose()\n\t{\n\t\tif (this._closed)\n\t\t\treturn;\n\n\t\tthis._closed = true;\n\n\t\tlogger.debug('close()');\n\n\t\tthis._signalingSocket.close();\n\n\t\t// Close mediasoup Transports.\n\t\tif (this._sendTransport)\n\t\t\tthis._sendTransport.close();\n\n\t\tif (this._recvTransport)\n\t\t\tthis._recvTransport.close();\n\n\t\tstore.dispatch(roomActions.setRoomState('closed'));\n\n\t\twindow.location = '/';\n\t}\n\n\t_startKeyListener()\n\t{\n\t\t// Add keydown event listener on document\n\t\tdocument.addEventListener('keydown', (event) =>\n\t\t{\n\t\t\tif (event.repeat) return;\n\t\t\tconst key = String.fromCharCode(event.which);\n\n\t\t\tconst source = event.target;\n\n\t\t\tconst exclude = [ 'input', 'textarea' ];\n\n\t\t\tif (exclude.indexOf(source.tagName.toLowerCase()) === -1)\n\t\t\t{\n\t\t\t\tlogger.debug('keyDown() [key:\"%s\"]', key);\n\n\t\t\t\tswitch (key)\n\t\t\t\t{\n\t\t\t\t\tcase String.fromCharCode(37):\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newPeerId = this._spotlights.getPrevAsSelected(\n\t\t\t\t\t\t\tstore.getState().room.selectedPeerId);\n\n\t\t\t\t\t\tif (newPeerId) this.setSelectedPeer(newPeerId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase String.fromCharCode(39):\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newPeerId = this._spotlights.getNextAsSelected(\n\t\t\t\t\t\t\tstore.getState().room.selectedPeerId);\n\n\t\t\t\t\t\tif (newPeerId) this.setSelectedPeer(newPeerId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'A': // Activate advanced mode\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(settingsActions.toggleAdvancedMode());\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.toggleAdvancedMode',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Toggled advanced mode'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase '1': // Set democratic view\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setDisplayMode('democratic'));\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.setDemocraticView',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Changed layout to democratic view'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase '2': // Set filmstrip view\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setDisplayMode('filmstrip'));\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.setFilmStripView',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Changed layout to filmstrip view'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase ' ': // Push To Talk start\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (this._micProducer.paused)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.unmuteMic();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'M': // Toggle microphone\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!this._micProducer.paused)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.muteMic();\n\n\t\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'devices.microphoneMute',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Muted your microphone'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.unmuteMic();\n\n\t\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'devices.microphoneUnMute',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Unmuted your microphone'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.updateMic({ start: true });\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'devices.microphoneEnable',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Enabled your microphone'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'V': // Toggle video\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._webcamProducer)\n\t\t\t\t\t\t\tthis.disableWebcam();\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthis.updateWebcam({ start: true });\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'H': // Open help dialog\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setHelpOpen(true));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tdocument.addEventListener('keyup', (event) =>\n\t\t{\n\t\t\tconst key = String.fromCharCode(event.which);\n\n\t\t\tconst source = event.target;\n\n\t\t\tconst exclude = [ 'input', 'textarea' ];\n\n\t\t\tif (exclude.indexOf(source.tagName.toLowerCase()) === -1)\n\t\t\t{\n\t\t\t\tlogger.debug('keyUp() [key:\"%s\"]', key);\n\n\t\t\t\tswitch (key)\n\t\t\t\t{\n\t\t\t\t\tcase ' ': // Push To Talk stop\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!this._micProducer.paused)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.muteMic();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t}, true);\n\n\t}\n\n\t_startDevicesListener()\n\t{\n\t\tnavigator.mediaDevices.addEventListener('devicechange', async () =>\n\t\t{\n\t\t\tlogger.debug('_startDevicesListener() | navigator.mediaDevices.ondevicechange');\n\n\t\t\tawait this._updateAudioDevices();\n\t\t\tawait this._updateWebcams();\n\t\t\tawait this._updateAudioOutputDevices();\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.devicesChanged',\n\t\t\t\t\t\tdefaultMessage : 'Your devices changed, configure your devices in the settings dialog'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t});\n\t}\n\n\tlogin(roomId = this._roomId)\n\t{\n\t\tconst url = `/auth/login?peerId=${this._peerId}&roomId=${roomId}`;\n\n\t\twindow.open(url, 'loginWindow');\n\t}\n\n\tlogout(roomId = this._roomId)\n\t{\n\t\twindow.open(`/auth/logout?peerId=${this._peerId}&roomId=${roomId}`, 'logoutWindow');\n\t}\n\n\treceiveLoginChildWindow(data)\n\t{\n\t\tlogger.debug('receiveFromChildWindow() | [data:\"%o\"]', data);\n\n\t\tconst { displayName, picture } = data;\n\n\t\tstore.dispatch(settingsActions.setDisplayName(displayName));\n\t\tstore.dispatch(meActions.setPicture(picture));\n\n\t\tstore.dispatch(meActions.loggedIn(true));\n\n\t\tstore.dispatch(requestActions.notify(\n\t\t\t{\n\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\tid             : 'room.loggedIn',\n\t\t\t\t\tdefaultMessage : 'You are logged in'\n\t\t\t\t})\n\t\t\t}));\n\t}\n\n\treceiveLogoutChildWindow()\n\t{\n\t\tlogger.debug('receiveLogoutChildWindow()');\n\n\t\tstore.dispatch(meActions.setPicture(null));\n\n\t\tstore.dispatch(meActions.loggedIn(false));\n\n\t\tstore.dispatch(requestActions.notify(\n\t\t\t{\n\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\tid             : 'room.loggedOut',\n\t\t\t\t\tdefaultMessage : 'You are logged out'\n\t\t\t\t})\n\t\t\t}));\n\t}\n\n\t_soundNotification()\n\t{\n\t\tconst { notificationSounds } = store.getState().settings;\n\n\t\tif (notificationSounds)\n\t\t{\n\t\t\tconst alertPromise = this._soundAlert.play();\n\n\t\t\tif (alertPromise !== undefined)\n\t\t\t{\n\t\t\t\talertPromise\n\t\t\t\t\t.then()\n\t\t\t\t\t.catch((error) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tlogger.error('_soundAlert.play() [error:\"%o\"]', error);\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\ttimeoutCallback(callback)\n\t{\n\t\tlet called = false;\n\n\t\tconst interval = setTimeout(\n\t\t\t() =>\n\t\t\t{\n\t\t\t\tif (called)\n\t\t\t\t\treturn;\n\t\t\t\tcalled = true;\n\t\t\t\tcallback(new SocketTimeoutError('Request timed out'));\n\t\t\t},\n\t\t\tROOM_OPTIONS.requestTimeout\n\t\t);\n\n\t\treturn (...args) =>\n\t\t{\n\t\t\tif (called)\n\t\t\t\treturn;\n\t\t\tcalled = true;\n\t\t\tclearTimeout(interval);\n\n\t\t\tcallback(...args);\n\t\t};\n\t}\n\n\t_sendRequest(method, data)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (!this._signalingSocket)\n\t\t\t{\n\t\t\t\treject('No socket connection');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._signalingSocket.emit(\n\t\t\t\t\t'request',\n\t\t\t\t\t{ method, data },\n\t\t\t\t\tthis.timeoutCallback((err, response) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (err)\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync getTransportStats()\n\t{\n\t\ttry\n\t\t{\n\t\t\tif (this._recvTransport)\n\t\t\t{\n\t\t\t\tlogger.debug('getTransportStats() - recv [transportId: \"%s\"]', this._recvTransport.id);\n\n\t\t\t\tconst recv = await this.sendRequest('getTransportStats', { transportId: this._recvTransport.id });\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\ttransportActions.addTransportStats(recv, 'recv'));\n\t\t\t}\n\n\t\t\tif (this._sendTransport)\n\t\t\t{\n\t\t\t\tlogger.debug('getTransportStats() - send [transportId: \"%s\"]', this._sendTransport.id);\n\n\t\t\t\tconst send = await this.sendRequest('getTransportStats', { transportId: this._sendTransport.id });\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\ttransportActions.addTransportStats(send, 'send'));\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('getTransportStats() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync sendRequest(method, data)\n\t{\n\t\tlogger.debug('sendRequest() [method:\"%s\", data:\"%o\"]', method, data);\n\n\t\tconst {\n\t\t\trequestRetries = 3\n\t\t} = window.config;\n\n\t\tfor (let tries = 0; tries < requestRetries; tries++)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\treturn await this._sendRequest(method, data);\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\terror instanceof SocketTimeoutError &&\n\t\t\t\t\ttries < requestRetries\n\t\t\t\t)\n\t\t\t\t\tlogger.warn('sendRequest() | timeout, retrying [attempt:\"%s\"]', tries);\n\t\t\t\telse\n\t\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync changeDisplayName(displayName)\n\t{\n\t\tlogger.debug('changeDisplayName() [displayName:\"%s\"]', displayName);\n\n\t\tif (!displayName)\n\t\t\tdisplayName = 'Guest';\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setDisplayNameInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('changeDisplayName', { displayName });\n\n\t\t\tstore.dispatch(settingsActions.setDisplayName(displayName));\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.changedDisplayName',\n\t\t\t\t\t\tdefaultMessage : 'Your display name changed to {displayName}'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tdisplayName\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('changeDisplayName() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.changeDisplayNameError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while changing your display name'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setDisplayNameInProgress(false));\n\t}\n\n\tasync changePicture(picture)\n\t{\n\t\tlogger.debug('changePicture() [picture: \"%s\"]', picture);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('changePicture', { picture });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('changePicture() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync sendChatMessage(chatMessage)\n\t{\n\t\tlogger.debug('sendChatMessage() [chatMessage:\"%s\"]', chatMessage);\n\n\t\ttry\n\t\t{\n\t\t\tstore.dispatch(\n\t\t\t\tchatActions.addUserMessage(chatMessage.text));\n\n\t\t\tawait this.sendRequest('chatMessage', { chatMessage });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('sendChatMessage() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.chatError',\n\t\t\t\t\t\tdefaultMessage : 'Unable to send chat message'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tsaveFile(file)\n\t{\n\t\tfile.getBlob((err, blob) =>\n\t\t{\n\t\t\tif (err)\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.saveFileError',\n\t\t\t\t\t\t\tdefaultMessage : 'Unable to save file'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsaveAs(blob, file.name);\n\t\t});\n\t}\n\n\thandleDownload(magnetUri)\n\t{\n\t\tstore.dispatch(\n\t\t\tfileActions.setFileActive(magnetUri));\n\n\t\tconst existingTorrent = this._webTorrent.get(magnetUri);\n\n\t\tif (existingTorrent)\n\t\t{\n\t\t\t// Never add duplicate torrents, use the existing one instead.\n\t\t\tthis._handleTorrent(existingTorrent);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._webTorrent.add(magnetUri, this._handleTorrent);\n\t}\n\n\t_handleTorrent(torrent)\n\t{\n\t\t// Torrent already done, this can happen if the\n\t\t// same file was sent multiple times.\n\t\tif (torrent.progress === 1)\n\t\t{\n\t\t\tstore.dispatch(\n\t\t\t\tfileActions.setFileDone(\n\t\t\t\t\ttorrent.magnetURI,\n\t\t\t\t\ttorrent.files\n\t\t\t\t));\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet lastMove = 0;\n\n\t\ttorrent.on('download', () =>\n\t\t{\n\t\t\tif (Date.now() - lastMove > 1000)\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tfileActions.setFileProgress(\n\t\t\t\t\t\ttorrent.magnetURI,\n\t\t\t\t\t\ttorrent.progress\n\t\t\t\t\t));\n\n\t\t\t\tlastMove = Date.now();\n\t\t\t}\n\t\t});\n\n\t\ttorrent.on('done', () =>\n\t\t{\n\t\t\tstore.dispatch(\n\t\t\t\tfileActions.setFileDone(\n\t\t\t\t\ttorrent.magnetURI,\n\t\t\t\t\ttorrent.files\n\t\t\t\t));\n\t\t});\n\t}\n\n\tasync shareFiles(files)\n\t{\n\t\tstore.dispatch(requestActions.notify(\n\t\t\t{\n\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\tid             : 'filesharing.startingFileShare',\n\t\t\t\t\tdefaultMessage : 'Attempting to share file'\n\t\t\t\t})\n\t\t\t}));\n\n\t\tcreateTorrent(files, (err, torrent) =>\n\t\t{\n\t\t\tif (err)\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.unableToShare',\n\t\t\t\t\t\t\tdefaultMessage : 'Unable to share file'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst existingTorrent = this._webTorrent.get(torrent);\n\n\t\t\tif (existingTorrent)\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.successfulFileShare',\n\t\t\t\t\t\t\tdefaultMessage : 'File successfully shared'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\tstore.dispatch(fileActions.addFile(\n\t\t\t\t\tthis._peerId,\n\t\t\t\t\texistingTorrent.magnetURI\n\t\t\t\t));\n\n\t\t\t\tthis._sendFile(existingTorrent.magnetURI);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._webTorrent.seed(\n\t\t\t\tfiles,\n\t\t\t\t{ announceList: [ [ this._tracker ] ] },\n\t\t\t\t(newTorrent) =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'filesharing.successfulFileShare',\n\t\t\t\t\t\t\t\tdefaultMessage : 'File successfully shared'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tstore.dispatch(fileActions.addFile(\n\t\t\t\t\t\tthis._peerId,\n\t\t\t\t\t\tnewTorrent.magnetURI\n\t\t\t\t\t));\n\n\t\t\t\t\tthis._sendFile(newTorrent.magnetURI);\n\t\t\t\t});\n\t\t});\n\t}\n\n\t// { file, name, picture }\n\tasync _sendFile(magnetUri)\n\t{\n\t\tlogger.debug('sendFile() [magnetUri:\"%o\"]', magnetUri);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('sendFile', { magnetUri });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('sendFile() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'filesharing.unableToShare',\n\t\t\t\t\t\tdefaultMessage : 'Unable to share file'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync muteMic()\n\t{\n\t\tlogger.debug('muteMic()');\n\n\t\tthis._micProducer.pause();\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'pauseProducer', { producerId: this._micProducer.id });\n\n\t\t\tstore.dispatch(\n\t\t\t\tproducerActions.setProducerPaused(this._micProducer.id));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('muteMic() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.microphoneMuteError',\n\t\t\t\t\t\tdefaultMessage : 'Unable to mute your microphone'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync unmuteMic()\n\t{\n\t\tlogger.debug('unmuteMic()');\n\n\t\tif (!this._micProducer)\n\t\t{\n\t\t\tthis.updateMic({ start: true });\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._micProducer.resume();\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tawait this.sendRequest(\n\t\t\t\t\t'resumeProducer', { producerId: this._micProducer.id });\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.setProducerResumed(this._micProducer.id));\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tlogger.error('unmuteMic() [error:\"%o\"]', error);\n\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'devices.microphoneUnMuteError',\n\t\t\t\t\t\t\tdefaultMessage : 'Unable to unmute your microphone'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t}\n\n\tchangeMaxSpotlights(maxSpotlights)\n\t{\n\t\tthis._spotlights.maxSpotlights = maxSpotlights;\n\n\t\tstore.dispatch(\n\t\t\tsettingsActions.setLastN(maxSpotlights));\n\t}\n\n\t// Updated consumers based on spotlights\n\tasync updateSpotlights(spotlights)\n\t{\n\t\tlogger.debug('updateSpotlights()');\n\n\t\ttry\n\t\t{\n\t\t\tfor (const consumer of this._consumers.values())\n\t\t\t{\n\t\t\t\tif (consumer.kind === 'video')\n\t\t\t\t{\n\t\t\t\t\tif (spotlights.includes(consumer.appData.peerId))\n\t\t\t\t\t\tawait this._resumeConsumer(consumer);\n\t\t\t\t\telse\n\t\t\t\t\t\tawait this._pauseConsumer(consumer);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateSpotlights() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tdisconnectLocalHark()\n\t{\n\t\tlogger.debug('disconnectLocalHark()');\n\n\t\tif (this._harkStream != null)\n\t\t{\n\t\t\tlet [ track ] = this._harkStream.getAudioTracks();\n\n\t\t\ttrack.stop();\n\t\t\ttrack = null;\n\n\t\t\tthis._harkStream = null;\n\t\t}\n\n\t\tif (this._hark != null)\n\t\t\tthis._hark.stop();\n\t}\n\n\tconnectLocalHark(track)\n\t{\n\t\tlogger.debug('connectLocalHark() [track:\"%o\"]', track);\n\n\t\tthis._harkStream = new MediaStream();\n\n\t\tconst newTrack = track.clone();\n\n\t\tthis._harkStream.addTrack(newTrack);\n\n\t\tnewTrack.enabled = true;\n\n\t\tthis._hark = hark(this._harkStream,\n\t\t\t{\n\t\t\t\tplay      : false,\n\t\t\t\tinterval  : 10,\n\t\t\t\tthreshold : store.getState().settings.noiseThreshold,\n\t\t\t\thistory   : 100\n\t\t\t});\n\n\t\tthis._hark.lastVolume = -100;\n\n\t\tthis._hark.on('volume_change', (volume) =>\n\t\t{\n\t\t\tvolume = Math.round(volume);\n\n\t\t\tif (this._micProducer && (volume !== Math.round(this._hark.lastVolume)))\n\t\t\t{\n\t\t\t\tif (volume < this._hark.lastVolume)\n\t\t\t\t{\n\t\t\t\t\tvolume =\n\t\t\t\t\t\tthis._hark.lastVolume -\n\t\t\t\t\t\tMath.pow(\n\t\t\t\t\t\t\t(volume - this._hark.lastVolume) /\n\t\t\t\t\t\t\t(100 + this._hark.lastVolume)\n\t\t\t\t\t\t\t, 4\n\t\t\t\t\t\t) * 2;\n\t\t\t\t}\n\n\t\t\t\tthis._hark.lastVolume = volume;\n\n\t\t\t\tstore.dispatch(peerVolumeActions.setPeerVolume(this._peerId, volume));\n\t\t\t}\n\t\t});\n\n\t\tthis._hark.on('speaking', () =>\n\t\t{\n\t\t\tstore.dispatch(meActions.setIsSpeaking(true));\n\n\t\t\tif (\n\t\t\t\t(store.getState().settings.voiceActivatedUnmute ||\n\t\t\t\tstore.getState().me.isAutoMuted) &&\n\t\t\t\tthis._micProducer &&\n\t\t\t\tthis._micProducer.paused\n\t\t\t)\n\t\t\t\tthis._micProducer.resume();\n\n\t\t\tstore.dispatch(meActions.setAutoMuted(false)); // sanity action\n\t\t});\n\n\t\tthis._hark.on('stopped_speaking', () =>\n\t\t{\n\t\t\tstore.dispatch(meActions.setIsSpeaking(false));\n\n\t\t\tif (\n\t\t\t\tstore.getState().settings.voiceActivatedUnmute &&\n\t\t\t\tthis._micProducer &&\n\t\t\t\t!this._micProducer.paused\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis._micProducer.pause();\n\n\t\t\t\tstore.dispatch(meActions.setAutoMuted(true));\n\t\t\t}\n\t\t});\n\t}\n\n\tasync changeAudioOutputDevice(deviceId)\n\t{\n\t\tlogger.debug('changeAudioOutputDevice() [deviceId:\"%s\"]', deviceId);\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setAudioOutputInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tconst device = this._audioOutputDevices[deviceId];\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('Selected audio output device no longer available');\n\n\t\t\tstore.dispatch(settingsActions.setSelectedAudioOutputDevice(deviceId));\n\n\t\t\tawait this._updateAudioOutputDevices();\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('changeAudioOutputDevice() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setAudioOutputInProgress(false));\n\t}\n\n\tasync updateMic({ start = false, restart = false, newDeviceId = null } = {})\n\t{\n\t\tlogger.debug(\n\t\t\t'updateMic() [start:\"%s\", restart:\"%s\", newDeviceId:\"%s\"]',\n\t\t\tstart,\n\t\t\trestart,\n\t\t\tnewDeviceId\n\t\t);\n\n\t\tlet track;\n\n\t\ttry\n\t\t{\n\t\t\tif (!this._mediasoupDevice.canProduce('audio'))\n\t\t\t\tthrow new Error('cannot produce audio');\n\n\t\t\tif (newDeviceId && !restart)\n\t\t\t\tthrow new Error('changing device requires restart');\n\n\t\t\tif (newDeviceId)\n\t\t\t\tstore.dispatch(settingsActions.setSelectedAudioDevice(newDeviceId));\n\n\t\t\tstore.dispatch(meActions.setAudioInProgress(true));\n\n\t\t\tconst deviceId = await this._getAudioDeviceId();\n\t\t\tconst device = this._audioDevices[deviceId];\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('no audio devices');\n\n\t\t\tconst {\n\t\t\t\tsampleRate,\n\t\t\t\tchannelCount,\n\t\t\t\tvolume,\n\t\t\t\tautoGainControl,\n\t\t\t\techoCancellation,\n\t\t\t\tnoiseSuppression,\n\t\t\t\tsampleSize\n\t\t\t} = store.getState().settings;\n\n\t\t\tif (\n\t\t\t\t(restart && this._micProducer) ||\n\t\t\t\tstart\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.disconnectLocalHark();\n\n\t\t\t\tif (this._micProducer)\n\t\t\t\t\tawait this.disableMic();\n\n\t\t\t\tconst stream = await navigator.mediaDevices.getUserMedia(\n\t\t\t\t\t{\n\t\t\t\t\t\taudio : {\n\t\t\t\t\t\t\tdeviceId : { ideal: deviceId },\n\t\t\t\t\t\t\tsampleRate,\n\t\t\t\t\t\t\tchannelCount,\n\t\t\t\t\t\t\tvolume,\n\t\t\t\t\t\t\tautoGainControl,\n\t\t\t\t\t\t\techoCancellation,\n\t\t\t\t\t\t\tnoiseSuppression,\n\t\t\t\t\t\t\tsampleSize\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t([ track ] = stream.getAudioTracks());\n\n\t\t\t\tconst { deviceId: trackDeviceId } = track.getSettings();\n\n\t\t\t\tstore.dispatch(settingsActions.setSelectedAudioDevice(trackDeviceId));\n\n\t\t\t\tthis._micProducer = await this._sendTransport.produce(\n\t\t\t\t\t{\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\topusStereo          : false,\n\t\t\t\t\t\t\topusDtx             : true,\n\t\t\t\t\t\t\topusFec             : true,\n\t\t\t\t\t\t\topusPtime           : '3',\n\t\t\t\t\t\t\topusMaxPlaybackRate\t: 48000\n\t\t\t\t\t\t},\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{ source: 'mic' }\n\t\t\t\t\t});\n\n\t\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t\t{\n\t\t\t\t\t\tid            : this._micProducer.id,\n\t\t\t\t\t\tsource        : 'mic',\n\t\t\t\t\t\tpaused        : this._micProducer.paused,\n\t\t\t\t\t\ttrack         : this._micProducer.track,\n\t\t\t\t\t\trtpParameters : this._micProducer.rtpParameters,\n\t\t\t\t\t\tcodec         : this._micProducer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t\t}));\n\n\t\t\t\tthis._micProducer.on('transportclose', () =>\n\t\t\t\t{\n\t\t\t\t\tthis._micProducer = null;\n\t\t\t\t});\n\n\t\t\t\tthis._micProducer.on('trackended', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'devices.microphoneDisconnected',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Microphone disconnected'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tthis.disableMic();\n\t\t\t\t});\n\n\t\t\t\tthis._micProducer.volume = 0;\n\n\t\t\t\tthis.connectLocalHark(track);\n\t\t\t}\n\t\t\telse if (this._micProducer)\n\t\t\t{\n\t\t\t\t({ track } = this._micProducer);\n\n\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t{\n\t\t\t\t\t\tsampleRate,\n\t\t\t\t\t\tchannelCount,\n\t\t\t\t\t\tvolume,\n\t\t\t\t\t\tautoGainControl,\n\t\t\t\t\t\techoCancellation,\n\t\t\t\t\t\tnoiseSuppression,\n\t\t\t\t\t\tsampleSize\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tif (this._harkStream != null)\n\t\t\t\t{\n\t\t\t\t\tconst [ harkTrack ] = this._harkStream.getAudioTracks();\n\n\t\t\t\t\tharkTrack && await harkTrack.applyConstraints(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsampleRate,\n\t\t\t\t\t\t\tchannelCount,\n\t\t\t\t\t\t\tvolume,\n\t\t\t\t\t\t\tautoGainControl,\n\t\t\t\t\t\t\techoCancellation,\n\t\t\t\t\t\t\tnoiseSuppression,\n\t\t\t\t\t\t\tsampleSize\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateMic() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.microphoneError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your microphone'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(meActions.setAudioInProgress(false));\n\t}\n\n\tasync updateWebcam({\n\t\tstart = false,\n\t\trestart = false,\n\t\tnewDeviceId = null,\n\t\tnewResolution = null,\n\t\tnewFrameRate = null\n\t} = {})\n\t{\n\t\tlogger.debug(\n\t\t\t'updateWebcam() [start:\"%s\", restart:\"%s\", newDeviceId:\"%s\", newResolution:\"%s\", newFrameRate:\"%s\"]',\n\t\t\tstart,\n\t\t\trestart,\n\t\t\tnewDeviceId,\n\t\t\tnewResolution,\n\t\t\tnewFrameRate\n\t\t);\n\n\t\tlet track;\n\n\t\ttry\n\t\t{\n\t\t\tif (!this._mediasoupDevice.canProduce('video'))\n\t\t\t\tthrow new Error('cannot produce video');\n\n\t\t\tif (newDeviceId && !restart)\n\t\t\t\tthrow new Error('changing device requires restart');\n\n\t\t\tif (newDeviceId)\n\t\t\t\tstore.dispatch(settingsActions.setSelectedWebcamDevice(newDeviceId));\n\n\t\t\tif (newResolution)\n\t\t\t\tstore.dispatch(settingsActions.setVideoResolution(newResolution));\n\n\t\t\tif (newFrameRate)\n\t\t\t\tstore.dispatch(settingsActions.setVideoFrameRate(newFrameRate));\n\n\t\t\tstore.dispatch(meActions.setWebcamInProgress(true));\n\n\t\t\tconst deviceId = await this._getWebcamDeviceId();\n\t\t\tconst device = this._webcams[deviceId];\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('no webcam devices');\n\n\t\t\tconst {\n\t\t\t\tresolution,\n\t\t\t\tframeRate\n\t\t\t} = store.getState().settings;\n\n\t\t\tif (\n\t\t\t\t(restart && this._webcamProducer) ||\n\t\t\t\tstart\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (this._webcamProducer)\n\t\t\t\t\tawait this.disableWebcam();\n\n\t\t\t\tconst stream = await navigator.mediaDevices.getUserMedia(\n\t\t\t\t\t{\n\t\t\t\t\t\tvideo :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdeviceId : { ideal: deviceId },\n\t\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution],\n\t\t\t\t\t\t\tframeRate\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t([ track ] = stream.getVideoTracks());\n\n\t\t\t\tconst { deviceId: trackDeviceId } = track.getSettings();\n\n\t\t\t\tstore.dispatch(settingsActions.setSelectedWebcamDevice(trackDeviceId));\n\n\t\t\t\tif (this._useSimulcast)\n\t\t\t\t{\n\t\t\t\t\t// If VP9 is the only available video codec then use SVC.\n\t\t\t\t\tconst firstVideoCodec = this._mediasoupDevice\n\t\t\t\t\t\t.rtpCapabilities\n\t\t\t\t\t\t.codecs\n\t\t\t\t\t\t.find((c) => c.kind === 'video');\n\n\t\t\t\t\tlet encodings;\n\n\t\t\t\t\tif (firstVideoCodec.mimeType.toLowerCase() === 'video/vp9')\n\t\t\t\t\t\tencodings = VIDEO_KSVC_ENCODINGS;\n\t\t\t\t\telse if ('simulcastEncodings' in window.config)\n\t\t\t\t\t\tencodings = window.config.simulcastEncodings;\n\t\t\t\t\telse\n\t\t\t\t\t\tencodings = VIDEO_SIMULCAST_ENCODINGS;\n\n\t\t\t\t\tthis._webcamProducer = await this._sendTransport.produce(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttrack,\n\t\t\t\t\t\t\tencodings,\n\t\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvideoGoogleStartBitrate : 1000\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tappData :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource : 'webcam'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis._webcamProducer = await this._sendTransport.produce({\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource : 'webcam'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t\t{\n\t\t\t\t\t\tid            : this._webcamProducer.id,\n\t\t\t\t\t\tsource        : 'webcam',\n\t\t\t\t\t\tpaused        : this._webcamProducer.paused,\n\t\t\t\t\t\ttrack         : this._webcamProducer.track,\n\t\t\t\t\t\trtpParameters : this._webcamProducer.rtpParameters,\n\t\t\t\t\t\tcodec         : this._webcamProducer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t\t}));\n\n\t\t\t\tthis._webcamProducer.on('transportclose', () =>\n\t\t\t\t{\n\t\t\t\t\tthis._webcamProducer = null;\n\t\t\t\t});\n\n\t\t\t\tthis._webcamProducer.on('trackended', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'devices.cameraDisconnected',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Camera disconnected'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tthis.disableWebcam();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (this._webcamProducer)\n\t\t\t{\n\t\t\t\t({ track } = this._webcamProducer);\n\n\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t{\n\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution],\n\t\t\t\t\t\tframeRate\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t// Also change resolution of extra video producers\n\t\t\t\tfor (const producer of this._extraVideoProducers.values())\n\t\t\t\t{\n\t\t\t\t\t({ track } = producer);\n\n\t\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution],\n\t\t\t\t\t\t\tframeRate\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateWebcam() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.cameraError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your camera'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setWebcamInProgress(false));\n\t}\n\n\tsetSelectedPeer(peerId)\n\t{\n\t\tlogger.debug('setSelectedPeer() [peerId:\"%s\"]', peerId);\n\n\t\tthis._spotlights.setPeerSpotlight(peerId);\n\n\t\tstore.dispatch(\n\t\t\troomActions.setSelectedPeer(peerId));\n\t}\n\n\tasync promoteAllLobbyPeers()\n\t{\n\t\tlogger.debug('promoteAllLobbyPeers()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setLobbyPeersPromotionInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('promoteAllPeers');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('promoteAllLobbyPeers() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setLobbyPeersPromotionInProgress(false));\n\t}\n\n\tasync promoteLobbyPeer(peerId)\n\t{\n\t\tlogger.debug('promoteLobbyPeer() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tlobbyPeerActions.setLobbyPeerPromotionInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('promotePeer', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('promoteLobbyPeer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tlobbyPeerActions.setLobbyPeerPromotionInProgress(peerId, false));\n\t}\n\n\tasync clearChat()\n\t{\n\t\tlogger.debug('clearChat()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearChatInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:clearChat');\n\n\t\t\tstore.dispatch(chatActions.clearChat());\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('clearChat() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearChatInProgress(false));\n\t}\n\n\tasync clearFileSharing()\n\t{\n\t\tlogger.debug('clearFileSharing()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearFileSharingInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:clearFileSharing');\n\n\t\t\tstore.dispatch(fileActions.clearFiles());\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('clearFileSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setClearFileSharingInProgress(false));\n\t}\n\n\tasync kickPeer(peerId)\n\t{\n\t\tlogger.debug('kickPeer() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerKickInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:kickPeer', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('kickPeer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerKickInProgress(peerId, false));\n\t}\n\n\tasync mutePeer(peerId)\n\t{\n\t\tlogger.debug('mutePeer() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setMutePeerInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:mute', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('mutePeer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setMutePeerInProgress(peerId, false));\n\t}\n\n\tasync stopPeerVideo(peerId)\n\t{\n\t\tlogger.debug('stopPeerVideo() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerVideoInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopVideo', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopPeerVideo() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerVideoInProgress(peerId, false));\n\t}\n\n\tasync stopPeerScreenSharing(peerId)\n\t{\n\t\tlogger.debug('stopPeerScreenSharing() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerScreenSharingInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopScreenSharing', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopPeerScreenSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setStopPeerScreenSharingInProgress(peerId, false));\n\t}\n\n\tasync muteAllPeers()\n\t{\n\t\tlogger.debug('muteAllPeers()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setMuteAllInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:muteAll');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('muteAllPeers() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setMuteAllInProgress(false));\n\t}\n\n\tasync stopAllPeerVideo()\n\t{\n\t\tlogger.debug('stopAllPeerVideo()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllVideoInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopAllVideo');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopAllPeerVideo() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllVideoInProgress(false));\n\t}\n\n\tasync stopAllPeerScreenSharing()\n\t{\n\t\tlogger.debug('stopAllPeerScreenSharing()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllScreenSharingInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:stopAllScreenSharing');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('stopAllPeerScreenSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setStopAllScreenSharingInProgress(false));\n\t}\n\n\tasync closeMeeting()\n\t{\n\t\tlogger.debug('closeMeeting()');\n\n\t\tstore.dispatch(\n\t\t\troomActions.setCloseMeetingInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:closeMeeting');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('closeMeeting() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\troomActions.setCloseMeetingInProgress(false));\n\t}\n\n\t// type: mic/webcam/screen\n\t// mute: true/false\n\tasync modifyPeerConsumer(peerId, type, mute)\n\t{\n\t\tlogger.debug(\n\t\t\t'modifyPeerConsumer() [peerId:\"%s\", type:\"%s\"]',\n\t\t\tpeerId,\n\t\t\ttype\n\t\t);\n\n\t\tif (type === 'mic')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerAudioInProgress(peerId, true));\n\t\telse if (type === 'webcam')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerVideoInProgress(peerId, true));\n\t\telse if (type === 'screen')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerScreenInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tfor (const consumer of this._consumers.values())\n\t\t\t{\n\t\t\t\tif (consumer.appData.peerId === peerId && consumer.appData.source === type)\n\t\t\t\t{\n\t\t\t\t\tif (mute)\n\t\t\t\t\t\tawait this._pauseConsumer(consumer);\n\t\t\t\t\telse\n\t\t\t\t\t\tawait this._resumeConsumer(consumer);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('modifyPeerConsumer() [error:\"%o\"]', error);\n\t\t}\n\n\t\tif (type === 'mic')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerAudioInProgress(peerId, false));\n\t\telse if (type === 'webcam')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerVideoInProgress(peerId, false));\n\t\telse if (type === 'screen')\n\t\t\tstore.dispatch(\n\t\t\t\tpeerActions.setPeerScreenInProgress(peerId, false));\n\t}\n\n\tasync _pauseConsumer(consumer)\n\t{\n\t\tlogger.debug('_pauseConsumer() [consumer:\"%o\"]', consumer);\n\n\t\tif (consumer.paused || consumer.closed)\n\t\t\treturn;\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('pauseConsumer', { consumerId: consumer.id });\n\n\t\t\tconsumer.pause();\n\n\t\t\tstore.dispatch(\n\t\t\t\tconsumerActions.setConsumerPaused(consumer.id, 'local'));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_pauseConsumer() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _resumeConsumer(consumer)\n\t{\n\t\tlogger.debug('_resumeConsumer() [consumer:\"%o\"]', consumer);\n\n\t\tif (!consumer.paused || consumer.closed)\n\t\t\treturn;\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('resumeConsumer', { consumerId: consumer.id });\n\n\t\t\tconsumer.resume();\n\n\t\t\tstore.dispatch(\n\t\t\t\tconsumerActions.setConsumerResumed(consumer.id, 'local'));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_resumeConsumer() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync lowerPeerHand(peerId)\n\t{\n\t\tlogger.debug('lowerPeerHand() [peerId:\"%s\"]', peerId);\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerRaisedHandInProgress(peerId, true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('moderator:lowerHand', { peerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('lowerPeerHand() [error:\"%o\"]', error);\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tpeerActions.setPeerRaisedHandInProgress(peerId, false));\n\t}\n\n\tasync setRaisedHand(raisedHand)\n\t{\n\t\tlogger.debug('setRaisedHand: ', raisedHand);\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setRaisedHandInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('raisedHand', { raisedHand });\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setRaisedHand(raisedHand));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setRaisedHand() [error:\"%o\"]', error);\n\n\t\t\t// We need to refresh the component for it to render changed state\n\t\t\tstore.dispatch(meActions.setRaisedHand(!raisedHand));\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setRaisedHandInProgress(false));\n\t}\n\n\tasync setMaxSendingSpatialLayer(spatialLayer)\n\t{\n\t\tlogger.debug('setMaxSendingSpatialLayer() [spatialLayer:\"%s\"]', spatialLayer);\n\n\t\ttry\n\t\t{\n\t\t\tif (this._webcamProducer)\n\t\t\t\tawait this._webcamProducer.setMaxSpatialLayer(spatialLayer);\n\t\t\tif (this._screenSharingProducer)\n\t\t\t\tawait this._screenSharingProducer.setMaxSpatialLayer(spatialLayer);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setMaxSendingSpatialLayer() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync setConsumerPreferredLayers(consumerId, spatialLayer, temporalLayer)\n\t{\n\t\tlogger.debug(\n\t\t\t'setConsumerPreferredLayers() [consumerId:\"%s\", spatialLayer:\"%s\", temporalLayer:\"%s\"]',\n\t\t\tconsumerId, spatialLayer, temporalLayer);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'setConsumerPreferedLayers', { consumerId, spatialLayer, temporalLayer });\n\n\t\t\tstore.dispatch(consumerActions.setConsumerPreferredLayers(\n\t\t\t\tconsumerId, spatialLayer, temporalLayer));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setConsumerPreferredLayers() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync setConsumerPriority(consumerId, priority)\n\t{\n\t\tlogger.debug(\n\t\t\t'setConsumerPriority() [consumerId:\"%s\", priority:%d]',\n\t\t\tconsumerId, priority);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('setConsumerPriority', { consumerId, priority });\n\n\t\t\tstore.dispatch(consumerActions.setConsumerPriority(consumerId, priority));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setConsumerPriority() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync requestConsumerKeyFrame(consumerId)\n\t{\n\t\tlogger.debug('requestConsumerKeyFrame() [consumerId:\"%s\"]', consumerId);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('requestConsumerKeyFrame', { consumerId });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('requestConsumerKeyFrame() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _loadDynamicImports()\n\t{\n\t\t({ default: createTorrent } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"createtorrent\" */\n\t\t\t'create-torrent'\n\t\t));\n\n\t\t({ default: WebTorrent } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"webtorrent\" */\n\t\t\t'webtorrent'\n\t\t));\n\n\t\t({ default: saveAs } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"file-saver\" */\n\t\t\t'file-saver'\n\t\t));\n\n\t\t({ default: ScreenShare } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"screensharing\" */\n\t\t\t'./ScreenShare'\n\t\t));\n\n\t\t({ default: Spotlights } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"spotlights\" */\n\t\t\t'./Spotlights'\n\t\t));\n\n\t\tmediasoupClient = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"mediasoup\" */\n\t\t\t'mediasoup-client'\n\t\t);\n\n\t\t({ default: io } = await import(\n\n\t\t\t/* webpackPrefetch: true */\n\t\t\t/* webpackChunkName: \"socket.io\" */\n\t\t\t'socket.io-client'\n\t\t));\n\t}\n\n\tasync join({ roomId, joinVideo })\n\t{\n\t\tawait this._loadDynamicImports();\n\n\t\tthis._roomId = roomId;\n\n\t\tstore.dispatch(roomActions.setRoomName(roomId));\n\n\t\tthis._signalingUrl = getSignalingUrl(this._peerId, roomId);\n\n\t\tthis._screenSharing = ScreenShare.create(this._device);\n\n\t\tthis._signalingSocket = io(this._signalingUrl);\n\n\t\tthis._spotlights = new Spotlights(this._maxSpotlights, this._signalingSocket);\n\n\t\tstore.dispatch(roomActions.setRoomState('connecting'));\n\n\t\tthis._signalingSocket.on('connect', () =>\n\t\t{\n\t\t\tlogger.debug('signaling Peer \"connect\" event');\n\t\t});\n\n\t\tthis._signalingSocket.on('disconnect', (reason) =>\n\t\t{\n\t\t\tlogger.warn('signaling Peer \"disconnect\" event [reason:\"%s\"]', reason);\n\n\t\t\tif (this._closed)\n\t\t\t\treturn;\n\n\t\t\tif (reason === 'io server disconnect')\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'socket.disconnected',\n\t\t\t\t\t\t\tdefaultMessage : 'You are disconnected'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\tthis.close();\n\t\t\t}\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'socket.reconnecting',\n\t\t\t\t\t\tdefaultMessage : 'You are disconnected, attempting to reconnect'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (this._screenSharingProducer)\n\t\t\t{\n\t\t\t\tthis._screenSharingProducer.close();\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.removeProducer(this._screenSharingProducer.id));\n\n\t\t\t\tthis._screenSharingProducer = null;\n\t\t\t}\n\n\t\t\tif (this._webcamProducer)\n\t\t\t{\n\t\t\t\tthis._webcamProducer.close();\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.removeProducer(this._webcamProducer.id));\n\n\t\t\t\tthis._webcamProducer = null;\n\t\t\t}\n\n\t\t\tif (this._micProducer)\n\t\t\t{\n\t\t\t\tthis._micProducer.close();\n\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tproducerActions.removeProducer(this._micProducer.id));\n\n\t\t\t\tthis._micProducer = null;\n\t\t\t}\n\n\t\t\tif (this._sendTransport)\n\t\t\t{\n\t\t\t\tthis._sendTransport.close();\n\n\t\t\t\tthis._sendTransport = null;\n\t\t\t}\n\n\t\t\tif (this._recvTransport)\n\t\t\t{\n\t\t\t\tthis._recvTransport.close();\n\n\t\t\t\tthis._recvTransport = null;\n\t\t\t}\n\n\t\t\tthis._spotlights.clearSpotlights();\n\n\t\t\tstore.dispatch(peerActions.clearPeers());\n\t\t\tstore.dispatch(consumerActions.clearConsumers());\n\t\t\tstore.dispatch(roomActions.clearSpotlights());\n\t\t\tstore.dispatch(roomActions.setRoomState('connecting'));\n\t\t});\n\n\t\tthis._signalingSocket.on('reconnect_failed', () =>\n\t\t{\n\t\t\tlogger.warn('signaling Peer \"reconnect_failed\" event');\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'socket.disconnected',\n\t\t\t\t\t\tdefaultMessage : 'You are disconnected'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tthis.close();\n\t\t});\n\n\t\tthis._signalingSocket.on('reconnect', (attemptNumber) =>\n\t\t{\n\t\t\tlogger.debug('signaling Peer \"reconnect\" event [attempts:\"%s\"]', attemptNumber);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'socket.reconnected',\n\t\t\t\t\t\tdefaultMessage : 'You are reconnected'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tstore.dispatch(roomActions.setRoomState('connected'));\n\t\t});\n\n\t\tthis._signalingSocket.on('request', async (request, cb) =>\n\t\t{\n\t\t\tlogger.debug(\n\t\t\t\t'socket \"request\" event [method:\"%s\", data:\"%o\"]',\n\t\t\t\trequest.method, request.data);\n\n\t\t\tswitch (request.method)\n\t\t\t{\n\t\t\t\tcase 'newConsumer':\n\t\t\t\t{\n\t\t\t\t\tconst {\n\t\t\t\t\t\tpeerId,\n\t\t\t\t\t\tproducerId,\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tkind,\n\t\t\t\t\t\trtpParameters,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tappData,\n\t\t\t\t\t\tproducerPaused\n\t\t\t\t\t} = request.data;\n\n\t\t\t\t\tconst consumer = await this._recvTransport.consume(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tproducerId,\n\t\t\t\t\t\t\tkind,\n\t\t\t\t\t\t\trtpParameters,\n\t\t\t\t\t\t\tappData : { ...appData, peerId } // Trick.\n\t\t\t\t\t\t});\n\n\t\t\t\t\t// Store in the map.\n\t\t\t\t\tthis._consumers.set(consumer.id, consumer);\n\n\t\t\t\t\tconsumer.on('transportclose', () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis._consumers.delete(consumer.id);\n\t\t\t\t\t});\n\n\t\t\t\t\tconst { spatialLayers, temporalLayers } =\n\t\t\t\t\t\tmediasoupClient.parseScalabilityMode(\n\t\t\t\t\t\t\tconsumer.rtpParameters.encodings[0].scalabilityMode);\n\n\t\t\t\t\tstore.dispatch(consumerActions.addConsumer(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid                     : consumer.id,\n\t\t\t\t\t\t\tpeerId                 : peerId,\n\t\t\t\t\t\t\tkind                   : kind,\n\t\t\t\t\t\t\ttype                   : type,\n\t\t\t\t\t\t\tlocallyPaused          : false,\n\t\t\t\t\t\t\tremotelyPaused         : producerPaused,\n\t\t\t\t\t\t\trtpParameters          : consumer.rtpParameters,\n\t\t\t\t\t\t\tsource                 : consumer.appData.source,\n\t\t\t\t\t\t\tspatialLayers          : spatialLayers,\n\t\t\t\t\t\t\ttemporalLayers         : temporalLayers,\n\t\t\t\t\t\t\tpreferredSpatialLayer  : spatialLayers - 1,\n\t\t\t\t\t\t\tpreferredTemporalLayer : temporalLayers - 1,\n\t\t\t\t\t\t\tpriority               : 1,\n\t\t\t\t\t\t\tcodec                  : consumer.rtpParameters.codecs[0].mimeType.split('/')[1],\n\t\t\t\t\t\t\ttrack                  : consumer.track\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpeerId));\n\n\t\t\t\t\t// We are ready. Answer the request so the server will\n\t\t\t\t\t// resume this Consumer (which was paused for now).\n\t\t\t\t\tcb(null);\n\n\t\t\t\t\tif (kind === 'audio')\n\t\t\t\t\t{\n\t\t\t\t\t\tconsumer.volume = 0;\n\n\t\t\t\t\t\tconst stream = new MediaStream();\n\n\t\t\t\t\t\tstream.addTrack(consumer.track);\n\n\t\t\t\t\t\tif (!stream.getAudioTracks()[0])\n\t\t\t\t\t\t\tthrow new Error('request.newConsumer | given stream has no audio track');\n\n\t\t\t\t\t\tconsumer.hark = hark(stream, { play: false });\n\n\t\t\t\t\t\tconsumer.hark.on('volume_change', (volume) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvolume = Math.round(volume);\n\n\t\t\t\t\t\t\tif (consumer && volume !== consumer.volume)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconsumer.volume = volume;\n\n\t\t\t\t\t\t\t\tstore.dispatch(peerVolumeActions.setPeerVolume(peerId, volume));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t{\n\t\t\t\t\tlogger.error('unknown request.method \"%s\"', request.method);\n\n\t\t\t\t\tcb(500, `unknown request.method \"${request.method}\"`);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._signalingSocket.on('notification', async (notification) =>\n\t\t{\n\t\t\tlogger.debug(\n\t\t\t\t'socket \"notification\" event [method:\"%s\", data:\"%o\"]',\n\t\t\t\tnotification.method, notification.data);\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tswitch (notification.method)\n\t\t\t\t{\n\n\t\t\t\t\tcase 'enteredLobby':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setInLobby(true));\n\n\t\t\t\t\t\tconst { displayName } = store.getState().settings;\n\t\t\t\t\t\tconst { picture } = store.getState().me;\n\n\t\t\t\t\t\tawait this.sendRequest('changeDisplayName', { displayName });\n\t\t\t\t\t\tawait this.sendRequest('changePicture', { picture });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'signInRequired':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setSignInRequired(true));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'overRoomLimit':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(roomActions.setOverRoomLimit(true));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'roomReady':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { turnServers } = notification.data;\n\n\t\t\t\t\t\tthis._turnServers = turnServers;\n\n\t\t\t\t\t\tstore.dispatch(roomActions.toggleJoined());\n\t\t\t\t\t\tstore.dispatch(roomActions.setInLobby(false));\n\n\t\t\t\t\t\tawait this._joinRoom({ joinVideo });\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'roomBack':\n\t\t\t\t\t{\n\t\t\t\t\t\tawait this._joinRoom({ joinVideo });\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lockRoom':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setRoomLocked());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.locked',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Room is now locked'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'unlockRoom':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setRoomUnLocked());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.unlocked',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Room is now unlocked'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'parkedPeer':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.addLobbyPeer(peerId));\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\n\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.newLobbyPeer',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'New participant entered the lobby'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'parkedPeers':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { lobbyPeers } = notification.data;\n\n\t\t\t\t\t\tif (lobbyPeers.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlobbyPeers.forEach((peer) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\t\tlobbyPeerActions.addLobbyPeer(peer.id));\n\n\t\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerDisplayName(\n\t\t\t\t\t\t\t\t\t\tpeer.displayName,\n\t\t\t\t\t\t\t\t\t\tpeer.id\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerPicture(\n\t\t\t\t\t\t\t\t\t\tpeer.picture,\n\t\t\t\t\t\t\t\t\t\tpeer.id\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\n\t\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.newLobbyPeer',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New participant entered the lobby'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:peerClosed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.removeLobbyPeer(peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.lobbyPeerLeft',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participant in lobby left'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:promotedPeer':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.removeLobbyPeer(peerId));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:changeDisplayName':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, displayName } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerDisplayName(displayName, peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.lobbyPeerChangedDisplayName',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participant in lobby changed name to {displayName}'\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lobby:changePicture':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, picture } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tlobbyPeerActions.setLobbyPeerPicture(picture, peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.lobbyPeerChangedPicture',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participant in lobby changed picture'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'setAccessCode':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { accessCode } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setAccessCode(accessCode));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.setAccessCode',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Access code for room updated'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'setJoinByAccessCode':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { joinByAccessCode } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setJoinByAccessCode(joinByAccessCode));\n\n\t\t\t\t\t\tif (joinByAccessCode)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.accessCodeOn',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Access code for room is now activated'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'room.accessCodeOff',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Access code for room is now deactivated'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'activeSpeaker':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\troomActions.setRoomActiveSpeaker(peerId));\n\n\t\t\t\t\t\tif (peerId && peerId !== this._peerId)\n\t\t\t\t\t\t\tthis._spotlights.handleActiveSpeaker(peerId);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'changeDisplayName':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, displayName, oldDisplayName } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.setPeerDisplayName(displayName, peerId));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.peerChangedDisplayName',\n\t\t\t\t\t\t\t\t\tdefaultMessage : '{oldDisplayName} is now {displayName}'\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\toldDisplayName,\n\t\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'changePicture':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, picture } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(peerActions.setPeerPicture(peerId, picture));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'raisedHand':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\tpeerId,\n\t\t\t\t\t\t\traisedHand,\n\t\t\t\t\t\t\traisedHandTimestamp\n\t\t\t\t\t\t} = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.setPeerRaisedHand(\n\t\t\t\t\t\t\t\tpeerId,\n\t\t\t\t\t\t\t\traisedHand,\n\t\t\t\t\t\t\t\traisedHandTimestamp\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst { displayName } = store.getState().peers[peerId];\n\n\t\t\t\t\t\tlet text;\n\n\t\t\t\t\t\tif (raisedHand)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext = intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'room.raisedHand',\n\t\t\t\t\t\t\t\tdefaultMessage : '{displayName} raised their hand'\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext = intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'room.loweredHand',\n\t\t\t\t\t\t\t\tdefaultMessage : '{displayName} put their hand down'\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (displayName)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'chatMessage':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, chatMessage } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tchatActions.addResponseMessage({ ...chatMessage, peerId }));\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!store.getState().toolarea.toolAreaOpen ||\n\t\t\t\t\t\t\t(store.getState().toolarea.toolAreaOpen &&\n\t\t\t\t\t\t\tstore.getState().toolarea.currentToolTab !== 'chat')\n\t\t\t\t\t\t) // Make sound\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\t\t\t\t\t\t\tthis._soundNotification();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:clearChat':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(chatActions.clearChat());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.clearChat',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator cleared the chat'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'sendFile':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, magnetUri } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(fileActions.addFile(peerId, magnetUri));\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.newFile',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'New file available'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!store.getState().toolarea.toolAreaOpen ||\n\t\t\t\t\t\t\t(store.getState().toolarea.toolAreaOpen &&\n\t\t\t\t\t\t\tstore.getState().toolarea.currentToolTab !== 'files')\n\t\t\t\t\t\t) // Make sound\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\t\troomActions.setToolbarsVisible(true));\n\t\t\t\t\t\t\tthis._soundNotification();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:clearFileSharing':\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(fileActions.clearFiles());\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.clearFiles',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator cleared the files'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'producerScore':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { producerId, score } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tproducerActions.setProducerScore(producerId, score));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'newPeer':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { id, displayName, picture, roles } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.addPeer({ id, displayName, picture, roles, consumers: [] }));\n\n\t\t\t\t\t\tthis._soundNotification();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.newPeer',\n\t\t\t\t\t\t\t\t\tdefaultMessage : '{displayName} joined the room'\n\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'peerClosed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tpeerActions.removePeer(peerId));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerClosed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tconsumer.close();\n\n\t\t\t\t\t\tif (consumer.hark != null)\n\t\t\t\t\t\t\tconsumer.hark.stop();\n\n\t\t\t\t\t\tthis._consumers.delete(consumerId);\n\n\t\t\t\t\t\tconst { peerId } = consumer.appData;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.removeConsumer(consumerId, peerId));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerPaused':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.setConsumerPaused(consumerId, 'remote'));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerResumed':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.setConsumerResumed(consumerId, 'remote'));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerLayersChanged':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId, spatialLayer, temporalLayer } = notification.data;\n\t\t\t\t\t\tconst consumer = this._consumers.get(consumerId);\n\n\t\t\t\t\t\tif (!consumer)\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tstore.dispatch(consumerActions.setConsumerCurrentLayers(\n\t\t\t\t\t\t\tconsumerId, spatialLayer, temporalLayer));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'consumerScore':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { consumerId, score } = notification.data;\n\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tconsumerActions.setConsumerScore(consumerId, score));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:mute':\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this._micProducer && !this._micProducer.paused)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.muteMic();\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'moderator.muteAudio',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator muted your audio'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:stopVideo':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.disableWebcam();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.muteVideo',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator stopped your video'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:stopScreenSharing':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.disableScreenSharing();\n\n\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'moderator.stopScreenSharing',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Moderator stopped your screen sharing'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:kick':\n\t\t\t\t\t{\n\t\t\t\t\t\t// Need some feedback\n\t\t\t\t\t\tthis.close();\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'moderator:lowerHand':\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setRaisedHand(false);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'gotRole':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, role } = notification.data;\n\n\t\t\t\t\t\tif (peerId === this._peerId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(meActions.addRole(role));\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'roles.gotRole',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'You got the role: {role}'\n\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\trole\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tstore.dispatch(peerActions.addPeerRole(peerId, role));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'lostRole':\n\t\t\t\t\t{\n\t\t\t\t\t\tconst { peerId, role } = notification.data;\n\n\t\t\t\t\t\tif (peerId === this._peerId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstore.dispatch(meActions.removeRole(role));\n\n\t\t\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'roles.lostRole',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'You lost the role: {role}'\n\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\trole\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tstore.dispatch(peerActions.removePeerRole(peerId, role));\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tlogger.error(\n\t\t\t\t\t\t\t'unknown notification.method \"%s\"', notification.method);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tlogger.error('error on socket \"notification\" event [error:\"%o\"]', error);\n\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'socket.requestError',\n\t\t\t\t\t\t\tdefaultMessage : 'Error on server request'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t\t}\n\n\t\t});\n\t}\n\n\tasync _joinRoom({ joinVideo })\n\t{\n\t\tlogger.debug('_joinRoom()');\n\n\t\tconst { displayName } = store.getState().settings;\n\t\tconst { picture } = store.getState().me;\n\n\t\ttry\n\t\t{\n\t\t\tthis._torrentSupport = WebTorrent.WEBRTC_SUPPORT;\n\n\t\t\tthis._webTorrent = this._torrentSupport && new WebTorrent({\n\t\t\t\ttracker : {\n\t\t\t\t\trtcConfig : {\n\t\t\t\t\t\ticeServers : this._turnServers\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._webTorrent.on('error', (error) =>\n\t\t\t{\n\t\t\t\tlogger.error('Filesharing [error:\"%o\"]', error);\n\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'filesharing.error',\n\t\t\t\t\t\t\tdefaultMessage : 'There was a filesharing error'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\t\t\t});\n\n\t\t\tthis._mediasoupDevice = new mediasoupClient.Device();\n\n\t\t\tconst routerRtpCapabilities =\n\t\t\t\tawait this.sendRequest('getRouterRtpCapabilities');\n\n\t\t\trouterRtpCapabilities.headerExtensions = routerRtpCapabilities.headerExtensions\n\t\t\t\t.filter((ext) => ext.uri !== 'urn:3gpp:video-orientation');\n\n\t\t\tawait this._mediasoupDevice.load({ routerRtpCapabilities });\n\n\t\t\tif (this._produce)\n\t\t\t{\n\t\t\t\tconst transportInfo = await this.sendRequest(\n\t\t\t\t\t'createWebRtcTransport',\n\t\t\t\t\t{\n\t\t\t\t\t\tforceTcp  : this._forceTcp,\n\t\t\t\t\t\tproducing : true,\n\t\t\t\t\t\tconsuming : false\n\t\t\t\t\t});\n\n\t\t\t\tconst {\n\t\t\t\t\tid,\n\t\t\t\t\ticeParameters,\n\t\t\t\t\ticeCandidates,\n\t\t\t\t\tdtlsParameters\n\t\t\t\t} = transportInfo;\n\n\t\t\t\tthis._sendTransport = this._mediasoupDevice.createSendTransport(\n\t\t\t\t\t{\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ticeParameters,\n\t\t\t\t\t\ticeCandidates,\n\t\t\t\t\t\tdtlsParameters,\n\t\t\t\t\t\ticeServers             : this._turnServers,\n\t\t\t\t\t\t// TODO: Fix for issue #72\n\t\t\t\t\t\ticeTransportPolicy     : this._device.flag === 'firefox' && this._turnServers ? 'relay' : undefined,\n\t\t\t\t\t\tproprietaryConstraints : PC_PROPRIETARY_CONSTRAINTS\n\t\t\t\t\t});\n\n\t\t\t\tthis._sendTransport.on(\n\t\t\t\t\t'connect', ({ dtlsParameters }, callback, errback) => // eslint-disable-line no-shadow\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.sendRequest(\n\t\t\t\t\t\t\t'connectWebRtcTransport',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttransportId : this._sendTransport.id,\n\t\t\t\t\t\t\t\tdtlsParameters\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(callback)\n\t\t\t\t\t\t\t.catch(errback);\n\t\t\t\t\t});\n\n\t\t\t\tthis._sendTransport.on(\n\t\t\t\t\t'produce', async ({ kind, rtpParameters, appData }, callback, errback) =>\n\t\t\t\t\t{\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// eslint-disable-next-line no-shadow\n\t\t\t\t\t\t\tconst { id } = await this.sendRequest(\n\t\t\t\t\t\t\t\t'produce',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttransportId : this._sendTransport.id,\n\t\t\t\t\t\t\t\t\tkind,\n\t\t\t\t\t\t\t\t\trtpParameters,\n\t\t\t\t\t\t\t\t\tappData\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tcallback({ id });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (error)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terrback(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst transportInfo = await this.sendRequest(\n\t\t\t\t'createWebRtcTransport',\n\t\t\t\t{\n\t\t\t\t\tforceTcp  : this._forceTcp,\n\t\t\t\t\tproducing : false,\n\t\t\t\t\tconsuming : true\n\t\t\t\t});\n\n\t\t\tconst {\n\t\t\t\tid,\n\t\t\t\ticeParameters,\n\t\t\t\ticeCandidates,\n\t\t\t\tdtlsParameters\n\t\t\t} = transportInfo;\n\n\t\t\tthis._recvTransport = this._mediasoupDevice.createRecvTransport(\n\t\t\t\t{\n\t\t\t\t\tid,\n\t\t\t\t\ticeParameters,\n\t\t\t\t\ticeCandidates,\n\t\t\t\t\tdtlsParameters,\n\t\t\t\t\ticeServers         : this._turnServers,\n\t\t\t\t\t// TODO: Fix for issue #72\n\t\t\t\t\ticeTransportPolicy : this._device.flag === 'firefox' && this._turnServers ? 'relay' : undefined\n\t\t\t\t});\n\n\t\t\tthis._recvTransport.on(\n\t\t\t\t'connect', ({ dtlsParameters }, callback, errback) => // eslint-disable-line no-shadow\n\t\t\t\t{\n\t\t\t\t\tthis.sendRequest(\n\t\t\t\t\t\t'connectWebRtcTransport',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttransportId : this._recvTransport.id,\n\t\t\t\t\t\t\tdtlsParameters\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(callback)\n\t\t\t\t\t\t.catch(errback);\n\t\t\t\t});\n\n\t\t\t// Set our media capabilities.\n\t\t\tstore.dispatch(meActions.setMediaCapabilities(\n\t\t\t\t{\n\t\t\t\t\tcanSendMic     : this._mediasoupDevice.canProduce('audio'),\n\t\t\t\t\tcanSendWebcam  : this._mediasoupDevice.canProduce('video'),\n\t\t\t\t\tcanShareScreen : this._mediasoupDevice.canProduce('video') &&\n\t\t\t\t\t\tthis._screenSharing.isScreenShareAvailable(),\n\t\t\t\t\tcanShareFiles : this._torrentSupport\n\t\t\t\t}));\n\n\t\t\tconst {\n\t\t\t\tauthenticated,\n\t\t\t\troles,\n\t\t\t\tpeers,\n\t\t\t\ttracker,\n\t\t\t\troomPermissions,\n\t\t\t\tallowWhenRoleMissing,\n\t\t\t\tchatHistory,\n\t\t\t\tfileHistory,\n\t\t\t\tlastNHistory,\n\t\t\t\tlocked,\n\t\t\t\tlobbyPeers,\n\t\t\t\taccessCode\n\t\t\t} = await this.sendRequest(\n\t\t\t\t'join',\n\t\t\t\t{\n\t\t\t\t\tdisplayName     : displayName,\n\t\t\t\t\tpicture         : picture,\n\t\t\t\t\trtpCapabilities : this._mediasoupDevice.rtpCapabilities\n\t\t\t\t});\n\n\t\t\tlogger.debug(\n\t\t\t\t'_joinRoom() joined [authenticated:\"%s\", peers:\"%o\", roles:\"%o\"]',\n\t\t\t\tauthenticated,\n\t\t\t\tpeers,\n\t\t\t\troles\n\t\t\t);\n\n\t\t\ttracker && (this._tracker = tracker);\n\n\t\t\tstore.dispatch(meActions.loggedIn(authenticated));\n\n\t\t\tstore.dispatch(roomActions.setRoomPermissions(roomPermissions));\n\n\t\t\tif (allowWhenRoleMissing)\n\t\t\t\tstore.dispatch(roomActions.setAllowWhenRoleMissing(allowWhenRoleMissing));\n\n\t\t\tconst myRoles = store.getState().me.roles;\n\n\t\t\tfor (const role of roles)\n\t\t\t{\n\t\t\t\tif (!myRoles.includes(role))\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(meActions.addRole(role));\n\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'roles.gotRole',\n\t\t\t\t\t\t\t\tdefaultMessage : 'You got the role: {role}'\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\trole\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const peer of peers)\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tpeerActions.addPeer({ ...peer, consumers: [] }));\n\t\t\t}\n\n\t\t\tthis._spotlights.addPeers(peers);\n\n\t\t\tthis._spotlights.on('spotlights-updated', (spotlights) =>\n\t\t\t{\n\t\t\t\tstore.dispatch(roomActions.setSpotlights(spotlights));\n\t\t\t\tthis.updateSpotlights(spotlights);\n\t\t\t});\n\n\t\t\t(chatHistory.length > 0) && store.dispatch(\n\t\t\t\tchatActions.addChatHistory(chatHistory));\n\n\t\t\t(fileHistory.length > 0) && store.dispatch(\n\t\t\t\tfileActions.addFileHistory(fileHistory));\n\n\t\t\tif (lastNHistory.length > 0)\n\t\t\t{\n\t\t\t\tlogger.debug('_joinRoom() | got lastN history');\n\n\t\t\t\tthis._spotlights.addSpeakerList(\n\t\t\t\t\tlastNHistory.filter((peerId) => peerId !== this._peerId)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlocked ?\n\t\t\t\tstore.dispatch(roomActions.setRoomLocked()) :\n\t\t\t\tstore.dispatch(roomActions.setRoomUnLocked());\n\n\t\t\t(lobbyPeers.length > 0) && lobbyPeers.forEach((peer) =>\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tlobbyPeerActions.addLobbyPeer(peer.id));\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tlobbyPeerActions.setLobbyPeerDisplayName(peer.displayName, peer.id));\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tlobbyPeerActions.setLobbyPeerPicture(peer.picture, peer.id));\n\t\t\t});\n\n\t\t\t(accessCode != null) && store.dispatch(\n\t\t\t\troomActions.setAccessCode(accessCode));\n\n\t\t\t// Don't produce if explicitly requested to not to do it.\n\t\t\tif (this._produce)\n\t\t\t{\n\t\t\t\tif (this._mediasoupDevice.canProduce('audio'))\n\t\t\t\t\tif (!this._muted)\n\t\t\t\t\t{\n\t\t\t\t\t\tawait this.updateMic({ start: true });\n\t\t\t\t\t\tlet autoMuteThreshold = 4;\n\n\t\t\t\t\t\tif ('autoMuteThreshold' in window.config)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tautoMuteThreshold = window.config.autoMuteThreshold;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (autoMuteThreshold && peers.length >= autoMuteThreshold)\n\t\t\t\t\t\t\tthis.muteMic();\n\t\t\t\t\t}\n\n\t\t\t\tif (joinVideo)\n\t\t\t\t\tthis.updateWebcam({ start: true });\n\t\t\t}\n\n\t\t\tawait this._updateAudioOutputDevices();\n\n\t\t\tconst { selectedAudioOutputDevice } = store.getState().settings;\n\n\t\t\tif (!selectedAudioOutputDevice && this._audioOutputDevices !== {})\n\t\t\t{\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tsettingsActions.setSelectedAudioOutputDevice(\n\t\t\t\t\t\tObject.keys(this._audioOutputDevices)[0]\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tstore.dispatch(roomActions.setRoomState('connected'));\n\n\t\t\t// Clean all the existing notifications.\n\t\t\tstore.dispatch(notificationActions.removeAllNotifications());\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.joined',\n\t\t\t\t\t\tdefaultMessage : 'You have joined the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tthis._spotlights.start();\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_joinRoom() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.cantJoin',\n\t\t\t\t\t\tdefaultMessage : 'Unable to join the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\tasync lockRoom()\n\t{\n\t\tlogger.debug('lockRoom()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('lockRoom');\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setRoomLocked());\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.youLocked',\n\t\t\t\t\t\tdefaultMessage : 'You locked the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.cantLock',\n\t\t\t\t\t\tdefaultMessage : 'Unable to lock the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tlogger.error('lockRoom() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync unlockRoom()\n\t{\n\t\tlogger.debug('unlockRoom()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('unlockRoom');\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setRoomUnLocked());\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.youUnLocked',\n\t\t\t\t\t\tdefaultMessage : 'You unlocked the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'room.cantUnLock',\n\t\t\t\t\t\tdefaultMessage : 'Unable to unlock the room'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tlogger.error('unlockRoom() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync setAccessCode(code)\n\t{\n\t\tlogger.debug('setAccessCode()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('setAccessCode', { accessCode: code });\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setAccessCode(code));\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : 'Access code saved.'\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setAccessCode() [error:\"%o\"]', error);\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : 'Unable to set access code.'\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync setJoinByAccessCode(value)\n\t{\n\t\tlogger.debug('setJoinByAccessCode()');\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest('setJoinByAccessCode', { joinByAccessCode: value });\n\n\t\t\tstore.dispatch(\n\t\t\t\troomActions.setJoinByAccessCode(value));\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : `You switched Join by access-code to ${value}`\n\t\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('setAccessCode() [error:\"%o\"]', error);\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : 'Unable to set join by access code.'\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tasync addExtraVideo(videoDeviceId)\n\t{\n\t\tlogger.debug(\n\t\t\t'addExtraVideo() [videoDeviceId:\"%s\"]',\n\t\t\tvideoDeviceId\n\t\t);\n\n\t\tstore.dispatch(\n\t\t\troomActions.setExtraVideoOpen(false));\n\n\t\tif (!this._mediasoupDevice.canProduce('video'))\n\t\t{\n\t\t\tlogger.error('addExtraVideo() | cannot produce video');\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet track;\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setWebcamInProgress(true));\n\n\t\ttry\n\t\t{\n\t\t\tconst device = this._webcams[videoDeviceId];\n\t\t\tconst resolution = store.getState().settings.resolution;\n\n\t\t\tif (!device)\n\t\t\t\tthrow new Error('no webcam devices');\n\n\t\t\tconst stream = await navigator.mediaDevices.getUserMedia(\n\t\t\t\t{\n\t\t\t\t\tvideo :\n\t\t\t\t\t{\n\t\t\t\t\t\tdeviceId : { ideal: videoDeviceId },\n\t\t\t\t\t\t...VIDEO_CONSTRAINS[resolution]\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t([ track ] = stream.getVideoTracks());\n\n\t\t\tlet producer;\n\n\t\t\tif (this._useSimulcast)\n\t\t\t{\n\t\t\t\t// If VP9 is the only available video codec then use SVC.\n\t\t\t\tconst firstVideoCodec = this._mediasoupDevice\n\t\t\t\t\t.rtpCapabilities\n\t\t\t\t\t.codecs\n\t\t\t\t\t.find((c) => c.kind === 'video');\n\n\t\t\t\tlet encodings;\n\n\t\t\t\tif (firstVideoCodec.mimeType.toLowerCase() === 'video/vp9')\n\t\t\t\t\tencodings = VIDEO_KSVC_ENCODINGS;\n\t\t\t\telse if ('simulcastEncodings' in window.config)\n\t\t\t\t\tencodings = window.config.simulcastEncodings;\n\t\t\t\telse\n\t\t\t\t\tencodings = VIDEO_SIMULCAST_ENCODINGS;\n\n\t\t\t\tproducer = await this._sendTransport.produce(\n\t\t\t\t\t{\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tencodings,\n\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvideoGoogleStartBitrate : 1000\n\t\t\t\t\t\t},\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource : 'extravideo'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tproducer = await this._sendTransport.produce({\n\t\t\t\t\ttrack,\n\t\t\t\t\tappData :\n\t\t\t\t\t{\n\t\t\t\t\t\tsource : 'extravideo'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._extraVideoProducers.set(producer.id, producer);\n\n\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t{\n\t\t\t\t\tid            : producer.id,\n\t\t\t\t\tdeviceLabel   : device.label,\n\t\t\t\t\tsource        : 'extravideo',\n\t\t\t\t\tpaused        : producer.paused,\n\t\t\t\t\ttrack         : producer.track,\n\t\t\t\t\trtpParameters : producer.rtpParameters,\n\t\t\t\t\tcodec         : producer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t}));\n\n\t\t\t// store.dispatch(settingsActions.setSelectedWebcamDevice(deviceId));\n\n\t\t\tawait this._updateWebcams();\n\n\t\t\tproducer.on('transportclose', () =>\n\t\t\t{\n\t\t\t\tthis._extraVideoProducers.delete(producer.id);\n\n\t\t\t\tproducer = null;\n\t\t\t});\n\n\t\t\tproducer.on('trackended', () =>\n\t\t\t{\n\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'devices.cameraDisconnected',\n\t\t\t\t\t\t\tdefaultMessage : 'Camera disconnected'\n\t\t\t\t\t\t})\n\t\t\t\t\t}));\n\n\t\t\t\tthis.disableExtraVideo(producer.id)\n\t\t\t\t\t.catch(() => {});\n\t\t\t});\n\n\t\t\tlogger.debug('addExtraVideo() succeeded');\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('addExtraVideo() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.cameraError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your camera'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(\n\t\t\tmeActions.setWebcamInProgress(false));\n\t}\n\n\tasync disableMic()\n\t{\n\t\tlogger.debug('disableMic()');\n\n\t\tif (!this._micProducer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setAudioInProgress(true));\n\n\t\tthis._micProducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(this._micProducer.id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: this._micProducer.id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableMic() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._micProducer = null;\n\n\t\tstore.dispatch(meActions.setAudioInProgress(false));\n\t}\n\n\tasync updateScreenSharing({\n\t\tstart = false,\n\t\tnewResolution = null,\n\t\tnewFrameRate = null\n\t} = {})\n\t{\n\t\tlogger.debug('updateScreenSharing() [start:\"%s\"]', start);\n\n\t\tlet track;\n\n\t\ttry\n\t\t{\n\t\t\tconst available = this._screenSharing.isScreenShareAvailable();\n\n\t\t\tif (!available)\n\t\t\t\tthrow new Error('screen sharing not available');\n\n\t\t\tif (!this._mediasoupDevice.canProduce('video'))\n\t\t\t\tthrow new Error('cannot produce video');\n\n\t\t\tif (newResolution)\n\t\t\t\tstore.dispatch(settingsActions.setScreenSharingResolution(newResolution));\n\n\t\t\tif (newFrameRate)\n\t\t\t\tstore.dispatch(settingsActions.setScreenSharingFrameRate(newFrameRate));\n\n\t\t\tstore.dispatch(meActions.setScreenShareInProgress(true));\n\n\t\t\tconst {\n\t\t\t\tscreenSharingResolution,\n\t\t\t\tscreenSharingFrameRate\n\t\t\t} = store.getState().settings;\n\n\t\t\tif (start)\n\t\t\t{\n\t\t\t\tconst stream = await this._screenSharing.start({\n\t\t\t\t\t...VIDEO_CONSTRAINS[screenSharingResolution],\n\t\t\t\t\tframeRate : screenSharingFrameRate\n\t\t\t\t});\n\n\t\t\t\t([ track ] = stream.getVideoTracks());\n\n\t\t\t\tif (this._useSharingSimulcast)\n\t\t\t\t{\n\t\t\t\t\t// If VP9 is the only available video codec then use SVC.\n\t\t\t\t\tconst firstVideoCodec = this._mediasoupDevice\n\t\t\t\t\t\t.rtpCapabilities\n\t\t\t\t\t\t.codecs\n\t\t\t\t\t\t.find((c) => c.kind === 'video');\n\n\t\t\t\t\tlet encodings;\n\n\t\t\t\t\tif (firstVideoCodec.mimeType.toLowerCase() === 'video/vp9')\n\t\t\t\t\t{\n\t\t\t\t\t\tencodings = VIDEO_SVC_ENCODINGS;\n\t\t\t\t\t}\n\t\t\t\t\telse if ('simulcastEncodings' in window.config)\n\t\t\t\t\t{\n\t\t\t\t\t\tencodings = window.config.simulcastEncodings\n\t\t\t\t\t\t\t.map((encoding) => ({ ...encoding, dtx: true }));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tencodings = VIDEO_SIMULCAST_ENCODINGS\n\t\t\t\t\t\t\t.map((encoding) => ({ ...encoding, dtx: true }));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._screenSharingProducer = await this._sendTransport.produce(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttrack,\n\t\t\t\t\t\t\tencodings,\n\t\t\t\t\t\t\tcodecOptions :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvideoGoogleStartBitrate : 1000\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tappData :\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource : 'screen'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis._screenSharingProducer = await this._sendTransport.produce({\n\t\t\t\t\t\ttrack,\n\t\t\t\t\t\tappData :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsource : 'screen'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tstore.dispatch(producerActions.addProducer(\n\t\t\t\t\t{\n\t\t\t\t\t\tid            : this._screenSharingProducer.id,\n\t\t\t\t\t\tdeviceLabel   : 'screen',\n\t\t\t\t\t\tsource        : 'screen',\n\t\t\t\t\t\tpaused        : this._screenSharingProducer.paused,\n\t\t\t\t\t\ttrack         : this._screenSharingProducer.track,\n\t\t\t\t\t\trtpParameters : this._screenSharingProducer.rtpParameters,\n\t\t\t\t\t\tcodec         : this._screenSharingProducer.rtpParameters.codecs[0].mimeType.split('/')[1]\n\t\t\t\t\t}));\n\n\t\t\t\tthis._screenSharingProducer.on('transportclose', () =>\n\t\t\t\t{\n\t\t\t\t\tthis._screenSharingProducer = null;\n\t\t\t\t});\n\n\t\t\t\tthis._screenSharingProducer.on('trackended', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype : 'error',\n\t\t\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'devices.screenSharingDisconnected',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Screen sharing disconnected'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tthis.disableScreenSharing();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (this._screenSharingProducer)\n\t\t\t{\n\t\t\t\t({ track } = this._screenSharingProducer);\n\n\t\t\t\tawait track.applyConstraints(\n\t\t\t\t\t{\n\t\t\t\t\t\t...VIDEO_CONSTRAINS[screenSharingResolution],\n\t\t\t\t\t\tframeRate : screenSharingFrameRate\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('updateScreenSharing() [error:\"%o\"]', error);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : intl.formatMessage({\n\t\t\t\t\t\tid             : 'devices.screenSharingError',\n\t\t\t\t\t\tdefaultMessage : 'An error occurred while accessing your screen'\n\t\t\t\t\t})\n\t\t\t\t}));\n\n\t\t\tif (track)\n\t\t\t\ttrack.stop();\n\t\t}\n\n\t\tstore.dispatch(meActions.setScreenShareInProgress(false));\n\t}\n\n\tasync disableScreenSharing()\n\t{\n\t\tlogger.debug('disableScreenSharing()');\n\n\t\tif (!this._screenSharingProducer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setScreenShareInProgress(true));\n\n\t\tthis._screenSharingProducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(this._screenSharingProducer.id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: this._screenSharingProducer.id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableScreenSharing() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._screenSharingProducer = null;\n\n\t\tthis._screenSharing.stop();\n\n\t\tstore.dispatch(meActions.setScreenShareInProgress(false));\n\t}\n\n\tasync disableExtraVideo(id)\n\t{\n\t\tlogger.debug('disableExtraVideo()');\n\n\t\tconst producer = this._extraVideoProducers.get(id);\n\n\t\tif (!producer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(true));\n\n\t\tproducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableWebcam() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._extraVideoProducers.delete(id);\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(false));\n\t}\n\n\tasync disableWebcam()\n\t{\n\t\tlogger.debug('disableWebcam()');\n\n\t\tif (!this._webcamProducer)\n\t\t\treturn;\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(true));\n\n\t\tthis._webcamProducer.close();\n\n\t\tstore.dispatch(\n\t\t\tproducerActions.removeProducer(this._webcamProducer.id));\n\n\t\ttry\n\t\t{\n\t\t\tawait this.sendRequest(\n\t\t\t\t'closeProducer', { producerId: this._webcamProducer.id });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('disableWebcam() [error:\"%o\"]', error);\n\t\t}\n\n\t\tthis._webcamProducer = null;\n\n\t\tstore.dispatch(meActions.setWebcamInProgress(false));\n\t}\n\n\tasync _setNoiseThreshold(threshold)\n\t{\n\t\tlogger.debug('_setNoiseThreshold() [threshold:\"%s\"]', threshold);\n\n\t\tthis._hark.setThreshold(threshold);\n\n\t\tstore.dispatch(\n\t\t\tsettingsActions.setNoiseThreshold(threshold));\n\t}\n\n\tasync _updateAudioDevices()\n\t{\n\t\tlogger.debug('_updateAudioDevices()');\n\n\t\t// Reset the list.\n\t\tthis._audioDevices = {};\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_updateAudioDevices() | calling enumerateDevices()');\n\n\t\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\n\n\t\t\tfor (const device of devices)\n\t\t\t{\n\t\t\t\tif (device.kind !== 'audioinput')\n\t\t\t\t\tcontinue;\n\n\t\t\t\tthis._audioDevices[device.deviceId] = device;\n\t\t\t}\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setAudioDevices(this._audioDevices));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_updateAudioDevices() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _updateWebcams()\n\t{\n\t\tlogger.debug('_updateWebcams()');\n\n\t\t// Reset the list.\n\t\tthis._webcams = {};\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_updateWebcams() | calling enumerateDevices()');\n\n\t\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\n\n\t\t\tfor (const device of devices)\n\t\t\t{\n\t\t\t\tif (device.kind !== 'videoinput')\n\t\t\t\t\tcontinue;\n\n\t\t\t\tthis._webcams[device.deviceId] = device;\n\t\t\t}\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setWebcamDevices(this._webcams));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_updateWebcams() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _getAudioDeviceId()\n\t{\n\t\tlogger.debug('_getAudioDeviceId()');\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_getAudioDeviceId() | calling _updateAudioDeviceId()');\n\n\t\t\tawait this._updateAudioDevices();\n\n\t\t\tconst { selectedAudioDevice } = store.getState().settings;\n\n\t\t\tif (selectedAudioDevice && this._audioDevices[selectedAudioDevice])\n\t\t\t\treturn selectedAudioDevice;\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst audioDevices = Object.values(this._audioDevices);\n\n\t\t\t\treturn audioDevices[0] ? audioDevices[0].deviceId : null;\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_getAudioDeviceId() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _getWebcamDeviceId()\n\t{\n\t\tlogger.debug('_getWebcamDeviceId()');\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_getWebcamDeviceId() | calling _updateWebcams()');\n\n\t\t\tawait this._updateWebcams();\n\n\t\t\tconst { selectedWebcam } = store.getState().settings;\n\n\t\t\tif (selectedWebcam && this._webcams[selectedWebcam])\n\t\t\t\treturn selectedWebcam;\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst webcams = Object.values(this._webcams);\n\n\t\t\t\treturn webcams[0] ? webcams[0].deviceId : null;\n\t\t\t}\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_getWebcamDeviceId() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n\tasync _updateAudioOutputDevices()\n\t{\n\t\tlogger.debug('_updateAudioOutputDevices()');\n\n\t\t// Reset the list.\n\t\tthis._audioOutputDevices = {};\n\n\t\ttry\n\t\t{\n\t\t\tlogger.debug('_updateAudioOutputDevices() | calling enumerateDevices()');\n\n\t\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\n\n\t\t\tfor (const device of devices)\n\t\t\t{\n\t\t\t\tif (device.kind !== 'audiooutput')\n\t\t\t\t\tcontinue;\n\n\t\t\t\tthis._audioOutputDevices[device.deviceId] = device;\n\t\t\t}\n\n\t\t\tstore.dispatch(\n\t\t\t\tmeActions.setAudioOutputDevices(this._audioOutputDevices));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('_updateAudioOutputDevices() [error:\"%o\"]', error);\n\t\t}\n\t}\n\n}\n"],"sourceRoot":""}