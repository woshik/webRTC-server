(this["webpackJsonpmultiparty-meeting"]=this["webpackJsonpmultiparty-meeting"]||[]).push([[6],{297:function(e,a,t){e.exports=t.p+"static/media/avatar-empty.23a3776b.jpeg"},621:function(e,a,t){"use strict";t.r(a);var r=t(0),o=t.n(r),l=t(104),n=t(5),s=t.n(n);s.a.shape({state:s.a.oneOf(["new","connecting","connected","closed"]).isRequired,activeSpeakerId:s.a.string}),s.a.shape({id:s.a.string.isRequired,canSendMic:s.a.bool.isRequired,canSendWebcam:s.a.bool.isRequired,webcamInProgress:s.a.bool.isRequired}),s.a.shape({id:s.a.string.isRequired,source:s.a.oneOf(["mic","webcam","screen","extravideo"]).isRequired,deviceLabel:s.a.string,type:s.a.oneOf(["front","back","screen","extravideo"]),paused:s.a.bool.isRequired,track:s.a.any,codec:s.a.string.isRequired}),s.a.shape({id:s.a.string.isRequired,displayName:s.a.string,consumers:s.a.arrayOf(s.a.string).isRequired}),s.a.shape({id:s.a.string.isRequired,peerId:s.a.string.isRequired,source:s.a.oneOf(["mic","webcam","screen","extravideo"]).isRequired,locallyPaused:s.a.bool.isRequired,remotelyPaused:s.a.bool.isRequired,profile:s.a.oneOf(["none","default","low","medium","high"]),track:s.a.any,codec:s.a.string}),s.a.shape({id:s.a.string.isRequired,type:s.a.oneOf(["info","error"]).isRequired,timeout:s.a.number}),s.a.shape({type:s.a.string,component:s.a.string,text:s.a.string,sender:s.a.string}),s.a.shape({data:s.a.shape({id:s.a.string.isRequired,picture:s.a.string,file:s.a.shape({magnet:s.a.string.isRequired}).isRequired,me:s.a.bool}).isRequired,notify:s.a.func.isRequired});var i=t(11),c=t(107),d=t.n(c),m=t(8);const u=e=>({type:"SET_TOOL_TAB",payload:{toolTab:e}});var p=t(90);const g={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},h=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],b=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],f=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"];class v{constructor(e){this.document=e,this.vendor="fullscreenEnabled"in this.document&&Object.keys(g)||h[0]in this.document&&h||b[0]in this.document&&b||f[0]in this.document&&f||[]}requestFullscreen(e){e[this.vendor[g.requestFullscreen]]()}requestFullscreenFunction(e){e[this.vendor[g.requestFullscreen]]}addEventListener(e,a){this.document.addEventListener(this.vendor[g[e]],a)}removeEventListener(e,a){this.document.removeEventListener(this.vendor[g[e]],a)}get exitFullscreen(){return this.document[this.vendor[g.exitFullscreen]].bind(this.document)}get fullscreenEnabled(){return Boolean(this.document[this.vendor[g.fullscreenEnabled]])}set fullscreenEnabled(e){}get fullscreenElement(){return this.document[this.vendor[g.fullscreenElement]]}set fullscreenElement(e){}get onfullscreenchange(){return this.document["on".concat(this.vendor[g.fullscreenchange]).toLowerCase()]}set onfullscreenchange(e){this.document["on".concat(this.vendor[g.fullscreenchange]).toLowerCase()]=e}get onfullscreenerror(){return this.document["on".concat(this.vendor[g.fullscreenerror]).toLowerCase()]}set onfullscreenerror(e){this.document["on".concat(this.vendor[g.fullscreenerror]).toLowerCase()]=e}}var E=t(91),w=t(314),y=t.n(w),M=t(620),C=t(626),S=t(409),k=t(222),O=t(125),T=t(61);const N=window.config.notificationPosition||"right";class x extends r.Component{constructor(...e){super(...e),this.displayed=[],this.storeDisplayed=e=>{this.displayed=[...this.displayed,e]}}shouldComponentUpdate({notifications:e=[]}){const a=this.props.notifications;let t=!1;for(let r=0;r<e.length;r+=1)t||(t=t||!a.filter(({id:a})=>e[r].id===a).length);return t}componentDidUpdate(){const e=this.props.notifications;(void 0===e?[]:e).forEach(e=>{this.displayed.includes(e.id)||(this.props.enqueueSnackbar(e.text,{variant:e.type,autoHideDuration:e.timeout,anchorOrigin:{vertical:"bottom",horizontal:N}}),this.storeDisplayed(e.id),this.props.removeNotification(e.id))})}render(){return null}}var P=Object(O.b)(Object(l.b)(e=>({notifications:e.notifications}),e=>({removeNotification:a=>e(T.c({notificationId:a}))}),null,{areStatesEqual:(e,a)=>a.notifications===e.notifications})(x)),L=t(532);const j=e=>e.me.roles,A=e=>e.room.roomPermissions,I=e=>e.room.allowWhenRoleMissing,R=e=>e.producers,B=e=>e.consumers,D=e=>e.room.spotlights,V=e=>e.peers,F=(e,a)=>e.peers[a]?e.peers[a].consumers:null,z=e=>e.consumers,H=Object(L.a)(V,e=>Object.keys(e)),W=Object(L.a)(V,e=>Object.values(e)),q=Object(L.a)(e=>e.lobbyPeers,e=>Object.keys(e)),U=(Object(L.a)(R,e=>Object.values(e).filter(e=>"mic"===e.source)),Object(L.a)(R,e=>Object.values(e).filter(e=>"webcam"===e.source)),Object(L.a)(R,e=>Object.values(e).filter(e=>"screen"===e.source))),_=Object(L.a)(R,e=>Object.values(e).filter(e=>"extravideo"===e.source)),G=Object(L.a)(R,e=>Object.values(e).find(e=>"mic"===e.source)),K=Object(L.a)(R,e=>Object.values(e).find(e=>"webcam"===e.source)),Y=Object(L.a)(R,e=>Object.values(e).find(e=>"screen"===e.source)),Q=(Object(L.a)(B,e=>Object.values(e).filter(e=>"mic"===e.source)),Object(L.a)(B,e=>Object.values(e).filter(e=>"webcam"===e.source)),Object(L.a)(B,e=>Object.values(e).filter(e=>"screen"===e.source)),Object(L.a)(D,B,(e,a)=>Object.values(a).filter(a=>"screen"===a.source&&e.includes(a.peerId)))),X=Object(L.a)(D,B,(e,a)=>Object.values(a).filter(a=>"extravideo"===a.source&&e.includes(a.peerId))),J=Object(L.a)(D,B,(e,a)=>Object.values(a).filter(a=>"mic"===a.source&&!e.includes(a.peerId))),$=Object(L.a)(D,e=>e.length),Z=Object(L.a)(D,H,(e,a)=>a.filter(a=>e.includes(a))),ee=Object(L.a)(D,W,(e,a)=>a.filter(a=>e.includes(a.id)&&!a.raisedHand).sort((e,a)=>String(e.displayName||"").localeCompare(String(a.displayName||"")))),ae=Object(L.a)(W,e=>e.filter(e=>e.raisedHand).sort((e,a)=>e.raisedHandTimestamp-a.raisedHandTimestamp)),te=Object(L.a)(D,W,(e,a)=>a.filter(a=>!e.includes(a.id)&&!a.raisedHand).sort((e,a)=>String(e.displayName||"").localeCompare(String(a.displayName||"")))),re=Object(L.a)(ae,ee,te,(e,a,t)=>[...e,...a,...t]),oe=Object(L.a)(V,e=>Object.values(e).length),le=(Object(L.a)(W,D,(e,a)=>e.filter(e=>!a.includes(e.id)).sort((e,a)=>String(e.displayName||"").localeCompare(String(a.displayName||"")))),Object(L.a)(W,e=>e.reduce((e,a)=>e+(a.raisedHand?1:0),0))),ne=Object(L.a)($,U,Q,_,X,(e,a,t,r,o)=>e+1+a.length+t.length+r.length+o.length),se=Object(L.a)(G,K,Y,_,(e,a,t,r)=>({micProducer:e,webcamProducer:a,screenProducer:t,extraVideoProducers:r})),ie=()=>Object(L.a)(F,z,(e,a)=>{if(!e)return null;const t=e.map(e=>a[e]);return{micConsumer:t.find(e=>"mic"===e.source),webcamConsumer:t.find(e=>"webcam"===e.source),screenConsumer:t.find(e=>"screen"===e.source),extraVideoConsumers:t.filter(e=>"extravideo"===e.source)}}),ce=e=>Object(L.a)(j,A,I,W,(a,t,r,o)=>{if(!t)return!1;return!!a.some(a=>t[e].includes(a))||!!r&&!(!r.includes(e)||0!==o.filter(a=>a.roles.some(a=>t[e].includes(a))).length)});var de=t(350),me=t(609),ue=t(622),pe=t(610),ge=t(611),he=t(211),be=t(106);const fe="CHANGE_ROOM_LOCK",ve="PROMOTE_PEER",Ee="SEND_CHAT",we="MODERATE_CHAT",ye="SHARE_SCREEN",Me="EXTRA_VIDEO",Ce="SHARE_FILE",Se="MODERATE_FILES",ke="MODERATE_ROOM";var Oe=t(603);var Te=Object(be.b)(Object(l.b)(()=>{const e=ce(we);return a=>({isChatModerator:e(a),room:a.room})},null,null,{areStatesEqual:(e,a)=>a.room===e.room&&a.me===e.me&&a.peers===e.peers})(Object(i.a)(e=>({root:{display:"flex",padding:e.spacing(1),boxShadow:"0 2px 5px 2px rgba(0, 0, 0, 0.2)",backgroundColor:"rgba(255, 255, 255, 1)"},listheader:{padding:e.spacing(1),fontWeight:"bolder"},actionButton:{marginLeft:"auto"}}))(e=>{const a=Object(de.a)(),t=e.roomClient,r=e.isChatModerator,l=e.room,n=e.classes;return r?o.a.createElement("ul",{className:n.root},o.a.createElement("li",{className:n.listheader},o.a.createElement(E.a,{id:"room.moderatoractions",defaultMessage:"Moderator actions"})),o.a.createElement(Oe.a,{"aria-label":a.formatMessage({id:"room.clearChat",defaultMessage:"Clear chat"}),className:n.actionButton,variant:"contained",color:"secondary",disabled:l.clearChatInProgress,onClick:()=>t.clearChat()},o.a.createElement(E.a,{id:"room.clearChat",defaultMessage:"Clear chat"}))):null}))),Ne=t(161),xe=t(272),Pe=t.n(xe),Le=t(533),je=t.n(Le),Ae=t(534),Ie=t.n(Ae),Re=t(66);const Be=new Ie.a.Renderer;Be.link=(e,a,t)=>(a=a||e,t=t||e,"<a target='_blank' href='".concat(e,"' title='").concat(a,"'>").concat(t,"</a>"));var De=Object(i.a)(e=>({root:{display:"flex",marginBottom:e.spacing(1),padding:e.spacing(1),flexShrink:0},selfMessage:{marginLeft:"auto"},remoteMessage:{marginRight:"auto"},text:{"& p":{margin:0}},content:{marginLeft:e.spacing(1)},avatar:{borderRadius:"50%",height:"2rem",alignSelf:"center"}}))(e=>{const a=Object(de.a)(),t=e.self,r=e.picture,l=e.text,n=e.time,s=e.name,i=e.classes;return o.a.createElement(he.a,{className:Pe()(i.root,t?i.selfMessage:i.remoteMessage)},o.a.createElement("img",{alt:"Avatar",className:i.avatar,src:r}),o.a.createElement("div",{className:i.content},o.a.createElement(Re.a,{className:i.text,variant:"subtitle1",dangerouslySetInnerHTML:{__html:je.a.sanitize(Ie.a.parse(l,{renderer:Be}),{ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href","target","title"]})}}),o.a.createElement(Re.a,{variant:"caption"},t?a.formatMessage({id:"room.me",defaultMessage:"Me"}):s," - ",n)))}),Ve=t(297),Fe=t.n(Ve);class ze extends o.a.Component{componentDidMount(){this.node.scrollTop=this.node.scrollHeight}getSnapshotBeforeUpdate(){return this.node.scrollTop+this.node.offsetHeight===this.node.scrollHeight}shouldComponentUpdate(e){return e.chat.length!==this.props.chat.length}componentDidUpdate(e,a,t){t&&(this.node.scrollTop=this.node.scrollHeight)}getTimeString(e){return o.a.createElement(Ne.a,{value:new Date(e)})}render(){const e=this.props,a=e.chat,t=e.myPicture,r=e.classes;return o.a.createElement("div",{className:r.root,ref:e=>{this.node=e}},a.map((e,a)=>{const r=("response"===e.sender?e.picture:t)||Fe.a;return o.a.createElement(De,{key:a,self:"client"===e.sender,picture:r,text:e.text,time:this.getTimeString(e.time),name:e.name})}))}}var He=Object(l.b)(e=>({chat:e.chat,myPicture:e.me.picture}),null,null,{areStatesEqual:(e,a)=>a.chat===e.chat&&a.me.picture===e.me.picture})(Object(i.a)(e=>({root:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",overflowY:"auto",padding:e.spacing(1)}}))(ze)),We=t(49),qe=t(630),Ue=t(595),_e=t(537),Ge=t.n(_e);var Ke=Object(be.b)(Object(l.b)(()=>{const e=ce(Ee);return a=>({displayName:a.settings.displayName,picture:a.me.picture,canChat:e(a)})},null,null,{areStatesEqual:(e,a)=>a.room===e.room&&a.me.roles===e.me.roles&&a.peers===e.peers&&a.settings.displayName===e.settings.displayName&&a.me.picture===e.me.picture})(Object(i.a)(e=>({root:{padding:e.spacing(1),display:"flex",alignItems:"center",borderRadius:0},input:{marginLeft:8,flex:1},iconButton:{padding:10}}))(e=>{const a=Object(r.useState)(""),t=Object(We.a)(a,2),l=t[0],n=t[1],s=Object(de.a)(),i=(e,a,t,r)=>({type:"message",text:e,time:Date.now(),name:t,sender:a,picture:r}),c=e.roomClient,d=e.displayName,m=e.picture,u=e.canChat,p=e.classes;return o.a.createElement(he.a,{className:p.root},o.a.createElement(qe.a,{className:p.input,placeholder:s.formatMessage({id:"label.chatInput",defaultMessage:"Enter chat message..."}),value:l||"",disabled:!u,onChange:e=>{n(e.target.value)},onKeyPress:e=>{if("Enter"===e.key&&(e.preventDefault(),l&&""!==l)){const e=i(l,"response",d,m);c.sendChatMessage(e),n("")}},autoFocus:!0}),o.a.createElement(Ue.a,{color:"primary",className:p.iconButton,"aria-label":"Send",disabled:!u,onClick:()=>{if(l&&""!==l){const e=i(l,"response",d,m);c.sendChatMessage(e),n("")}}},o.a.createElement(Ge.a,null)))})));var Ye=Object(i.a)(()=>({root:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflowY:"auto"}}))(e=>{const a=e.classes;return o.a.createElement(he.a,{className:a.root},o.a.createElement(Te,null),o.a.createElement(He,null),o.a.createElement(Ke,null))}),Qe=t(3),Xe=t.n(Qe),Je=t(6),$e=t(52),Ze=t(322),ea=t.n(Ze);class aa extends o.a.PureComponent{render(){const e=this.props,a=e.roomClient,t=e.displayName,l=e.picture,n=e.canShareFiles,s=e.magnetUri,i=e.file,c=e.classes;return o.a.createElement("div",{className:c.root},o.a.createElement("img",{alt:"Avatar",className:c.avatar,src:l}),o.a.createElement("div",{className:c.fileContent},i.files&&o.a.createElement(r.Fragment,null,o.a.createElement(Re.a,{className:c.text},o.a.createElement(E.a,{id:"filesharing.finished",defaultMessage:"File finished downloading"})),i.files.map((e,t)=>o.a.createElement("div",{className:c.fileInfo,key:t},o.a.createElement(Re.a,{className:c.text},e.name),o.a.createElement(Oe.a,{variant:"contained",component:"span",className:c.button,onClick:()=>{a.saveFile(e)}},o.a.createElement(E.a,{id:"filesharing.save",defaultMessage:"Save"}))))),o.a.createElement(Re.a,{className:c.text},o.a.createElement(E.a,{id:"filesharing.sharedFile",defaultMessage:"{displayName} shared a file",values:{displayName:t}})),!i.active&&!i.files&&o.a.createElement("div",{className:c.fileInfo},o.a.createElement(Re.a,{className:c.text},ea.a.decode(s).dn),n?o.a.createElement(Oe.a,{variant:"contained",component:"span",className:c.button,onClick:()=>{a.handleDownload(s)}},o.a.createElement(E.a,{id:"filesharing.download",defaultMessage:"Download"})):o.a.createElement(Re.a,{className:c.text},o.a.createElement(E.a,{id:"label.fileSharingUnsupported",defaultMessage:"File sharing not supported"}))),i.timeout&&o.a.createElement(Re.a,{className:c.text},o.a.createElement(E.a,{id:"filesharing.missingSeeds",defaultMessage:"If this process takes a long time, there might not \n\t\t\t\t\t\t\t\t\tbe anyone seeding this torrent. Try asking someone to \n\t\t\t\t\t\t\t\t\treupload the file that you want."})),i.active&&o.a.createElement("progress",{value:i.progress})))}}var ta=Object(be.b)(Object(l.b)((e,{magnetUri:a})=>({file:e.files[a],canShareFiles:e.me.canShareFiles}),null,null,{areStatesEqual:(e,a)=>a.files===e.files&&a.me.canShareFiles===e.me.canShareFiles})(Object(i.a)(e=>({root:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(1),boxShadow:"0px 1px 5px 0px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 3px 1px -2px rgba(0, 0, 0, 0.12)","&:not(:last-child)":{marginBottom:e.spacing(1)}},avatar:{borderRadius:"50%",height:"2rem"},text:{margin:0,padding:e.spacing(1)},fileContent:{display:"flex",alignItems:"center"},fileInfo:{display:"flex",alignItems:"center",padding:e.spacing(1)},button:{marginRight:"auto"}}))(aa)));class ra extends o.a.PureComponent{componentDidMount(){this.node.scrollTop=this.node.scrollHeight}getSnapshotBeforeUpdate(){return this.node.scrollTop+this.node.offsetHeight===this.node.scrollHeight}componentDidUpdate(e,a,t){t&&(this.node.scrollTop=this.node.scrollHeight)}render(){const e=this.props,a=e.files,t=e.me,r=e.peers,l=e.intl,n=e.classes;return o.a.createElement("div",{className:n.root,ref:e=>{this.node=e}},Object.entries(a).map(([e,a])=>{let n,s;return t.id===a.peerId?(n=l.formatMessage({id:"room.me",defaultMessage:"Me"}),s=t.picture):r[a.peerId]?(n=r[a.peerId].displayName,s=r[a.peerId].picture):n=l.formatMessage({id:"label.unknown",defaultMessage:"Unknown"}),o.a.createElement(ta,{key:e,magnetUri:e,displayName:n,picture:s||Fe.a})}))}}var oa=Object(l.b)(e=>({files:e.files,me:e.me,peers:e.peers}),null,null,{areStatesEqual:(e,a)=>a.files===e.files&&a.me===e.me&&a.peers===e.peers})(Object(i.a)(e=>({root:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",overflowY:"auto",padding:e.spacing(1)}}))(Object($e.c)(ra)));var la=Object(be.b)(Object(l.b)(()=>{const e=ce(Se);return a=>({isFileSharingModerator:e(a),room:a.room})},null,null,{areStatesEqual:(e,a)=>a.room===e.room&&a.me===e.me&&a.peers===e.peers})(Object(i.a)(e=>({root:{display:"flex",padding:e.spacing(1),boxShadow:"0 2px 5px 2px rgba(0, 0, 0, 0.2)",backgroundColor:"rgba(255, 255, 255, 1)"},listheader:{padding:e.spacing(1),fontWeight:"bolder"},actionButton:{marginLeft:"auto"}}))(e=>{const a=Object(de.a)(),t=e.roomClient,r=e.isFileSharingModerator,l=e.room,n=e.classes;return r?o.a.createElement("ul",{className:n.root},o.a.createElement("li",{className:n.listheader},o.a.createElement(E.a,{id:"room.moderatoractions",defaultMessage:"Moderator actions"})),o.a.createElement(Oe.a,{"aria-label":a.formatMessage({id:"room.clearFileSharing",defaultMessage:"Clear files"}),className:n.actionButton,variant:"contained",color:"secondary",disabled:l.clearFileSharingInProgress,onClick:()=>t.clearFileSharing()},o.a.createElement(E.a,{id:"room.clearFileSharing",defaultMessage:"Clear files"}))):null})));var na=Object(be.b)(Object(l.b)(()=>{const e=ce(Ce);return a=>({canShareFiles:a.me.canShareFiles,browser:a.me.browser,tabOpen:"files"===a.toolarea.currentToolTab,canShare:e(a)})},null,null,{areStatesEqual:(e,a)=>a.room===e.room&&a.me.browser===e.me.browser&&a.me.roles===e.me.roles&&a.me.canShareFiles===e.me.canShareFiles&&a.peers===e.peers&&a.toolarea.currentToolTab===e.toolarea.currentToolTab})(Object(i.a)(e=>({root:{display:"flex",flexDirection:"column",width:"100%",height:"100%"},input:{display:"none"},button:{margin:e.spacing(1)},shareButtonsWrapper:{display:"flex"}}))(e=>{const a=Object(de.a)(),t=function(){var a=Object(Je.a)(Xe.a.mark((function a(t){return Xe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t.target.files.length>0)){a.next=3;break}return a.next=3,e.roomClient.shareFiles(t.target.files);case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),r=e.canShareFiles,l=e.browser,n=e.canShare,s=e.classes,i=r?a.formatMessage({id:"label.shareFile",defaultMessage:"Share file"}):a.formatMessage({id:"label.fileSharingUnsupported",defaultMessage:"File sharing not supported"}),c=r?a.formatMessage({id:"label.shareGalleryFile",defaultMessage:"Share image"}):a.formatMessage({id:"label.fileSharingUnsupported",defaultMessage:"File sharing not supported"});return o.a.createElement(he.a,{className:s.root},o.a.createElement(la,null),o.a.createElement("div",{className:s.shareButtonsWrapper},o.a.createElement("input",{className:s.input,type:"file",disabled:!n,onChange:t,onClick:e=>e.target.value=null,id:"share-files-button"}),o.a.createElement("input",{className:s.input,type:"file",disabled:!n,onChange:t,accept:"image/*",id:"share-files-gallery-button"}),o.a.createElement("label",{htmlFor:"share-files-button"},o.a.createElement(Oe.a,{variant:"contained",component:"span",className:s.button,disabled:!r||!n},i)),"mobile"===l.platform&&r&&n&&o.a.createElement("label",{htmlFor:"share-files-gallery-button"},o.a.createElement(Oe.a,{variant:"contained",component:"span",className:s.button,disabled:!r||!n},c))),o.a.createElement(oa,null))}))),sa=t(576),ia=t(1),ca=t(84),da=t(625),ma=t(337),ua=t.n(ma),pa=t(338),ga=t.n(pa),ha=t(339),ba=t.n(ha),fa=t(340),va=t.n(fa),Ea=t(405),wa=t.n(Ea),ya=t(406),Ma=t.n(ya),Ca=t(335),Sa=t.n(Ca),ka=t(336),Oa=t.n(ka),Ta=t(539),Na=t.n(Ta),xa=t(404),Pa=t.n(xa),La=t(538),ja=t.n(La);var Aa=Object(be.b)(Object(l.b)((e,{id:a})=>{const t=ie();return e=>Object(ia.a)({peer:e.peers[a]},t(e,a))},null,null,{areStatesEqual:(e,a)=>a.peers===e.peers&&a.consumers===e.consumers})(Object(i.a)(e=>({root:{width:"100%",overflow:"hidden",cursor:"auto",display:"flex"},avatar:{borderRadius:"50%",height:"2rem",marginTop:e.spacing(.5)},peerInfo:{fontSize:"1rem",display:"flex",paddingLeft:e.spacing(1),flexGrow:1,alignItems:"center"},indicators:{display:"flex",padding:e.spacing(1)},buttons:{padding:e.spacing(1)},green:{color:"rgba(0, 153, 0, 1)",marginLeft:e.spacing(2)}}))(e=>{const a=Object(de.a)(),t=e.roomClient,r=e.isModerator,l=e.spotlight,n=e.peer,s=e.micConsumer,i=e.webcamConsumer,c=e.screenConsumer,d=e.children,m=e.classes,u=Boolean(i)&&!i.locallyPaused&&!i.remotelyPaused,p=Boolean(s)&&!s.locallyPaused&&!s.remotelyPaused,g=Boolean(c)&&!c.locallyPaused&&!c.remotelyPaused,h=n.picture||Fe.a;return o.a.createElement("div",{className:m.root},o.a.createElement("img",{alt:"Peer avatar",className:m.avatar,src:h}),o.a.createElement("div",{className:m.peerInfo},n.displayName),n.raisedHand&&o.a.createElement(Ue.a,{className:m.buttons,style:{color:ca.a[500]},disabled:!r||n.raisedHandInProgress,onClick:e=>{e.stopPropagation(),t.lowerPeerHand(n.id)}},o.a.createElement(Pa.a,null)),l&&o.a.createElement(Ue.a,{className:m.buttons,style:{color:ca.a[500]},disabled:!0},o.a.createElement(ja.a,null)),c&&l&&o.a.createElement(da.a,{title:a.formatMessage({id:"tooltip.muteScreenSharing",defaultMessage:"Mute participant share"}),placement:"bottom"},o.a.createElement(Ue.a,{"aria-label":a.formatMessage({id:"tooltip.muteScreenSharing",defaultMessage:"Mute participant share"}),color:g?"primary":"secondary",disabled:n.peerScreenInProgress,className:m.buttons,onClick:e=>{e.stopPropagation(),g?t.modifyPeerConsumer(n.id,"screen",!0):t.modifyPeerConsumer(n.id,"screen",!1)}},g?o.a.createElement(Sa.a,null):o.a.createElement(Oa.a,null))),l&&o.a.createElement(da.a,{title:a.formatMessage({id:"tooltip.muteParticipantVideo",defaultMessage:"Mute participant video"}),placement:"bottom"},o.a.createElement(Ue.a,{"aria-label":a.formatMessage({id:"tooltip.muteParticipantVideo",defaultMessage:"Mute participant video"}),color:u?"primary":"secondary",disabled:n.peerVideoInProgress,className:m.buttons,onClick:e=>{e.stopPropagation(),u?t.modifyPeerConsumer(n.id,"webcam",!0):t.modifyPeerConsumer(n.id,"webcam",!1)}},u?o.a.createElement(ua.a,null):o.a.createElement(ga.a,null))),o.a.createElement(da.a,{title:a.formatMessage({id:"tooltip.muteParticipant",defaultMessage:"Mute participant"}),placement:"bottom"},o.a.createElement(Ue.a,{"aria-label":a.formatMessage({id:"tooltip.muteParticipant",defaultMessage:"Mute participant"}),color:p?"primary":"secondary",disabled:n.peerAudioInProgress,className:m.buttons,onClick:e=>{e.stopPropagation(),p?t.modifyPeerConsumer(n.id,"mic",!0):t.modifyPeerConsumer(n.id,"mic",!1)}},p?o.a.createElement(wa.a,null):o.a.createElement(Ma.a,null))),r&&o.a.createElement(da.a,{title:a.formatMessage({id:"tooltip.kickParticipant",defaultMessage:"Kick out participant"}),placement:"bottom"},o.a.createElement(Ue.a,{"aria-label":a.formatMessage({id:"tooltip.kickParticipant",defaultMessage:"Kick out participant"}),disabled:n.peerKickInProgress,className:m.buttons,color:"secondary",onClick:e=>{e.stopPropagation(),t.kickPeer(n.id)}},o.a.createElement(Na.a,null))),r&&s&&o.a.createElement(da.a,{title:a.formatMessage({id:"tooltip.muteParticipantAudioModerator",defaultMessage:"Mute participant audio globally"}),placement:"bottom"},o.a.createElement(Ue.a,{className:m.buttons,style:{color:ca.a[500]},disabled:!r||n.stopPeerAudioInProgress,onClick:e=>{e.stopPropagation(),t.mutePeer(n.id)}},s.remotelyPaused?o.a.createElement(va.a,null):o.a.createElement(ba.a,null))),r&&i&&o.a.createElement(da.a,{title:a.formatMessage({id:"tooltip.muteParticipantVideoModerator",defaultMessage:"Mute participant video globally"}),placement:"bottom"},o.a.createElement(Ue.a,{className:m.buttons,style:{color:ca.a[500]},disabled:!r||n.stopPeerVideoInProgress,onClick:e=>{e.stopPropagation(),t.stopPeerVideo(n.id)}},i.remotelyPaused?o.a.createElement(ga.a,null):o.a.createElement(ua.a,null))),r&&c&&o.a.createElement(da.a,{title:a.formatMessage({id:"tooltip.muteScreenSharingModerator",defaultMessage:"Mute participant screen share globally"}),placement:"bottom"},o.a.createElement(Ue.a,{className:m.buttons,style:{color:ca.a[500]},disabled:!r||n.stopPeerScreenSharingInProgress,onClick:e=>{e.stopPropagation(),t.stopPeerScreenSharing(n.id)}},c.remotelyPaused?o.a.createElement(Oa.a,null):o.a.createElement(Sa.a,null))),d)})));var Ia=Object(be.b)(Object(l.b)(e=>({me:e.me,settings:e.settings}),null,null,{areStatesEqual:(e,a)=>a.me===e.me&&a.settings===e.settings})(Object(i.a)(e=>({root:{width:"100%",overflow:"hidden",cursor:"auto",display:"flex"},avatar:{borderRadius:"50%",height:"2rem",marginTop:e.spacing(.5)},peerInfo:{fontSize:"1rem",display:"flex",paddingLeft:e.spacing(1),flexGrow:1,alignItems:"center"},buttons:{padding:e.spacing(1)},green:{color:"rgba(0, 153, 0, 1)"}}))(e=>{const a=Object(de.a)(),t=e.roomClient,r=e.me,l=e.settings,n=e.classes,s=r.picture||Fe.a;return o.a.createElement("div",{className:n.root},o.a.createElement("img",{alt:"My avatar",className:n.avatar,src:s}),o.a.createElement("div",{className:n.peerInfo},l.displayName),o.a.createElement(da.a,{title:a.formatMessage({id:"tooltip.raisedHand",defaultMessage:"Raise hand"}),placement:"bottom"},o.a.createElement(Ue.a,{"aria-label":a.formatMessage({id:"tooltip.raisedHand",defaultMessage:"Raise hand"}),className:Pe()(r.raisedHand?n.green:null,n.buttons),disabled:r.raisedHandInProgress,color:"primary",onClick:e=>{e.stopPropagation(),t.setRaisedHand(!r.raisedHand)}},o.a.createElement(Pa.a,null))))})));var Ra=Object(be.b)(Object(l.b)(e=>({room:e.room}),null,null,{areStatesEqual:(e,a)=>a.room===e.room})(Object(i.a)(e=>({root:{padding:e.spacing(1),display:"flex"},divider:{marginLeft:e.spacing(2)}}))(e=>{const a=Object(de.a)(),t=e.roomClient,r=e.room,l=e.classes;return o.a.createElement("div",{className:l.root},o.a.createElement(Oe.a,{"aria-label":a.formatMessage({id:"room.muteAll",defaultMessage:"Mute all"}),variant:"contained",color:"secondary",disabled:r.muteAllInProgress,onClick:()=>t.muteAllPeers()},o.a.createElement(E.a,{id:"room.muteAll",defaultMessage:"Mute all"})),o.a.createElement("div",{className:l.divider}),o.a.createElement(Oe.a,{"aria-label":a.formatMessage({id:"room.stopAllVideo",defaultMessage:"Stop all video"}),variant:"contained",color:"secondary",disabled:r.stopAllVideoInProgress,onClick:()=>t.stopAllPeerVideo()},o.a.createElement(E.a,{id:"room.stopAllVideo",defaultMessage:"Stop all video"})),o.a.createElement("div",{className:l.divider}),o.a.createElement(Oe.a,{"aria-label":a.formatMessage({id:"room.stopAllScreenSharing",defaultMessage:"Stop all screen sharing"}),variant:"contained",color:"secondary",disabled:r.stopAllScreenSharingInProgress,onClick:()=>t.stopAllPeerScreenSharing()},o.a.createElement(E.a,{id:"room.stopAllScreenSharing",defaultMessage:"Stop all screen sharing"})),o.a.createElement("div",{className:l.divider}),o.a.createElement(Oe.a,{"aria-label":a.formatMessage({id:"room.closeMeeting",defaultMessage:"Close meeting"}),variant:"contained",color:"secondary",disabled:r.closeMeetingInProgress,onClick:()=>t.closeMeeting()},o.a.createElement(E.a,{id:"room.closeMeeting",defaultMessage:"Close meeting"})))})));var Ba=Object(l.b)((e,a)=>e=>e.peerVolumes[a.id]>e.settings.noiseThreshold?{volume:Math.round((e.peerVolumes[a.id]+100)/10)}:{volume:0})(Object(i.a)(()=>({volumeLarge:{position:"absolute",top:0,bottom:0,right:2,width:10,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},largeBar:{width:6,borderRadius:6,background:"rgba(yellow, 0.65)",transitionProperty:"height background-color",transitionDuration:"0.25s","&.level0":{height:0,backgroundColor:"rgba(255, 255, 0, 0.65)"},"&.level1":{height:"10%",backgroundColor:"rgba(255, 255, 0, 0.65)"},"&.level2":{height:"20%",backgroundColor:"rgba(255, 255, 0, 0.65)"},"&.level3":{height:"30%",backgroundColor:"rgba(255, 255, 0, 0.65)"},"&.level4":{height:"40%",backgroundColor:"rgba(255, 165, 0, 0.65)"},"&.level5":{height:"50%",backgroundColor:"rgba(255, 165, 0, 0.65)"},"&.level6":{height:"60%",backgroundColor:"rgba(255, 165, 0, 0.65)"},"&.level7":{height:"70%",backgroundColor:"rgba(255, 100, 0, 0.65)"},"&.level8":{height:"80%",backgroundColor:"rgba(255, 60, 0, 0.65)"},"&.level9":{height:"90%",backgroundColor:"rgba(255, 30, 0, 0.65)"},"&.level10":{height:"100%",backgroundColor:"rgba(255, 0, 0, 0.65)"}},volumeSmall:{float:"right",display:"flex",flexDirection:"row",justifyContent:"flex-start",width:"1vmin",position:"relative",backgroundSize:"75%"},smallBar:{flex:"0 0 auto",backgroundSize:"75%",backgroundRepeat:"no-repeat",backgroundColor:"rgba(0, 0, 0, 1)",cursor:"pointer",transitionProperty:"opacity, background-color",width:3,borderRadius:2,transitionDuration:"0.25s",position:"absolute",top:"50%",transform:"translateY(-50%)","&.level0":{height:0},"&.level1":{height:"0.2vh"},"&.level2":{height:"0.4vh"},"&.level3":{height:"0.6vh"},"&.level4":{height:"0.8vh"},"&.level5":{height:"1.0vh"},"&.level6":{height:"1.2vh"},"&.level7":{height:"1.4vh"},"&.level8":{height:"1.6vh"},"&.level9":{height:"1.8vh"},"&.level10":{height:"2.0vh"}}}))(e=>{const a=e.small,t=e.volume,r=e.classes;return o.a.createElement("div",{className:a?r.volumeSmall:r.volumeLarge},o.a.createElement("div",{className:Pe()(a?r.smallBar:r.largeBar,"level".concat(t))}))}));class Da extends o.a.PureComponent{componentDidMount(){this.node.scrollTop=this.node.scrollHeight}getSnapshotBeforeUpdate(){return this.node.scrollTop+this.node.offsetHeight===this.node.scrollHeight}componentDidUpdate(e,a,t){t&&(this.node.scrollTop=this.node.scrollHeight)}render(){const e=this.props,a=e.roomClient,t=e.advancedMode,r=e.isModerator,l=e.participants,n=e.spotlights,s=e.selectedPeerId,i=e.classes;return o.a.createElement("div",{className:i.root,ref:e=>{this.node=e}},r&&o.a.createElement("ul",{className:i.list},o.a.createElement("li",{className:i.listheader},o.a.createElement(E.a,{id:"room.moderatoractions",defaultMessage:"Moderator actions"})),o.a.createElement(Ra,null)),o.a.createElement("ul",{className:i.list},o.a.createElement("li",{className:i.listheader},o.a.createElement(E.a,{id:"room.me",defaultMessage:"Me"})),o.a.createElement(Ia,null)),o.a.createElement("ul",{className:i.list},o.a.createElement("li",{className:i.listheader},o.a.createElement(E.a,{id:"label.participants",defaultMessage:"Participants"})),o.a.createElement(sa.b,{flipKey:l},l.map(e=>o.a.createElement(sa.a,{key:e.id,flipId:e.id},o.a.createElement("li",{key:e.id,className:Pe()(i.listItem,{selected:e.id===s}),onClick:()=>a.setSelectedPeer(e.id)},n.includes(e.id)?o.a.createElement(Aa,{id:e.id,advancedMode:t,isModerator:r,spotlight:!0},o.a.createElement(Ba,{small:!0,id:e.id})):o.a.createElement(Aa,{id:e.id,advancedMode:t,isModerator:r})))))))}}var Va=Object(be.b)(Object(l.b)(()=>{const e=ce(ke);return a=>({isModerator:e(a),participants:re(a),spotlights:a.room.spotlights,selectedPeerId:a.room.selectedPeerId})},null,null,{areStatesEqual:(e,a)=>a.room===e.room&&a.me.roles===e.me.roles&&a.peers===e.peers})(Object(i.a)(e=>({root:{width:"100%",overflowY:"auto",padding:e.spacing(1)},list:{listStyleType:"none",padding:e.spacing(1),boxShadow:"0 2px 5px 2px rgba(0, 0, 0, 0.2)",backgroundColor:"rgba(255, 255, 255, 1)"},listheader:{fontWeight:"bolder"},listItem:{width:"100%",overflow:"hidden",cursor:"pointer","&.selected":{backgroundColor:"rgba(55, 126, 255, 1)"},"&:not(:last-child)":{borderBottom:"1px solid #CBCBCB"}}}))(Da))),Fa=t(540),za=t.n(Fa),Ha=t(541),Wa=t.n(Ha);const qa=["chat","files","users"],Ua={setToolTab:u};var _a=Object(l.b)(e=>({currentToolTab:e.toolarea.currentToolTab,unreadMessages:e.toolarea.unreadMessages,unreadFiles:e.toolarea.unreadFiles,raisedHands:le(e)}),Ua,null,{areStatesEqual:(e,a)=>a.toolarea.currentToolTab===e.toolarea.currentToolTab&&a.toolarea.unreadMessages===e.toolarea.unreadMessages&&a.toolarea.unreadFiles===e.toolarea.unreadFiles&&a.peers===e.peers})(Object(i.a)(e=>({root:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:e.palette.background.paper},appBar:{display:"flex",flexDirection:"row"},tabsHeader:{flexGrow:1}}),{withTheme:!0})(e=>{const a=Object(de.a)(),t=e.currentToolTab,r=e.unreadMessages,l=e.unreadFiles,n=e.raisedHands,s=e.closeDrawer,i=e.setToolTab,c=e.classes,d=e.theme;return o.a.createElement("div",{className:c.root},o.a.createElement(me.a,{position:"static",color:"default",className:c.appBar},o.a.createElement(ue.a,{className:c.tabsHeader,value:qa.indexOf(t),onChange:(e,a)=>i(qa[a]),indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},o.a.createElement(pe.a,{label:o.a.createElement(ge.a,{color:"secondary",badgeContent:r},a.formatMessage({id:"label.chat",defaultMessage:"Chat"}))}),o.a.createElement(pe.a,{label:o.a.createElement(ge.a,{color:"secondary",badgeContent:l},a.formatMessage({id:"label.filesharing",defaultMessage:"File sharing"}))}),o.a.createElement(pe.a,{label:o.a.createElement(ge.a,{color:"secondary",badgeContent:n},a.formatMessage({id:"label.participants",defaultMessage:"Participants"}))})),o.a.createElement(Ue.a,{onClick:s},"ltr"===d.direction?o.a.createElement(za.a,null):o.a.createElement(Wa.a,null))),"chat"===t&&o.a.createElement(Ye,null),"files"===t&&o.a.createElement(na,null),"users"===t&&o.a.createElement(Va,null))})),Ga=t(266),Ka=t(542);class Ya extends o.a.Component{render(){const e=this.props,a=e.value,t=e.propName,r=e.className,l=e.classLoading,n=e.classInvalid,s=e.editProps,i=e.onChange;return o.a.createElement(Ka.RIEInput,{value:a,propName:t,className:r,classLoading:l,classInvalid:n,shouldBlockWhileLoading:!0,editProps:s,change:e=>i(e)})}shouldComponentUpdate(e){return e.value!==this.props.value}}var Qa=t(70),Xa=t(82),Ja=t(83),$a=t(612),Za=t(550),et=t.n(Za),at=t(551),tt=t.n(at),rt=t(552),ot=t.n(rt),lt=t(553),nt=t.n(lt),st=t(554),it=t.n(st);const ct=new Qa.a("VideoView");class dt extends o.a.PureComponent{constructor(e){super(e),this.state={videoWidth:null,videoHeight:null},this._audioTrack=null,this._videoTrack=null,this._videoResolutionTimer=null}render(){const e=this.props,a=e.isMe,t=e.isScreen,r=e.isExtraVideo,l=e.showQuality,n=e.displayName,s=e.showPeerInfo,i=e.videoContain,c=e.advancedMode,d=e.videoVisible,m=e.videoMultiLayer,u=e.audioScore,p=e.videoScore,g=e.consumerCurrentSpatialLayer,h=e.consumerCurrentTemporalLayer,b=e.consumerPreferredSpatialLayer,f=e.consumerPreferredTemporalLayer,v=e.audioCodec,E=e.videoCodec,w=e.onChangeDisplayName,y=e.children,M=e.classes,C=e.netInfo,S=this.state,k=S.videoWidth,O=S.videoHeight;let T=null;if(l&&(T=o.a.createElement(et.a,{style:{color:Xa.a[500]}}),p||u)){const e=p||u;switch(a?e.score:e.producerScore){case 0:case 1:T=o.a.createElement(tt.a,{style:{color:Xa.a[500]}});break;case 2:case 3:T=o.a.createElement(ot.a,{style:{color:Xa.a[500]}});break;case 4:case 5:case 6:T=o.a.createElement(nt.a,{style:{color:Ja.a[500]}});break;case 7:case 8:case 9:T=o.a.createElement(it.a,{style:{color:$a.a[500]}});break;case 10:T=null}}return o.a.createElement("div",{className:M.root},o.a.createElement("div",{className:M.info},o.a.createElement("div",{className:M.media},o.a.createElement("div",{className:Pe()(M.box,"left",{hidden:!c})},v&&o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"AcodL"},"Acod: "),o.a.createElement("span",{className:"Acod"},v)),E&&o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"VcodL"},"Vcod: "),o.a.createElement("span",{className:"Vcod"},E)),d&&null!==k&&o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"ResL"},"Res: "),o.a.createElement("span",{className:"Res"},k,"x",O)),a&&!t&&!r&&C.recv&&C.send&&C.send.iceSelectedTuple&&o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"RecvL"},"Recv: "),o.a.createElement("span",{className:"RecvBps"},(C.recv.sendBitrate/1024/1024).toFixed(2),"Mb/s"),o.a.createElement("span",{className:"RecvSum"},(C.recv.bytesSent/1024/1024).toFixed(2),"MB"),o.a.createElement("span",{className:"SendL"},"Send: "),o.a.createElement("span",{className:"SendBps"},(C.send.recvBitrate/1024/1024).toFixed(2),"Mb/s"),o.a.createElement("span",{className:"SendSum"},(C.send.bytesReceived/1024/1024).toFixed(2),"MB"),o.a.createElement("span",{className:"IPlocL"},"IPloc: "),o.a.createElement("span",{className:"IPloc"},C.send.iceSelectedTuple.remoteIp),o.a.createElement("span",{className:"IPsrvL"},"IPsrv: "),o.a.createElement("span",{className:"IPsrv"},C.send.iceSelectedTuple.localIp)),m&&o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"STLcurrL"},"STLcurr: "),o.a.createElement("span",{className:"STLcurr"},g," ",h),o.a.createElement("span",{className:"STLprefL"},"STLpref: "),o.a.createElement("span",{className:"STLpref"},b," ",f))),l&&o.a.createElement("div",{className:Pe()(M.box,"right")},T)),s&&o.a.createElement("div",{className:M.peer},o.a.createElement("div",{className:M.box},a?o.a.createElement(o.a.Fragment,null,o.a.createElement(Ya,{value:n,propName:"newDisplayName",className:M.displayNameEdit,classLoading:"loading",classInvalid:"invalid",shouldBlockWhileLoading:!0,editProps:{maxLength:30,autoCorrect:"off",spellCheck:!1},onChange:({newDisplayName:e})=>w(e)})):o.a.createElement("span",{className:M.displayNameStatic},n)))),o.a.createElement("video",{ref:"videoElement",className:Pe()(M.video,{hidden:!d,isMe:a&&!t,contain:i}),autoPlay:!0,playsInline:!0,muted:!0,controls:!1}),o.a.createElement("audio",{ref:"audioElement",autoPlay:!0,playsInline:!0,muted:a,controls:!1}),y)}componentDidMount(){const e=this.props,a=e.videoTrack,t=e.audioTrack;this._setTracks(a,t)}componentWillUnmount(){clearInterval(this._videoResolutionTimer);const e=this.refs.videoElement;e&&(e.oncanplay=null,e.onplay=null,e.onpause=null)}componentDidUpdate(e){if(e!==this.props){const e=this.props,a=e.videoTrack,t=e.audioTrack;this._setTracks(a,t)}}_setTracks(e,a){if(this._videoTrack===e&&this._audioTrack===a)return;this._videoTrack=e,this._audioTrack=a,clearInterval(this._videoResolutionTimer),this._hideVideoResolution();const t=this.refs,r=t.videoElement,o=t.audioElement;if(e){const a=new MediaStream;a.addTrack(e),r.srcObject=a,r.oncanplay=()=>this.setState({videoCanPlay:!0}),r.onplay=()=>{o.play().catch(e=>ct.warn('audioElement.play() [error:"%o]',e))},r.play().catch(e=>ct.warn('videoElement.play() [error:"%o]',e)),this._showVideoResolution()}else r.srcObject=null;if(a){const e=new MediaStream;e.addTrack(a),o.srcObject=e,o.play().catch(e=>ct.warn('audioElement.play() [error:"%o]',e))}else o.srcObject=null}_showVideoResolution(){this._videoResolutionTimer=setInterval(()=>{const e=this.state,a=e.videoWidth,t=e.videoHeight,r=this.refs.videoElement;r.videoWidth===a&&r.videoHeight===t||this.setState({videoWidth:r.videoWidth,videoHeight:r.videoHeight})},1e3)}_hideVideoResolution(){this.setState({videoWidth:null,videoHeight:null})}}var mt=Object(i.a)(e=>({root:{position:"relative",flex:"100 100 auto",height:"100%",width:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},video:{flex:"100 100 auto",height:"100%",width:"100%",objectFit:"cover",userSelect:"none",transitionProperty:"opacity",transitionDuration:".15s",backgroundColor:"var(--peer-video-bg-color)","&.isMe":{transform:"scaleX(-1)"},"&.hidden":{opacity:0,transitionDuration:"0s"},"&.loading":{filter:"blur(5px)"},"&.contain":{objectFit:"contain",backgroundColor:"rgba(0, 0, 0, 1)"}},info:{width:"100%",height:"100%",padding:e.spacing(1),position:"absolute",zIndex:10,display:"flex",flexDirection:"column",justifyContent:"space-between"},media:{display:"flex",transitionProperty:"opacity",transitionDuration:".15s"},box:{padding:e.spacing(.5),borderRadius:2,userSelect:"none",margin:0,color:"rgba(255, 255, 255, 0.7)",fontSize:"0.8em","&.left":{backgroundColor:"rgba(0, 0, 0, 0.25)",display:"grid",gap:"1px 5px",gridTemplateAreas:'\t\t\t\t"AcodL\t\tAcod\tAcod\tAcod\tAcod" \t\t\t\t\t"VcodL\t\tVcod\tVcod\tVcod\tVcod" \t\t\t\t\t"ResL\t\tRes\t\tRes\t\tRes\t\tRes" \t\t\t\t\t"RecvL\t\tRecvBps RecvBps RecvSum RecvSum" \t\t\t\t\t"SendL\t\tSendBps SendBps SendSum SendSum" \t\t\t\t\t"IPlocL\t\tIPloc\tIPloc\tIPloc\tIPloc" \t\t\t\t\t"IPsrvL\t\tIPsrv\tIPsrv\tIPsrv\tIPsrv" \t\t\t\t\t"STLcurrL\tSTLcurr\tSTLcurr STLcurr STLcurr" \t\t\t\t\t"STLprefL\tSTLpref STLpref STLpref STLpref"',"& .AcodL":{gridArea:"AcodL"},"& .Acod":{gridArea:"Acod"},"& .VcodL":{gridArea:"VcodL"},"& .Vcod":{gridArea:"Vcod"},"& .ResL":{gridArea:"ResL"},"& .Res":{gridArea:"Res"},"& .RecvL":{gridArea:"RecvL"},"& .RecvBps":{gridArea:"RecvBps",justifySelf:"flex-end"},"& .RecvSum":{gridArea:"RecvSum",justifySelf:"flex-end"},"& .SendL":{gridArea:"SendL"},"& .SendBps":{gridArea:"SendBps",justifySelf:"flex-end"},"& .SendSum":{gridArea:"SendSum",justifySelf:"flex-end"},"& .IPlocL":{gridArea:"IPlocL"},"& .IPloc":{gridArea:"IPloc"},"& .IPsrvL":{gridArea:"IPsrvL"},"& .IPsrv":{gridArea:"IPsrv"},"& .STLcurrL":{gridArea:"STLcurrL"},"& .STLcurr":{gridArea:"STLcurr"},"& .STLprefL":{gridArea:"STLprefL"},"& .STLpref":{gridArea:"STLpref"}},"&.right":{marginLeft:"auto",width:30},"&.hidden":{opacity:0,transitionDuration:"0s"}},peer:{display:"flex"},displayNameEdit:{fontSize:14,fontWeight:400,color:"rgba(255, 255, 255, 0.85)",border:"none",borderBottom:"1px solid #aeff00",backgroundColor:"transparent"},displayNameStatic:{userSelect:"none",cursor:"text",fontSize:14,fontWeight:400,color:"rgba(255, 255, 255, 0.85)","&:hover":{backgroundColor:"rgb(174, 255, 0, 0.25)"}}}))(dt),ut=t(613),pt=t(555),gt=t.n(pt),ht=t(342),bt=t.n(ht);var ft=Object(be.b)(Object(l.b)((e,{id:a})=>{const t=ie();return e=>Object(ia.a)(Object(ia.a)({peer:e.peers[a]},t(e,a)),{},{windowConsumer:e.room.windowConsumer,activeSpeaker:a===e.room.activeSpeakerId,browser:e.me.browser})},e=>({toggleConsumerFullscreen:a=>{a&&e(m.E(a.id))},toggleConsumerWindow:a=>{a&&e(m.F(a.id))}}),null,{areStatesEqual:(e,a)=>a.peers===e.peers&&a.consumers===e.consumers&&a.room.activeSpeakerId===e.room.activeSpeakerId&&a.room.windowConsumer===e.room.windowConsumer&&a.me.browser===e.me.browser})(Object(i.a)(e=>({root:{flex:"0 0 auto",boxShadow:"var(--peer-shadow)",border:"var(--peer-border)",touchAction:"none",backgroundColor:"var(--peer-bg-color)",backgroundImage:"var(--peer-empty-avatar)",backgroundPosition:"bottom",backgroundSize:"auto 85%",backgroundRepeat:"no-repeat","&.hover":{boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.05) inset, 0px 0px 8px rgba(82, 168, 236, 0.9)"},"&.active-speaker":{borderColor:"var(--active-speaker-border-color)"},"&:not(.active-speaker):not(.screen)":{},"&.webcam":{order:4},"&.screen":{order:3}},fab:{margin:e.spacing(1)},smallContainer:{backgroundColor:"rgba(255, 255, 255, 0.9)",margin:"0.5vmin",padding:"0.5vmin",boxShadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",pointerEvents:"auto",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&:hover":{backgroundColor:"rgba(213, 213, 213, 1)"}},viewContainer:{position:"relative",width:"100%",height:"100%"},controls:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end",padding:e.spacing(1),zIndex:21,opacity:0,transition:"opacity 0.3s",touchAction:"none","&.hover":{opacity:1}},videoInfo:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(1),zIndex:20,"& p":{padding:"6px 12px",borderRadius:6,userSelect:"none",pointerEvents:"none",fontSize:20,color:"rgba(255, 255, 255, 0.55)"}}}),{withTheme:!0})(e=>{const a=Object(r.useState)(!1),t=Object(We.a)(a,2),l=t[0],n=t[1],s=Object(de.a)();let i=null;const c=e.roomClient,d=e.advancedMode,m=e.peer,u=e.activeSpeaker,p=e.browser,g=e.micConsumer,h=e.webcamConsumer,b=e.screenConsumer,f=e.extraVideoConsumers,v=e.toggleConsumerFullscreen,w=e.toggleConsumerWindow,y=e.spacing,M=e.style,C=e.smallContainer,S=e.windowConsumer,k=e.classes,O=e.theme,T=Boolean(g)&&!g.locallyPaused&&!g.remotelyPaused,N=Boolean(h)&&!h.locallyPaused&&!h.remotelyPaused,x=Boolean(b)&&!b.locallyPaused&&!b.remotelyPaused,P=Object(Ga.a)(O.breakpoints.down("sm")),L=Object(ia.a)({margin:y},M);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Pe()(k.root,"webcam",l?"hover":null,u?"active-speaker":null),onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),onTouchStart:()=>{i&&clearTimeout(i),n(!0)},onTouchEnd:()=>{i&&clearTimeout(i),i=setTimeout(()=>{n(!1)},2e3)},style:L},o.a.createElement("div",{className:Pe()(k.viewContainer)},!N&&o.a.createElement("div",{className:k.videoInfo},o.a.createElement("p",null,o.a.createElement(E.a,{id:"room.videoPaused",defaultMessage:"This video is paused"}))),o.a.createElement("div",{className:Pe()(k.controls,l?"hover":null),onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),onTouchStart:()=>{i&&clearTimeout(i),n(!0)},onTouchEnd:()=>{i&&clearTimeout(i),i=setTimeout(()=>{n(!1)},2e3)}},o.a.createElement(da.a,{title:s.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),placement:P?"top":"left"},C?o.a.createElement(Ue.a,{"aria-label":s.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:k.smallContainer,disabled:!g,color:"primary",size:"small",onClick:()=>{T?c.modifyPeerConsumer(m.id,"mic",!0):c.modifyPeerConsumer(m.id,"mic",!1)}},T?o.a.createElement(wa.a,null):o.a.createElement(Ma.a,null)):o.a.createElement(ut.a,{"aria-label":s.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:k.fab,disabled:!g,color:T?"default":"secondary",size:"large",onClick:()=>{T?c.modifyPeerConsumer(m.id,"mic",!0):c.modifyPeerConsumer(m.id,"mic",!1)}},T?o.a.createElement(wa.a,null):o.a.createElement(Ma.a,null))),"mobile"!==p.platform&&o.a.createElement(da.a,{title:s.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),placement:P?"top":"left"},C?o.a.createElement(Ue.a,{"aria-label":s.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:k.smallContainer,disabled:!N||S===h.id,size:"small",color:"primary",onClick:()=>{w(h)}},o.a.createElement(gt.a,null)):o.a.createElement(ut.a,{"aria-label":s.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:k.fab,disabled:!N||S===h.id,size:"large",onClick:()=>{w(h)}},o.a.createElement(gt.a,null))),o.a.createElement(da.a,{title:s.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),placement:P?"top":"left"},C?o.a.createElement(Ue.a,{"aria-label":s.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:k.smallContainer,disabled:!N,size:"small",color:"primary",onClick:()=>{v(h)}},o.a.createElement(bt.a,null)):o.a.createElement(ut.a,{"aria-label":s.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:k.fab,disabled:!N,size:"large",onClick:()=>{v(h)}},o.a.createElement(bt.a,null)))),o.a.createElement(mt,{showQuality:!0,advancedMode:d,peer:m,displayName:m.displayName,showPeerInfo:!0,consumerSpatialLayers:h?h.spatialLayers:null,consumerTemporalLayers:h?h.temporalLayers:null,consumerCurrentSpatialLayer:h?h.currentSpatialLayer:null,consumerCurrentTemporalLayer:h?h.currentTemporalLayer:null,consumerPreferredSpatialLayer:h?h.preferredSpatialLayer:null,consumerPreferredTemporalLayer:h?h.preferredTemporalLayer:null,videoMultiLayer:h&&"simple"!==h.type,videoTrack:h&&h.track,videoVisible:N,audioTrack:g&&g.track,audioCodec:g&&g.codec,videoCodec:h&&h.codec,audioScore:g?g.score:null,videoScore:h?h.score:null},o.a.createElement(Ba,{id:m.id})))),f.map(e=>o.a.createElement("div",{key:e.id,className:Pe()(k.root,"webcam",l?"hover":null,u?"active-speaker":null),onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),onTouchStart:()=>{i&&clearTimeout(i),n(!0)},onTouchEnd:()=>{i&&clearTimeout(i),i=setTimeout(()=>{n(!1)},2e3)},style:L},o.a.createElement("div",{className:Pe()(k.viewContainer)},!N&&o.a.createElement("div",{className:k.videoInfo},o.a.createElement("p",null,o.a.createElement(E.a,{id:"room.videoPaused",defaultMessage:"This video is paused"}))),o.a.createElement("div",{className:Pe()(k.controls,l?"hover":null),onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),onTouchStart:()=>{i&&clearTimeout(i),n(!0)},onTouchEnd:()=>{i&&clearTimeout(i),i=setTimeout(()=>{n(!1)},2e3)}},"mobile"!==p.platform&&o.a.createElement(da.a,{title:s.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),placement:P?"top":"left"},C?o.a.createElement(Ue.a,{"aria-label":s.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:k.smallContainer,disabled:!N||S===e.id,size:"small",color:"primary",onClick:()=>{w(e)}},o.a.createElement(gt.a,null)):o.a.createElement(ut.a,{"aria-label":s.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:k.fab,disabled:!N||S===e.id,size:"large",onClick:()=>{w(e)}},o.a.createElement(gt.a,null))),o.a.createElement(da.a,{title:s.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),placement:P?"top":"left"},C?o.a.createElement(Ue.a,{"aria-label":s.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:k.smallContainer,disabled:!N,size:"small",color:"primary",onClick:()=>{v(e)}},o.a.createElement(bt.a,null)):o.a.createElement(ut.a,{"aria-label":s.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:k.fab,disabled:!N,size:"large",onClick:()=>{v(e)}},o.a.createElement(bt.a,null)))),o.a.createElement(mt,{showQuality:!0,advancedMode:d,peer:m,displayName:m.displayName,showPeerInfo:!0,consumerSpatialLayers:e?e.spatialLayers:null,consumerTemporalLayers:e?e.temporalLayers:null,consumerCurrentSpatialLayer:e?e.currentSpatialLayer:null,consumerCurrentTemporalLayer:e?e.currentTemporalLayer:null,consumerPreferredSpatialLayer:e?e.preferredSpatialLayer:null,consumerPreferredTemporalLayer:e?e.preferredTemporalLayer:null,videoMultiLayer:e&&"simple"!==e.type,videoTrack:e&&e.track,videoVisible:N,videoCodec:e&&e.codec,videoScore:e?e.score:null})))),b&&o.a.createElement("div",{className:Pe()(k.root,"screen",l?"hover":null),onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),onTouchStart:()=>{i&&clearTimeout(i),n(!0)},onTouchEnd:()=>{i&&clearTimeout(i),i=setTimeout(()=>{n(!1)},2e3)},style:L},o.a.createElement("div",{className:Pe()(k.viewContainer)},!x&&o.a.createElement("div",{className:k.videoInfo},o.a.createElement("p",null,o.a.createElement(E.a,{id:"room.videoPaused",defaultMessage:"This video is paused"}))),o.a.createElement("div",{className:Pe()(k.controls,l?"hover":null),onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),onTouchStart:()=>{i&&clearTimeout(i),n(!0)},onTouchEnd:()=>{i&&clearTimeout(i),i=setTimeout(()=>{n(!1)},2e3)}},"mobile"!==p.platform&&o.a.createElement(da.a,{title:s.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),placement:P?"top":"left"},o.a.createElement(ut.a,{"aria-label":s.formatMessage({id:"label.newWindow",defaultMessage:"New window"}),className:k.fab,disabled:!x||S===b.id,size:C?"small":"large",onClick:()=>{w(b)}},o.a.createElement(gt.a,null))),o.a.createElement(da.a,{title:s.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),placement:P?"top":"left"},o.a.createElement(ut.a,{"aria-label":s.formatMessage({id:"label.fullscreen",defaultMessage:"Fullscreen"}),className:k.fab,disabled:!x,size:C?"small":"large",onClick:()=>{v(b)}},o.a.createElement(bt.a,null)))),o.a.createElement(mt,{showQuality:!0,advancedMode:d,videoContain:!0,consumerSpatialLayers:b?b.spatialLayers:null,consumerTemporalLayers:b?b.temporalLayers:null,consumerCurrentSpatialLayer:b?b.currentSpatialLayer:null,consumerCurrentTemporalLayer:b?b.currentTemporalLayer:null,consumerPreferredSpatialLayer:b?b.preferredSpatialLayer:null,consumerPreferredTemporalLayer:b?b.preferredTemporalLayer:null,videoMultiLayer:b&&"simple"!==b.type,videoTrack:b&&b.track,videoVisible:x,videoCodec:b&&b.codec,videoScore:b?b.score:null}))))})));var vt=Object(be.b)(Object(l.b)(()=>{const e=ce(ye);return a=>{let t;return t=a.peerVolumes[a.me.id]<a.settings.noiseThreshold?1+Math.abs(a.peerVolumes[a.me.id]-a.settings.noiseThreshold)/(-120-a.settings.noiseThreshold):0,Object(ia.a)(Object(ia.a)({me:a.me},se(a)),{},{settings:a.settings,activeSpeaker:a.me.id===a.room.activeSpeakerId,canShareScreen:e(a),transports:a.transports,noiseVolume:t})}},null,null,{areStatesEqual:(e,a)=>a.room===e.room&&a.me===e.me&&Math.round(a.peerVolumes[a.me.id])===Math.round(e.peerVolumes[e.me.id])&&a.peers===e.peers&&a.producers===e.producers&&a.settings===e.settings&&a.transports===e.transports})(Object(i.a)(e=>({root:{flex:"0 0 auto",boxShadow:"var(--peer-shadow)",border:"var(--peer-border)",backgroundColor:"var(--peer-bg-color)",backgroundImage:"var(--peer-empty-avatar)",backgroundPosition:"bottom",backgroundSize:"auto 85%",backgroundRepeat:"no-repeat","&.hover":{boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.05) inset, 0px 0px 8px rgba(82, 168, 236, 0.9)"},"&.active-speaker":{borderColor:"var(--active-speaker-border-color)"},"&:not(.active-speaker):not(.screen)":{},"&.webcam":{order:1},"&.screen":{order:2}},fab:{margin:e.spacing(1),pointerEvents:"auto"},smallContainer:{backgroundColor:"rgba(255, 255, 255, 0.9)",margin:"0.5vmin",padding:"0.5vmin",boxShadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",pointerEvents:"auto",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&:hover":{backgroundColor:"rgba(213, 213, 213, 1)"}},viewContainer:{position:"relative",width:"100%",height:"100%"},meTag:{position:"absolute",float:"left",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"rgba(255, 255, 255, 0.5)",fontSize:"7em",zIndex:30,margin:0,opacity:0,transition:"opacity 0.1s ease-in-out","&.hover":{opacity:1},"&.smallContainer":{fontSize:"3em"}},controls:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end",padding:e.spacing(1),zIndex:21,touchAction:"none",pointerEvents:"none","&.hide":{transition:"opacity 0.1s ease-in-out",opacity:0},"&.hover":{opacity:1}},ptt:{position:"absolute",float:"left",top:"25%",left:"50%",transform:"translate(-50%, 0%)",color:"rgba(255, 255, 255, 0.7)",fontSize:"1.3em",backgroundColor:"rgba(245, 0, 87, 0.70)",margin:"4px",padding:e.spacing(2),zIndex:1200,borderRadius:"20px",textAlign:"center",opacity:0,transition:"opacity 1s ease",pointerEvents:"none","&.enabled":{transition:"opacity 0.1s",opacity:1}}}),{withTheme:!0})(e=>{const a=Object(r.useState)(!1),t=Object(We.a)(a,2),l=t[0],n=t[1],s=Object(de.a)();let i=null;const c=e.roomClient,d=e.me,m=e.settings,u=e.activeSpeaker,p=e.spacing,g=e.style,h=e.smallContainer,b=e.advancedMode,f=e.micProducer,v=e.webcamProducer,w=e.screenProducer,y=e.extraVideoProducers,M=e.canShareScreen,C=e.transports,S=e.noiseVolume,k=e.classes,O=Boolean(v)&&!v.locallyPaused&&!v.remotelyPaused,T=Boolean(w)&&!w.locallyPaused&&!w.remotelyPaused;let N,x,P,L,j,A;d.canSendMic?f?f.locallyPaused||f.remotelyPaused?(N="muted",x=s.formatMessage({id:"device.unMuteAudio",defaultMessage:"Unmute audio"})):(N="on",x=s.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"})):(N="off",x=s.formatMessage({id:"device.activateAudio",defaultMessage:"Activate audio"})):(N="unsupported",x=s.formatMessage({id:"device.audioUnsupported",defaultMessage:"Audio unsupported"})),d.canSendWebcam?v?(P="on",L=s.formatMessage({id:"device.stopVideo",defaultMessage:"Stop video"})):(P="off",L=s.formatMessage({id:"device.startVideo",defaultMessage:"Start video"})):(P="unsupported",L=s.formatMessage({id:"device.videoUnsupported",defaultMessage:"Video unsupported"})),d.canShareScreen?w?(j="on",A=s.formatMessage({id:"device.stopScreenSharing",defaultMessage:"Stop screen sharing"})):(j="off",A=s.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"})):(j="unsupported",A=s.formatMessage({id:"device.screenSharingUnsupported",defaultMessage:"Screen sharing not supported"}));const I=o.a.useState(!1),R=Object(We.a)(I,2),B=R[0],D=R[1],V=()=>{D(!1)};"off"===j&&d.screenShareInProgress&&B&&V();const F={margin:p};let z=null;f&&f.score&&(z=f.score.reduce((e,a)=>e.score<a.score?e:a));let H=null;return v&&v.score&&(H=v.score.reduce((e,a)=>e.score<a.score?e:a)),Object(r.useEffect)(()=>{let e;return b&&(e=setInterval(()=>c.getTransportStats(),1e3)),()=>clearInterval(e)},[c,b]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Pe()(k.root,"webcam",l?"hover":null,u?"active-speaker":null),onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),onTouchStart:()=>{i&&clearTimeout(i),n(!0)},onTouchEnd:()=>{i&&clearTimeout(i),i=setTimeout(()=>{n(!1)},2e3)},style:F},"mobile"!==d.browser.platform&&h&&o.a.createElement("div",{className:Pe()(k.ptt,"muted"===N&&d.isSpeaking?"enabled":null)},o.a.createElement(E.a,{id:"me.mutedPTT",defaultMessage:"You are muted, hold down SPACE-BAR to talk"})),o.a.createElement("div",{className:k.viewContainer,style:g},"mobile"!==d.browser.platform&&!h&&o.a.createElement("div",{className:Pe()(k.ptt,"muted"===N&&d.isSpeaking?"enabled":null)},o.a.createElement(E.a,{id:"me.mutedPTT",defaultMessage:"You are muted, hold down SPACE-BAR to talk"})),o.a.createElement("p",{className:Pe()(k.meTag,l?"hover":null,h?"smallContainer":null)},o.a.createElement(E.a,{id:"room.me",defaultMessage:"ME"})),!m.buttonControlBar&&o.a.createElement("div",{className:Pe()(k.controls,m.hiddenControls?"hide":null,l?"hover":null),onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),onTouchStart:()=>{i&&clearTimeout(i),n(!0)},onTouchEnd:()=>{i&&clearTimeout(i),i=setTimeout(()=>{n(!1)},2e3)}},o.a.createElement(o.a.Fragment,null,o.a.createElement(da.a,{title:x,placement:"left"},h?o.a.createElement("div",null,o.a.createElement(Ue.a,{"aria-label":s.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:k.smallContainer,disabled:!d.canSendMic||d.audioInProgress,color:"on"===N?m.voiceActivatedUnmute&&!d.isAutoMuted?"primary":"default":"secondary",size:"small",onClick:()=>{"off"===N?c.updateMic({start:!0}):"on"===N?c.muteMic():c.unmuteMic()}},"on"===N?o.a.createElement(ba.a,{color:d.isAutoMuted?"secondary":"primary",style:{opacity:S}}):o.a.createElement(va.a,null))):o.a.createElement("div",null,o.a.createElement(ut.a,{"aria-label":s.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:k.fab,disabled:!d.canSendMic||d.audioInProgress,color:"on"===N?m.voiceActivatedUnmute&&!d.isAutoMuted?"primary":"default":"secondary",size:"large",onClick:()=>{"off"===N?c.updateMic({start:!0}):"on"===N?c.muteMic():c.unmuteMic()}},"on"===N?o.a.createElement(ba.a,{color:d.isAutoMuted&&m.voiceActivatedUnmute?"secondary":"primary",style:d.isAutoMuted&&m.voiceActivatedUnmute?{opacity:S}:{opacity:1}}):o.a.createElement(va.a,null)))),o.a.createElement(da.a,{title:L,placement:"left"},h?o.a.createElement("div",null,o.a.createElement(Ue.a,{"aria-label":s.formatMessage({id:"device.startVideo",defaultMessage:"Start video"}),className:k.smallContainer,disabled:!d.canSendWebcam||d.webcamInProgress,color:"on"===P?"primary":"secondary",size:"small",onClick:()=>{"on"===P?c.disableWebcam():c.updateWebcam({start:!0})}},"on"===P?o.a.createElement(ua.a,null):o.a.createElement(ga.a,null))):o.a.createElement("div",null,o.a.createElement(ut.a,{"aria-label":s.formatMessage({id:"device.startVideo",defaultMessage:"Start video"}),className:k.fab,disabled:!d.canSendWebcam||d.webcamInProgress,color:"on"===P?"default":"secondary",size:"large",onClick:()=>{"on"===P?c.disableWebcam():c.updateWebcam({start:!0})}},"on"===P?o.a.createElement(ua.a,null):o.a.createElement(ga.a,null)))),"mobile"!==d.browser.platform&&o.a.createElement(da.a,{open:B,onClose:V,onOpen:()=>{D(!0)},title:A,placement:"left"},h?o.a.createElement("div",null,o.a.createElement(Ue.a,{"aria-label":s.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"}),className:k.smallContainer,disabled:!M||!d.canShareScreen||d.screenShareInProgress,color:"primary",size:"small",onClick:()=>{"off"===j?c.updateScreenSharing({start:!0}):"on"===j&&c.disableScreenSharing()}},("on"===j||"unsupported"===j)&&o.a.createElement(Oa.a,null),"off"===j&&o.a.createElement(Sa.a,null))):o.a.createElement("div",null,o.a.createElement(ut.a,{"aria-label":s.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"}),className:k.fab,disabled:!M||!d.canShareScreen||d.screenShareInProgress,color:"on"===j?"primary":"default",size:"large",onClick:()=>{"off"===j?c.updateScreenSharing({start:!0}):"on"===j&&c.disableScreenSharing()}},("on"===j||"unsupported"===j)&&o.a.createElement(Oa.a,null),"off"===j&&o.a.createElement(Sa.a,null)))))),o.a.createElement(mt,{isMe:!0,VideoView:!0,advancedMode:b,peer:d,displayName:m.displayName,showPeerInfo:!0,videoTrack:v&&v.track,videoVisible:O,audioCodec:f&&f.codec,videoCodec:v&&v.codec,netInfo:C&&C,audioScore:z,videoScore:H,showQuality:!0,onChangeDisplayName:e=>{c.changeDisplayName(e)}},"muted"===N?null:o.a.createElement(Ba,{id:d.id})))),y.map(e=>o.a.createElement("div",{key:e.id,className:Pe()(k.root,"webcam",l?"hover":null,u?"active-speaker":null),onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),onTouchStart:()=>{i&&clearTimeout(i),n(!0)},onTouchEnd:()=>{i&&clearTimeout(i),i=setTimeout(()=>{n(!1)},2e3)},style:F},o.a.createElement("div",{className:k.viewContainer,style:g},o.a.createElement("p",{className:Pe()(k.meTag,l?"hover":null,h?"smallContainer":null)},o.a.createElement(E.a,{id:"room.me",defaultMessage:"ME"})),o.a.createElement("div",{className:Pe()(k.controls,m.hiddenControls?"hide":null,l?"hover":null),onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),onTouchStart:()=>{i&&clearTimeout(i),n(!0)},onTouchEnd:()=>{i&&clearTimeout(i),i=setTimeout(()=>{n(!1)},2e3)}},o.a.createElement(da.a,{title:L,placement:"left"},h?o.a.createElement("div",null,o.a.createElement(Ue.a,{"aria-label":s.formatMessage({id:"device.stopVideo",defaultMessage:"Stop video"}),className:k.smallContainer,disabled:!d.canSendWebcam||d.webcamInProgress,size:"small",color:"primary",onClick:()=>{c.disableExtraVideo(e.id)}},o.a.createElement(ua.a,null))):o.a.createElement("div",null,o.a.createElement(ut.a,{"aria-label":s.formatMessage({id:"device.stopVideo",defaultMessage:"Stop video"}),className:k.fab,disabled:!d.canSendWebcam||d.webcamInProgress,size:h?"small":"large",onClick:()=>{c.disableExtraVideo(e.id)}},o.a.createElement(ua.a,null))))),o.a.createElement(mt,{isMe:!0,isExtraVideo:!0,advancedMode:b,peer:d,displayName:m.displayName,showPeerInfo:!0,videoTrack:e&&e.track,videoVisible:O,videoCodec:e&&e.codec,onChangeDisplayName:e=>{c.changeDisplayName(e)}})))),w&&o.a.createElement("div",{className:Pe()(k.root,"screen",l?"hover":null),onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),onTouchStart:()=>{i&&clearTimeout(i),n(!0)},onTouchEnd:()=>{i&&clearTimeout(i),i=setTimeout(()=>{n(!1)},2e3)},style:F},o.a.createElement("div",{className:k.viewContainer,style:g},o.a.createElement("p",{className:Pe()(k.meTag,l?"hover":null,h?"smallContainer":null)},o.a.createElement(E.a,{id:"room.me",defaultMessage:"ME"})),o.a.createElement(mt,{isMe:!0,isScreen:!0,advancedMode:b,videoContain:!0,videoTrack:w&&w.track,videoVisible:T,videoCodec:w&&w.codec}))))})));class Et extends o.a.PureComponent{constructor(e){super(e),this.updateDimensions=()=>{if(!this.peersRef.current)return;const e=this.props.boxes;if(0===e)return;const a=this.peersRef.current.clientWidth-(this.props.buttonControlBar?60:0),t=this.peersRef.current.clientHeight-(this.props.toolbarsVisible||this.props.permanentTopBar?60:0);let r,o,l;for(let n=1;n<100;n+=1){if(r=a/Math.ceil(e/n),o=r/1.334,t<o*n){o=t/n,r=1.334*o;break}if(l=t-o*n,l<o)break}Math.ceil(this.state.peerWidth)!==Math.ceil(.94*r)&&this.setState({peerWidth:.94*r,peerHeight:.94*o})},this.state={},this.resizeTimeout=null,this.peersRef=o.a.createRef()}componentDidMount(){window.addEventListener("resize",()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>this.updateDimensions(),250)}),this.updateDimensions()}componentWillUnmount(){window.removeEventListener("resize",this.updateDimensions)}componentDidUpdate(e){e!==this.props&&this.updateDimensions()}render(){const e=this.props,a=e.advancedMode,t=e.spotlightsPeers,r=e.toolbarsVisible,l=e.permanentTopBar,n=e.buttonControlBar,s=e.classes,i={width:this.state.peerWidth?this.state.peerWidth:0,height:this.state.peerHeight?this.state.peerHeight:0};return o.a.createElement("div",{className:Pe()(s.root,r||l?s.showingToolBar:s.hiddenToolBar,n?s.buttonControlBar:null),ref:this.peersRef},o.a.createElement(vt,{advancedMode:a,spacing:6,style:i}),t.map(e=>o.a.createElement(ft,{key:e,advancedMode:a,id:e,spacing:6,style:i})))}}var wt=Object(l.b)(e=>({boxes:ne(e),spotlightsPeers:Z(e),toolbarsVisible:e.room.toolbarsVisible,permanentTopBar:e.settings.permanentTopBar,buttonControlBar:e.settings.buttonControlBar,toolAreaOpen:e.toolarea.toolAreaOpen}),null,null,{areStatesEqual:(e,a)=>a.peers===e.peers&&a.producers===e.producers&&a.consumers===e.consumers&&a.room.spotlights===e.room.spotlights&&a.room.toolbarsVisible===e.room.toolbarsVisible&&a.settings.permanentTopBar===e.settings.permanentTopBar&&a.settings.buttonControlBar===e.settings.buttonControlBar&&a.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen})(Object(i.a)(e=>({root:{width:"100%",height:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",overflow:"hidden",justifyContent:"center",alignItems:"center",alignContent:"center"},hiddenToolBar:{paddingTop:0,transition:"padding .5s"},showingToolBar:{paddingTop:60,transition:"padding .5s"},buttonControlBar:{paddingLeft:60,[e.breakpoints.down("sm")]:{paddingLeft:0}}}),{withTheme:!0})(Et));var yt=Object(l.b)((e,{id:a})=>{const t=ie();return Object(ia.a)({peer:e.peers[a]},t(e,a))},null,null,{areStatesEqual:(e,a)=>a.peers===e.peers&&a.consumers===e.consumers&&a.room.activeSpeakerId===e.room.activeSpeakerId})(Object(i.a)(e=>({root:{flex:"0 0 auto",boxShadow:"var(--peer-shadow)",border:"var(--peer-border)",touchAction:"none",backgroundColor:"var(--peer-bg-color)",backgroundImage:"var(--peer-empty-avatar)",backgroundPosition:"bottom",backgroundSize:"auto 85%",backgroundRepeat:"no-repeat","&.webcam":{order:2},"&.screen":{order:1}},viewContainer:{position:"relative","&.webcam":{order:2},"&.screen":{order:1}},videoInfo:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.3)",display:"flex",justifyContent:"center",alignItems:"center",padding:e.spacing(1),zIndex:21,"& p":{padding:"6px 12px",borderRadius:6,userSelect:"none",pointerEvents:"none",fontSize:20,color:"rgba(255, 255, 255, 0.55)"}}}),{withTheme:!0})(e=>{const a=e.advancedMode,t=e.peer,r=e.micConsumer,l=e.webcamConsumer,n=e.screenConsumer,s=e.spacing,i=e.style,c=e.classes,d=Boolean(l)&&!l.locallyPaused&&!l.remotelyPaused,m=Boolean(n)&&!n.locallyPaused&&!n.remotelyPaused,u={margin:s};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Pe()(c.root,"webcam"),style:u},o.a.createElement("div",{className:Pe()(c.viewContainer),style:i},!d&&o.a.createElement("div",{className:c.videoInfo},o.a.createElement("p",null,o.a.createElement(E.a,{id:"room.videoPaused",defaultMessage:"This video is paused"}))),o.a.createElement(mt,{advancedMode:a,peer:t,displayName:t.displayName,showPeerInfo:!0,consumerSpatialLayers:l?l.spatialLayers:null,consumerTemporalLayers:l?l.temporalLayers:null,consumerCurrentSpatialLayer:l?l.currentSpatialLayer:null,consumerCurrentTemporalLayer:l?l.currentTemporalLayer:null,consumerPreferredSpatialLayer:l?l.preferredSpatialLayer:null,consumerPreferredTemporalLayer:l?l.preferredTemporalLayer:null,videoMultiLayer:l&&"simple"!==l.type,videoTrack:l&&l.track,videoVisible:d,audioCodec:r&&r.codec,videoCodec:l&&l.codec,audioScore:r?r.score:null,videoScore:l?l.score:null},o.a.createElement(Ba,{id:t.id})))),n&&o.a.createElement("div",{className:Pe()(c.root,"screen")},!m&&o.a.createElement("div",{className:c.videoInfo,style:i},o.a.createElement("p",null,o.a.createElement(E.a,{id:"room.videoPaused",defaultMessage:"This video is paused"}))),m&&o.a.createElement("div",{className:Pe()(c.viewContainer),style:i},o.a.createElement(mt,{advancedMode:a,videoContain:!0,consumerSpatialLayers:n?n.spatialLayers:null,consumerTemporalLayers:n?n.temporalLayers:null,consumerCurrentSpatialLayer:n?n.currentSpatialLayer:null,consumerCurrentTemporalLayer:n?n.currentTemporalLayer:null,consumerPreferredSpatialLayer:n?n.preferredSpatialLayer:null,consumerPreferredTemporalLayer:n?n.preferredTemporalLayer:null,videoMultiLayer:n&&"simple"!==n.type,videoTrack:n&&n.track,videoVisible:m,videoCodec:n&&n.codec,videoScore:n?n.score:null}))))})),Mt=t(101);class Ct extends o.a.PureComponent{constructor(e){super(e),this.state={lastSpeaker:null},this.getActivePeerId=()=>{const e=this.props,a=e.selectedPeerId,t=e.peers,r=this.state.lastSpeaker;if(a&&t[a])return this.props.selectedPeerId;if(r&&t[r])return this.state.lastSpeaker;const o=Object.keys(t);return o.length>0?o[0]:void 0},this.isSharingCamera=e=>this.props.peers[e]&&this.props.peers[e].consumers.some(e=>"screen"===this.props.consumers[e].source),this.updateDimensions=()=>{const e={},a=this.rootContainer.current;if(!a)return;const t=a.clientWidth,r=.8*a.clientHeight-(this.props.toolbarsVisible||this.props.permanentTopBar?40:0),o=.2*a.clientHeight;if(this.activePeerContainer.current){let a=t-0,o=a/1.334;this.isSharingCamera(this.getActivePeerId())&&(a/=2,o=a/1.334),o>r-40&&(o=r-40,a=1.334*o),e.speakerWidth=a,e.speakerHeight=o}if(this.filmStripContainer.current){let a=o-10,r=1.334*a;r*this.props.boxes>t-0&&(r=(t-0)/this.props.boxes,a=r/1.334),e.filmStripWidth=r,e.filmStripHeight=a}this.setState(Object(ia.a)({},e))},this.resizeTimeout=null,this.rootContainer=o.a.createRef(),this.activePeerContainer=o.a.createRef(),this.filmStripContainer=o.a.createRef()}componentDidMount(){window.addEventListener("resize",()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>this.updateDimensions(),250)}),this.updateDimensions()}componentWillUnmount(){window.removeEventListener("resize",this.updateDimensions)}componentDidUpdate(e){e!==this.props&&(null!=this.props.activeSpeakerId&&this.props.activeSpeakerId!==this.props.myId&&this.setState({lastSpeaker:this.props.activeSpeakerId}),this.updateDimensions())}render(){const e=this.props,a=e.roomClient,t=e.peers,r=e.myId,l=e.advancedMode,n=e.spotlights,s=e.toolbarsVisible,i=e.permanentTopBar,c=e.classes,d=this.getActivePeerId(),m={width:this.state.speakerWidth,height:this.state.speakerHeight},u={width:this.state.filmStripWidth,height:this.state.filmStripHeight};return o.a.createElement("div",{className:Pe()(c.root,s||i?c.showingToolBar:c.hiddenToolBar),ref:this.rootContainer},o.a.createElement("div",{className:c.speaker,ref:this.activePeerContainer},t[d]&&o.a.createElement(yt,{advancedMode:l,id:d,style:m})),o.a.createElement("div",{className:c.filmStrip,ref:this.filmStripContainer},o.a.createElement(Mt.a,{container:!0,justify:"center",spacing:0},o.a.createElement(Mt.a,{item:!0},o.a.createElement("div",{className:Pe()(c.filmItem,{active:r===d})},o.a.createElement(vt,{advancedMode:l,style:u,smallContainer:!0}))),Object.keys(t).map(e=>n.find(a=>a===e)?o.a.createElement(Mt.a,{key:e,item:!0},o.a.createElement("div",{key:e,onClick:()=>a.setSelectedPeer(e),className:Pe()(c.filmItem,{selected:this.props.selectedPeerId===e,active:e===d})},o.a.createElement(ft,{advancedMode:l,id:e,style:u,smallContainer:!0}))):""))))}}var St=Object(be.b)(Object(l.b)(e=>({activeSpeakerId:e.room.activeSpeakerId,selectedPeerId:e.room.selectedPeerId,peers:e.peers,consumers:e.consumers,myId:e.me.id,spotlights:e.room.spotlights,boxes:ne(e),toolbarsVisible:e.room.toolbarsVisible,toolAreaOpen:e.toolarea.toolAreaOpen,permanentTopBar:e.settings.permanentTopBar}),null,null,{areStatesEqual:(e,a)=>a.room.activeSpeakerId===e.room.activeSpeakerId&&a.room.selectedPeerId===e.room.selectedPeerId&&a.room.toolbarsVisible===e.room.toolbarsVisible&&a.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen&&a.settings.permanentTopBar===e.settings.permanentTopBar&&a.peers===e.peers&&a.consumers===e.consumers&&a.room.spotlights===e.room.spotlights&&a.me.id===e.me.id})(Object(i.a)(()=>({root:{height:"100%",width:"100%",display:"grid",overflow:"hidden",gridTemplateColumns:"1fr",gridTemplateRows:"1fr 0.25fr"},speaker:{gridArea:"1 / 1 / 1 / 1",display:"flex",justifyContent:"center",alignItems:"center"},filmStrip:{gridArea:"2 / 1 / 2 / 1"},filmItem:{display:"flex",border:"var(--peer-border)","&.selected":{borderColor:"var(--selected-peer-border-color)"},"&.active":{borderColor:"var(--selected-peer-border-color)"}},hiddenToolBar:{paddingTop:0,transition:"padding .5s"},showingToolBar:{paddingTop:60,transition:"padding .5s"}}))(Ct)));class kt extends o.a.PureComponent{constructor(e){super(e),this._audioTrack=null,this._audioOutputDevice=null}render(){return o.a.createElement("audio",{ref:"audio",autoPlay:!0})}componentDidMount(){const e=this.props,a=e.audioTrack,t=e.audioOutputDevice;this._setTrack(a),this._setOutputDevice(t)}componentDidUpdate(e){if(e!==this.props){const e=this.props,a=e.audioTrack,t=e.audioOutputDevice;this._setTrack(a),this._setOutputDevice(t)}}_setTrack(e){if(this._audioTrack===e)return;this._audioTrack=e;const a=this.refs.audio;if(e){const t=new MediaStream;e&&t.addTrack(e),a.srcObject=t}else a.srcObject=null}_setOutputDevice(e){if(this._audioOutputDevice===e)return;this._audioOutputDevice=e;const a=this.refs.audio;e&&"function"===typeof a.setSinkId&&a.setSinkId(e)}}var Ot=Object(l.b)(e=>({micConsumers:J(e),audioOutputDevice:e.settings.selectedAudioOutputDevice}),null,null,{areStatesEqual:(e,a)=>a.consumers===e.consumers&&a.room.spotlights===e.room.spotlights&&a.settings.selectedAudioOutputDevice===e.settings.selectedAudioOutputDevice})(e=>{const a=e.micConsumers,t=e.audioOutputDevice;return o.a.createElement("div",{"data-component":"AudioPeers"},a.map(e=>o.a.createElement(kt,{key:e.id,audioTrack:e.track,audioOutputDevice:t})))}),Tt=t(343),Nt=t.n(Tt);var xt=Object(l.b)(e=>({consumer:e.consumers[e.room.fullScreenConsumer],toolbarsVisible:e.room.toolbarsVisible,permanentTopBar:e.settings.permanentTopBar}),e=>({toggleConsumerFullscreen:a=>{a&&e(m.E(a.id))}}),null,{areStatesEqual:(e,a)=>a.consumers[a.room.fullScreenConsumer]===e.consumers[e.room.fullScreenConsumer]&&a.room.toolbarsVisible===e.room.toolbarsVisible&&a.settings.permanentTopBar===e.settings.permanentTopBar})(Object(i.a)(e=>({root:{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:2e4},controls:{position:"absolute",zIndex:20020,right:0,top:0,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:e.spacing(1)},button:{flex:"0 0 auto",margin:"0.2vmin",borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.7)",cursor:"pointer",transitionProperty:"opacity, background-color",transitionDuration:"0.15s",width:"5vmin",height:"5vmin",opacity:0,"&.visible":{opacity:1}},icon:{fontSize:"5vmin"},incompatibleVideo:{position:"absolute",zIndex:20010,top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center","& p":{padding:"6px 12px",borderRadius:6,userSelect:"none",pointerEvents:"none",fontSize:15,color:"rgba(255, 255, 255, 0.55)"}}}))(e=>{const a=e.advancedMode,t=e.consumer,r=e.toggleConsumerFullscreen,l=e.toolbarsVisible,n=e.permanentTopBar,s=e.classes;if(!t)return null;const i=Boolean(t)&&!t.locallyPaused&&!t.remotelyPaused;return o.a.createElement("div",{className:s.root},o.a.createElement("div",{className:s.controls},o.a.createElement("div",{className:Pe()(s.button,{visible:l||n}),onClick:e=>{e.stopPropagation(),r(t)}},o.a.createElement(Nt.a,{className:s.icon}))),o.a.createElement(mt,{advancedMode:a,videoContain:!0,consumerSpatialLayers:t?t.spatialLayers:null,consumerTemporalLayers:t?t.temporalLayers:null,consumerCurrentSpatialLayer:t?t.currentSpatialLayer:null,consumerCurrentTemporalLayer:t?t.currentTemporalLayer:null,consumerPreferredSpatialLayer:t?t.preferredSpatialLayer:null,consumerPreferredTemporalLayer:t?t.preferredTemporalLayer:null,videoMultiLayer:t&&"simple"!==t.type,videoTrack:t&&t.track,videoVisible:i,videoCodec:t&&t.codec,videoScore:t?t.score:null}))})),Pt=t(12),Lt=t.n(Pt);class jt extends o.a.PureComponent{constructor(e){super(e),this.handleToggleFullscreen=()=>{this.fullscreen.fullscreenElement?this.fullscreen.exitFullscreen():this.fullscreen.requestFullscreen(this.window.document.documentElement)},this.handleFullscreenChange=()=>{this.setState({fullscreen:null!==this.fullscreen.fullscreenElement})},this.container=document.createElement("div"),this.window=null,this.windowCheckerInterval=null,this.released=!1,this.fullscreen=null,this.state={mounted:!1,fullscreen:!1}}render(){const e=this.props.classes;return this.state.mounted?Lt.a.createPortal([o.a.createElement("div",{key:"newwindow",className:e.root},o.a.createElement("div",{className:e.controls},this.fullscreen.fullscreenEnabled&&o.a.createElement("div",{className:e.button,onClick:this.handleToggleFullscreen,"data-tip":"Fullscreen","data-place":"right","data-type":"dark"},this.state.fullscreen?o.a.createElement(Nt.a,{className:e.icon}):o.a.createElement(bt.a,{className:e.icon}))),this.props.children)],this.container):null}componentDidMount(){this.openChild(),this.setState({mounted:!0}),this.fullscreen=new v(this.window.document),this.fullscreen.fullscreenEnabled&&this.fullscreen.addEventListener("fullscreenchange",this.handleFullscreenChange)}openChild(){const e=this.props,a=e.url,t=e.title,r=e.name,o=e.features,l=e.onBlock,n=e.center;if("parent"===n)o.left=window.top.outerWidth/2+window.top.screenX-o.width/2,o.top=window.top.outerHeight/2+window.top.screenY-o.height/2;else if("screen"===n){const e=void 0!==window.screenLeft?window.screenLeft:window.screen.left,a=void 0!==window.screenTop?window.screenTop:window.screen.top,t=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,r=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height;o.left=t/2-o.width/2+e,o.top=r/2-o.height/2+a}var s;this.window=window.open(a,r,(s=o,Object.keys(s).reduce((e,a)=>{const t=s[a];return"boolean"===typeof t?e.push("".concat(a,"=").concat(t?"yes":"no")):e.push("".concat(a,"=").concat(t)),e},[]).join(","))),this.windowCheckerInterval=setInterval(()=>{this.window&&!this.window.closed||this.release()},50),this.window?(this.window.document.title=t,this.window.document.body.appendChild(this.container),this.props.copyStyles&&setTimeout(()=>{return e=document,a=this.window.document,void Array.from(e.styleSheets).forEach(t=>{let r;try{r=t.cssRules}catch(o){}if(r){const r=e.createElement("style");Array.from(t.cssRules).forEach(a=>{const t=a.cssText,o=a.type;let l=t;[3,5].includes(o)&&(l=t.split("url(").map(e=>"/"===e[1]?"".concat(e.slice(0,1)).concat(window.location.origin).concat(e.slice(1)):e).join("url(")),r.appendChild(e.createTextNode(l))}),a.head.appendChild(r)}else if(t.href){const r=e.createElement("link");r.rel="stylesheet",r.href=t.href,a.head.appendChild(r)}});var e,a},0),this.window.addEventListener("beforeunload",()=>this.release())):"function"===typeof l&&l(null)}componentWillUnmount(){this.window&&(this.fullscreen&&this.fullscreen.fullscreenEnabled&&this.fullscreen.removeEventListener("fullscreenchange",this.handleFullscreenChange),this.window.close())}release(){if(this.released)return;this.released=!0,clearInterval(this.windowCheckerInterval);const e=this.props.onUnload;"function"===typeof e&&e(null)}}jt.defaultProps={url:"",name:"Multiparty Meeting",title:"Multiparty Meeting",features:{width:"800px",height:"600px"},onBlock:null,onUnload:null,center:"parent",copyStyles:!0};var At=Object(i.a)(e=>({root:{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:2e4},controls:{position:"absolute",zIndex:20020,right:0,top:0,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:e.spacing(1)},button:{flex:"0 0 auto",margin:"0.2vmin",borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.7)",cursor:"pointer",transitionProperty:"opacity, background-color",transitionDuration:"0.15s",width:"5vmin",height:"5vmin"},icon:{fontSize:"5vmin"},incompatibleVideo:{position:"absolute",zIndex:20010,top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center","& p":{padding:"6px 12px",borderRadius:6,userSelect:"none",pointerEvents:"none",fontSize:15,color:"rgba(255, 255, 255, 0.55)"}}}))(jt);class It extends o.a.PureComponent{constructor(e){super(e),this._videoTrack=null,this.video=o.a.createRef()}render(){const e=this.props,a=e.videoVisible,t=e.videoProfile,r=e.classes;return o.a.createElement("div",{className:r.root},o.a.createElement("video",{ref:this.video,className:Pe()(r.video,{hidden:!a,loading:"none"===t}),autoPlay:!0,playsInline:!0,muted:Boolean(!0)}))}componentDidMount(){const e=this.props.videoTrack;this._setTracks(e)}componentDidUpdate(e){if(e!==this.props){const e=this.props.videoTrack;this._setTracks(e)}}_setTracks(e){if(this._videoTrack===e)return;this._videoTrack=e;const a=this.video.current;if(e){const t=new MediaStream;t.addTrack(e),a.srcObject=t}else a.srcObject=null}}var Rt=Object(i.a)(()=>({root:{position:"relative",flex:"100 100 auto",height:"100%",width:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},video:{flex:"100 100 auto",height:"100%",width:"100%",objectFit:"contain",userSelect:"none",transitionProperty:"opacity",transitionDuration:".15s",backgroundColor:"rgba(0, 0, 0, 1)","&.hidden":{opacity:0,transitionDuration:"0s"},"&.loading":{filter:"blur(5px)"}}}))(It);var Bt=Object(l.b)(e=>({consumer:e.consumers[e.room.windowConsumer]}),e=>({toggleConsumerWindow:()=>{e(m.F())}}),null,{areStatesEqual:(e,a)=>a.consumers[a.room.windowConsumer]===e.consumers[e.room.windowConsumer]})(e=>{const a=e.advancedMode,t=e.consumer,r=e.toggleConsumerWindow;if(!t)return null;const l=Boolean(t)&&!t.locallyPaused&&!t.remotelyPaused;return o.a.createElement(At,{onUnload:r},o.a.createElement(Rt,{advancedMode:a,consumerSpatialLayers:t?t.spatialLayers:null,consumerTemporalLayers:t?t.temporalLayers:null,consumerCurrentSpatialLayer:t?t.currentSpatialLayer:null,consumerCurrentTemporalLayer:t?t.currentTemporalLayer:null,consumerPreferredSpatialLayer:t?t.preferredSpatialLayer:null,consumerPreferredTemporalLayer:t?t.preferredTemporalLayer:null,videoMultiLayer:t&&"simple"!==t.type,videoTrack:t&&t.track,videoVisible:l,videoCodec:t&&t.codec,videoScore:t?t.score:null}))}),Dt=t(210),Vt=t(214),Ft=t(596),zt=t(215),Ht=t(597),Wt=t(216),qt=t(614),Ut=t(217),_t=t(219),Gt=t(218),Kt=t(223),Yt=t(556),Qt=t.n(Yt);var Xt=Object(be.b)(Object(l.b)((e,{id:a})=>{const t=ce(ve);return e=>({peer:e.lobbyPeers[a],promotionInProgress:e.room.lobbyPeersPromotionInProgress,canPromote:t(e)})},null,null,{areStatesEqual:(e,a)=>a.room===e.room&&a.peers===e.peers&&a.me.roles===e.me.roles&&a.lobbyPeers===e.lobbyPeers})(Object(i.a)(()=>({root:{alignItems:"center"}}))(e=>{const a=e.roomClient,t=e.peer,r=e.promotionInProgress,l=e.canPromote,n=e.classes,s=Object(de.a)(),i=t.picture||Fe.a;return o.a.createElement(Ut.a,{className:Pe()(n.root),key:t.peerId,button:!0,alignItems:"flex-start"},o.a.createElement(Gt.a,null,o.a.createElement(Kt.a,{alt:"Peer avatar",src:i})),o.a.createElement(_t.a,{primary:t.displayName}),o.a.createElement(da.a,{title:s.formatMessage({id:"tooltip.admitFromLobby",defaultMessage:"Click to let them in"})},o.a.createElement(Ue.a,{disabled:!l||t.promotionInProgress||r,color:"primary",onClick:e=>{e.stopPropagation(),a.promoteLobbyPeer(t.id)}},o.a.createElement(Qt.a,null))))})));const Jt={handleCloseLockDialog:m.n,handleAccessCode:m.c};var $t=Object(be.b)(Object(l.b)(()=>{const e=ce(ve);return a=>({room:a.room,lobbyPeers:q(a),canPromote:e(a)})},Jt,null,{areStatesEqual:(e,a)=>a.room===e.room&&a.me.roles===e.me.roles&&a.peers===e.peers&&a.lobbyPeers===e.lobbyPeers})(Object(i.a)(e=>({root:{},dialogPaper:{width:"30vw",[e.breakpoints.down("lg")]:{width:"40vw"},[e.breakpoints.down("md")]:{width:"50vw"},[e.breakpoints.down("sm")]:{width:"70vw"},[e.breakpoints.down("xs")]:{width:"90vw"}},lock:{padding:e.spacing(2)}}))(({roomClient:e,room:a,handleCloseLockDialog:t,lobbyPeers:r,canPromote:l,classes:n})=>o.a.createElement(Dt.a,{className:n.root,open:a.lockDialogOpen,onClose:()=>t(!1),classes:{paper:n.dialogPaper}},o.a.createElement(Vt.a,{id:"form-dialog-title"},o.a.createElement(E.a,{id:"room.lobbyAdministration",defaultMessage:"Lobby administration"})),r.length>0?o.a.createElement(Wt.a,{dense:!0,subheader:o.a.createElement(qt.a,{component:"div"},o.a.createElement(E.a,{id:"room.peersInLobby",defaultMessage:"Participants in Lobby"}))},r.map(e=>o.a.createElement(Xt,{key:e,id:e}))):o.a.createElement(zt.a,null,o.a.createElement(Ht.a,{gutterBottom:!0},o.a.createElement(E.a,{id:"room.lobbyEmpty",defaultMessage:"There are currently no one in the lobby"}))),o.a.createElement(Ft.a,null,o.a.createElement(Oe.a,{disabled:0===r.length||!l||a.lobbyPeersPromotionInProgress,onClick:()=>e.promoteAllLobbyPeers(),color:"primary"},o.a.createElement(E.a,{id:"label.promoteAllPeers",defaultMessage:"Promote all"})),o.a.createElement(Oe.a,{onClick:()=>t(!1),color:"primary"},o.a.createElement(E.a,{id:"label.close",defaultMessage:"Close"}))))))),Zt=t(20),er=t(615),ar=t(602),tr=t(600),rr=t(616),or=t(623),lr=t(628),nr=t(268),sr=t(557),ir=t.n(sr),cr=t(558),dr=t.n(cr),mr=t(629);const ur=Object(i.a)({root:{color:"#3880ff",height:2,padding:"15px 0"},track:{height:2},rail:{height:2,opacity:.2},mark:{backgroundColor:"#bfbfbf",height:10,width:3,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}})(lr.a),pr={setEchoCancellation:Zt.c,setAutoGainControl:Zt.a,setNoiseSuppression:Zt.e,setVoiceActivatedUnmute:Zt.n};var gr=Object(be.b)(Object(l.b)(e=>({me:e.me,volume:e.peerVolumes[e.me.id],settings:e.settings}),pr,null,{areStatesEqual:(e,a)=>a.me===e.me&&a.settings===e.settings&&a.peerVolumes[a.me.id]===e[e.me.id]})(Object(i.a)(e=>({setting:{padding:e.spacing(2)},margin:{height:e.spacing(3)},root:{width:"100%",backgroundColor:e.palette.background.paper},switchLabel:{justifyContent:"space-between",flex:"auto",display:"flex",padding:e.spacing(1)},nested:{display:"block",paddingTop:0,paddingBottom:0,paddingLeft:"25px",paddingRight:"25px"},formControl:{display:"flex"}}))(({setEchoCancellation:e,setAutoGainControl:a,setNoiseSuppression:t,setVoiceActivatedUnmute:r,roomClient:l,me:n,volume:s,settings:i,classes:c})=>{const d=Object(de.a)(),m=o.a.useState(!1),u=Object(We.a)(m,2),p=u[0],g=u[1],h=o.a.useState(!1),b=Object(We.a)(h,2),f=b[0],v=b[1],w=[{value:"low",label:d.formatMessage({id:"label.low",defaultMessage:"Low"})},{value:"medium",label:d.formatMessage({id:"label.medium",defaultMessage:"Medium"})},{value:"high",label:d.formatMessage({id:"label.high",defaultMessage:"High (HD)"})},{value:"veryhigh",label:d.formatMessage({id:"label.veryHigh",defaultMessage:"Very high (FHD)"})},{value:"ultra",label:d.formatMessage({id:"label.ultra",defaultMessage:"Ultra (UHD)"})}];let y,M,C;return y=n.webcamDevices?Object.values(n.webcamDevices):[],M=n.audioDevices?Object.values(n.audioDevices):[],C=n.audioOutputDevices?Object.values(n.audioOutputDevices):[],o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{className:c.setting,autoComplete:"off"},o.a.createElement(tr.a,{className:c.formControl},o.a.createElement(or.a,{value:i.selectedWebcam||"",onChange:e=>{e.target.value&&l.updateWebcam({restart:!0,newDeviceId:e.target.value})},displayEmpty:!0,name:d.formatMessage({id:"settings.camera",defaultMessage:"Camera"}),autoWidth:!0,className:c.selectEmpty,disabled:0===y.length||n.webcamInProgress},y.map((e,a)=>o.a.createElement(er.a,{key:a,value:e.deviceId},e.label))),o.a.createElement(ar.a,null,y.length>0?d.formatMessage({id:"settings.selectCamera",defaultMessage:"Select video device"}):d.formatMessage({id:"settings.cantSelectCamera",defaultMessage:"Unable to select video device"}))),o.a.createElement(Wt.a,{className:c.root,component:"nav"},o.a.createElement(Ut.a,{button:!0,onClick:()=>v(!f)},o.a.createElement(_t.a,{primary:d.formatMessage({id:"settings.showAdvancedVideo",defaultMessage:"Advanced video settings"})}),f?o.a.createElement(ir.a,null):o.a.createElement(dr.a,null)),o.a.createElement(nr.a,{in:f,timeout:"auto"},o.a.createElement(tr.a,{className:c.formControl},o.a.createElement(or.a,{value:i.resolution||"",onChange:e=>{e.target.value&&l.updateWebcam({newResolution:e.target.value})},name:"Video resolution",autoWidth:!0,className:c.selectEmpty},w.map((e,a)=>o.a.createElement(er.a,{key:a,value:e.value},e.label))),o.a.createElement(ar.a,null,o.a.createElement(E.a,{id:"settings.resolution",defaultMessage:"Select your video resolution"}))),o.a.createElement(tr.a,{className:c.formControl},o.a.createElement(or.a,{value:i.screenSharingFrameRate||"",onChange:e=>{e.target.value&&l.updateScreenSharing({newFrameRate:e.target.value})},name:"Frame rate",autoWidth:!0,className:c.selectEmpty},[1,5,10,15,20,25,30].map(e=>o.a.createElement(er.a,{key:e,value:e},e))),o.a.createElement(ar.a,null,o.a.createElement(E.a,{id:"settings.screenSharingFrameRate",defaultMessage:"Select your screen sharing frame rate"})))))),o.a.createElement("form",{className:c.setting,autoComplete:"off"},o.a.createElement(tr.a,{className:c.formControl},o.a.createElement(or.a,{value:i.selectedAudioDevice||"",onChange:e=>{e.target.value&&l.updateMic({restart:!0,newDeviceId:e.target.value})},displayEmpty:!0,name:d.formatMessage({id:"settings.audio",defaultMessage:"Audio input device"}),autoWidth:!0,className:c.selectEmpty,disabled:0===M.length||n.audioInProgress},M.map((e,a)=>o.a.createElement(er.a,{key:a,value:e.deviceId},""===e.label?a+1:e.label))),o.a.createElement(ar.a,null,M.length>0?d.formatMessage({id:"settings.selectAudio",defaultMessage:"Select audio input device"}):d.formatMessage({id:"settings.cantSelectAudio",defaultMessage:"Unable to select audio input device"}))),"audioOutputSupportedBrowsers"in window.config&&window.config.audioOutputSupportedBrowsers.includes(n.browser.name)&&o.a.createElement(tr.a,{className:c.formControl},o.a.createElement(or.a,{value:i.selectedAudioOutputDevice||"",onChange:e=>{e.target.value&&l.changeAudioOutputDevice(e.target.value)},displayEmpty:!0,name:d.formatMessage({id:"settings.audioOutput",defaultMessage:"Audio output device"}),autoWidth:!0,className:c.selectEmpty,disabled:0===C.length||n.audioOutputInProgress},C.map((e,a)=>o.a.createElement(er.a,{key:a,value:e.deviceId},e.label))),o.a.createElement(ar.a,null,C.length>0?d.formatMessage({id:"settings.selectAudioOutput",defaultMessage:"Select audio output device"}):d.formatMessage({id:"settings.cantSelectAudioOutput",defaultMessage:"Unable to select audio output device"}))),o.a.createElement(Wt.a,{className:c.root,component:"nav"},o.a.createElement(Ut.a,{button:!0,onClick:()=>g(!p)},o.a.createElement(_t.a,{primary:d.formatMessage({id:"settings.showAdvancedAudio",defaultMessage:"Advanced audio settings"})}),p?o.a.createElement(ir.a,null):o.a.createElement(dr.a,null)),o.a.createElement(nr.a,{in:p,timeout:"auto"},o.a.createElement(Wt.a,{component:"div"},o.a.createElement(Ut.a,{className:c.nested},o.a.createElement(rr.a,{className:Pe()(c.setting,c.switchLabel),control:o.a.createElement(mr.a,{color:"secondary",checked:i.echoCancellation,onChange:a=>{e(a.target.checked),l.updateMic()}}),labelPlacement:"start",label:d.formatMessage({id:"settings.echoCancellation",defaultMessage:"Echo cancellation"})})),o.a.createElement(Ut.a,{className:c.nested},o.a.createElement(rr.a,{className:Pe()(c.setting,c.switchLabel),control:o.a.createElement(mr.a,{color:"secondary",checked:i.autoGainControl,onChange:e=>{a(e.target.checked),l.updateMic()}}),labelPlacement:"start",label:d.formatMessage({id:"settings.autoGainControl",defaultMessage:"Auto gain control"})})),o.a.createElement(Ut.a,{className:c.nested},o.a.createElement(rr.a,{className:Pe()(c.setting,c.switchLabel),control:o.a.createElement(mr.a,{color:"secondary",checked:i.noiseSuppression,onChange:e=>{t(e.target.checked),l.updateMic()}}),labelPlacement:"start",label:d.formatMessage({id:"settings.noiseSuppression",defaultMessage:"Noise suppression"})})),o.a.createElement(Ut.a,{className:c.nested},o.a.createElement(rr.a,{className:Pe()(c.setting,c.switchLabel),control:o.a.createElement(mr.a,{color:"secondary",checked:i.voiceActivatedUnmute,onChange:e=>{r(e.target.checked)}}),labelPlacement:"start",label:d.formatMessage({id:"settings.voiceActivatedUnmute",defaultMessage:"Voice activated unmute"})})),o.a.createElement(Ut.a,{className:c.nested},o.a.createElement("div",{className:c.margin}),o.a.createElement(Re.a,{gutterBottom:!0},d.formatMessage({id:"settings.noiseThreshold",defaultMessage:"Noise threshold"}),":"),o.a.createElement(ur,{className:Pe()(c.slider,Pe.a.setting),key:"noise-threshold-slider",min:-100,value:i.noiseThreshold,max:0,valueLabelDisplay:"auto",onChange:(e,a)=>{l._setNoiseThreshold(a)},marks:[{value:s,label:"".concat(s," dB")}]})))))))})));const hr={onTogglePermanentTopBar:Zt.t,onToggleHiddenControls:Zt.r,onToggleShowNotifications:Zt.u,onToggleButtonControlBar:Zt.p,onToggleDrawerOverlayed:Zt.q,handleChangeMode:m.h};var br=Object(l.b)(e=>({isMobile:"mobile"===e.me.browser.platform,room:e.room,settings:e.settings}),hr,null,{areStatesEqual:(e,a)=>a.me.browser===e.me.browser&&a.room===e.room&&a.settings===e.settings})(Object(i.a)(e=>({setting:{padding:e.spacing(2)},formControl:{display:"flex"},switchLabel:{justifyContent:"space-between",flex:"auto",display:"flex",padding:e.spacing(1),marginRight:0}}))(({isMobile:e,room:a,settings:t,onTogglePermanentTopBar:r,onToggleHiddenControls:l,onToggleButtonControlBar:n,onToggleShowNotifications:s,onToggleDrawerOverlayed:i,handleChangeMode:c,classes:d})=>{const m=Object(de.a)(),u=[{value:"democratic",label:m.formatMessage({id:"label.democratic",defaultMessage:"Democratic view"})},{value:"filmstrip",label:m.formatMessage({id:"label.filmstrip",defaultMessage:"Filmstrip view"})}];return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{className:d.setting,autoComplete:"off"},o.a.createElement(tr.a,{className:d.formControl},o.a.createElement(or.a,{value:a.mode||"",onChange:e=>{e.target.value&&c(e.target.value)},name:m.formatMessage({id:"settings.layout",defaultMessage:"Room layout"}),autoWidth:!0,className:d.selectEmpty},u.map((e,a)=>o.a.createElement(er.a,{key:a,value:e.value},e.label))),o.a.createElement(ar.a,null,o.a.createElement(E.a,{id:"settings.selectRoomLayout",defaultMessage:"Select room layout"})))),o.a.createElement(rr.a,{className:Pe()(d.setting,d.switchLabel),control:o.a.createElement(mr.a,{checked:t.permanentTopBar,onChange:r,value:"permanentTopBar"}),labelPlacement:"start",label:m.formatMessage({id:"settings.permanentTopBar",defaultMessage:"Permanent top bar"})}),o.a.createElement(rr.a,{className:Pe()(d.setting,d.switchLabel),control:o.a.createElement(mr.a,{checked:t.hiddenControls,onChange:l,value:"hiddenControls"}),labelPlacement:"start",label:m.formatMessage({id:"settings.hiddenControls",defaultMessage:"Hidden media controls"})}),o.a.createElement(rr.a,{className:Pe()(d.setting,d.switchLabel),control:o.a.createElement(mr.a,{checked:t.buttonControlBar,onChange:n,value:"buttonControlBar"}),labelPlacement:"start",label:m.formatMessage({id:"settings.buttonControlBar",defaultMessage:"Separate media controls"})}),!e&&o.a.createElement(rr.a,{className:Pe()(d.setting,d.switchLabel),control:o.a.createElement(mr.a,{checked:t.drawerOverlayed,onChange:i,value:"drawerOverlayed"}),labelPlacement:"start",label:m.formatMessage({id:"settings.drawerOverlayed",defaultMessage:"Side drawer over content"})}),o.a.createElement(rr.a,{className:Pe()(d.setting,d.switchLabel),control:o.a.createElement(mr.a,{checked:t.showNotifications,onChange:s,value:"showNotifications"}),labelPlacement:"start",label:m.formatMessage({id:"settings.showNotifications",defaultMessage:"Show notifications"})}))}));const fr={onToggleAdvancedMode:Zt.o,onToggleNotificationSounds:Zt.s};var vr=Object(be.b)(Object(l.b)(e=>({settings:e.settings}),fr,null,{areStatesEqual:(e,a)=>a.settings===e.settings})(Object(i.a)(e=>({setting:{padding:e.spacing(2)},formControl:{display:"flex"},switchLabel:{justifyContent:"space-between",flex:"auto",display:"flex",padding:e.spacing(1),marginRight:0}}))(({roomClient:e,settings:a,onToggleAdvancedMode:t,onToggleNotificationSounds:r,classes:l})=>{const n=Object(de.a)();return o.a.createElement(o.a.Fragment,null,o.a.createElement(rr.a,{className:Pe()(l.setting,l.switchLabel),control:o.a.createElement(mr.a,{checked:a.advancedMode,onChange:t,value:"advancedMode"}),labelPlacement:"start",label:n.formatMessage({id:"settings.advancedMode",defaultMessage:"Advanced mode"})}),o.a.createElement(rr.a,{className:Pe()(l.setting,l.switchLabel),control:o.a.createElement(mr.a,{checked:a.notificationSounds,onChange:r,value:"notificationSounds"}),labelPlacement:"start",label:n.formatMessage({id:"settings.notificationSounds",defaultMessage:"Notification sounds"})}),!window.config.lockLastN&&o.a.createElement("form",{className:l.setting,autoComplete:"off"},o.a.createElement(tr.a,{className:l.formControl},o.a.createElement(or.a,{value:a.lastN||"",onChange:a=>{a.target.value&&e.changeMaxSpotlights(a.target.value)},name:"Last N",autoWidth:!0,className:l.selectEmpty},Array.from({length:window.config.maxLastN||10},(e,a)=>a+1).map(e=>o.a.createElement(er.a,{key:e,value:e},e))),o.a.createElement(ar.a,null,o.a.createElement(E.a,{id:"settings.lastn",defaultMessage:"Number of visible videos"})))))})));const Er=["media","appearence","advanced"],wr={handleCloseSettings:m.x,setSettingsTab:m.y};var yr=Object(l.b)(e=>({currentSettingsTab:e.room.currentSettingsTab,settingsOpen:e.room.settingsOpen}),wr,null,{areStatesEqual:(e,a)=>a.room.currentSettingsTab===e.room.currentSettingsTab&&a.room.settingsOpen===e.room.settingsOpen})(Object(i.a)(e=>({root:{},dialogPaper:{width:"30vw",[e.breakpoints.down("lg")]:{width:"40vw"},[e.breakpoints.down("md")]:{width:"50vw"},[e.breakpoints.down("sm")]:{width:"70vw"},[e.breakpoints.down("xs")]:{width:"90vw"}},tabsHeader:{flexGrow:1}}))(({currentSettingsTab:e,settingsOpen:a,handleCloseSettings:t,setSettingsTab:r,classes:l})=>{const n=Object(de.a)();return o.a.createElement(Dt.a,{className:l.root,open:a,onClose:()=>t(!1),classes:{paper:l.dialogPaper}},o.a.createElement(Vt.a,{id:"form-dialog-title"},o.a.createElement(E.a,{id:"settings.settings",defaultMessage:"Settings"})),o.a.createElement(ue.a,{className:l.tabsHeader,value:Er.indexOf(e),onChange:(e,a)=>r(Er[a]),indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},o.a.createElement(pe.a,{label:n.formatMessage({id:"label.media",defaultMessage:"Media"})}),o.a.createElement(pe.a,{label:n.formatMessage({id:"label.appearance",defaultMessage:"Appearence"})}),o.a.createElement(pe.a,{label:n.formatMessage({id:"label.advanced",defaultMessage:"Advanced"})})),"media"===e&&o.a.createElement(gr,null),"appearence"===e&&o.a.createElement(br,null),"advanced"===e&&o.a.createElement(vr,null),o.a.createElement(Ft.a,null,o.a.createElement(Oe.a,{onClick:()=>t(!1),color:"primary"},o.a.createElement(E.a,{id:"label.close",defaultMessage:"Close"}))))})),Mr=t(617),Cr=t(577),Sr=t(601),kr=t(559),Or=t.n(kr),Tr=t(560),Nr=t.n(Tr),xr=t(351),Pr=t.n(xr),Lr=t(562),jr=t.n(Lr),Ar=t(565),Ir=t.n(Ar),Rr=t(561),Br=t.n(Rr),Dr=t(563),Vr=t.n(Dr),Fr=t(564),zr=t.n(Fr),Hr=t(567),Wr=t.n(Hr),qr=t(566),Ur=t.n(qr),_r=t(568),Gr=t.n(_r),Kr=t(569),Yr=t.n(Kr);const Qr=Object(i.a)(e=>({badge:{backgroundColor:e.palette.secondary.main,"&::after":{position:"absolute",width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"3px solid ".concat(e.palette.secondary.main),content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}))(ge.a);var Xr=Object(be.b)(Object(l.b)(()=>{const e=ce(Me),a=ce(fe),t=ce(ve);return r=>({room:r.room,isMobile:"mobile"===r.me.browser.platform,peersLength:oe(r),lobbyPeers:q(r),permanentTopBar:r.settings.permanentTopBar,drawerOverlayed:r.settings.drawerOverlayed,toolAreaOpen:r.toolarea.toolAreaOpen,loggedIn:r.me.loggedIn,loginEnabled:r.me.loginEnabled,myPicture:r.me.picture,unread:r.toolarea.unreadMessages+r.toolarea.unreadFiles+le(r),canProduceExtraVideo:e(r),canLock:a(r),canPromote:t(r)})},e=>({setToolbarsVisible:a=>{e(m.D(a))},setSettingsOpen:a=>{e(m.x(a))},setExtraVideoOpen:a=>{e(m.i(a))},setHelpOpen:a=>{e(m.j(a))},setAboutOpen:a=>{e(m.b(a))},setLockDialogOpen:a=>{e(m.n(a))},toggleToolArea:()=>{e({type:"TOGGLE_TOOL_AREA"})},openUsersTab:()=>{e({type:"OPEN_TOOL_AREA"}),e(u("users"))}}),null,{areStatesEqual:(e,a)=>a.room===e.room&&a.peers===e.peers&&a.lobbyPeers===e.lobbyPeers&&a.settings.permanentTopBar===e.settings.permanentTopBar&&a.settings.drawerOverlayed===e.settings.drawerOverlayed&&a.me.loggedIn===e.me.loggedIn&&a.me.browser===e.me.browser&&a.me.loginEnabled===e.me.loginEnabled&&a.me.picture===e.me.picture&&a.me.roles===e.me.roles&&a.toolarea.unreadMessages===e.toolarea.unreadMessages&&a.toolarea.unreadFiles===e.toolarea.unreadFiles&&a.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen})(Object(i.a)(e=>({persistentDrawerOpen:{width:"calc(100% - 30vw)",marginLeft:"30vw",[e.breakpoints.down("lg")]:{width:"calc(100% - 40vw)",marginLeft:"40vw"},[e.breakpoints.down("md")]:{width:"calc(100% - 50vw)",marginLeft:"50vw"},[e.breakpoints.down("sm")]:{width:"calc(100% - 70vw)",marginLeft:"70vw"},[e.breakpoints.down("xs")]:{width:"calc(100% - 90vw)",marginLeft:"90vw"}},menuButton:{margin:0,padding:0},logo:{display:"none",marginLeft:20,[e.breakpoints.up("sm")]:{display:"block"}},divider:{marginLeft:e.spacing(3)},show:{opacity:1,transition:"opacity .5s"},hide:{opacity:0,transition:"opacity .5s"},grow:{flexGrow:1},title:{display:"none",marginLeft:20,[e.breakpoints.up("sm")]:{display:"block"}},sectionDesktop:{display:"none",[e.breakpoints.up("md")]:{display:"flex"}},sectionMobile:{display:"flex",[e.breakpoints.up("md")]:{display:"none"}},actionButton:{margin:e.spacing(1,0),padding:e.spacing(0,1)},disabledButton:{margin:e.spacing(1,0)},green:{color:"rgba(0, 153, 0, 1)"},moreAction:{margin:e.spacing(.5,0,.5,1.5)}}),{withTheme:!0})(e=>{const a=Object(de.a)(),t=Object(r.useState)(null),l=Object(We.a)(t,2),n=l[0],s=l[1],i=Object(r.useState)(null),c=Object(We.a)(i,2),d=c[0],m=c[1],u=Object(r.useState)(null),p=Object(We.a)(u,2),g=p[0],h=p[1],b=(e,a)=>{m(e.currentTarget),h(a)},f=()=>{m(null),s(null)},v=e.roomClient,w=e.room,y=e.peersLength,M=e.lobbyPeers,C=e.permanentTopBar,S=e.drawerOverlayed,k=e.toolAreaOpen,O=e.isMobile,T=e.myPicture,N=e.loggedIn,x=e.loginEnabled,P=e.fullscreenEnabled,L=e.fullscreen,j=e.onFullscreen,A=e.setSettingsOpen,I=e.setExtraVideoOpen,R=e.setHelpOpen,B=e.setAboutOpen,D=e.setLockDialogOpen,V=e.toggleToolArea,F=e.openUsersTab,z=e.unread,H=e.canProduceExtraVideo,W=e.canLock,q=e.canPromote,U=e.classes,_=Boolean(d),G=Boolean(n),K=w.locked?a.formatMessage({id:"tooltip.unLockRoom",defaultMessage:"Unlock room"}):a.formatMessage({id:"tooltip.lockRoom",defaultMessage:"Lock room"}),Y=L?a.formatMessage({id:"tooltip.leaveFullscreen",defaultMessage:"Leave fullscreen"}):a.formatMessage({id:"tooltip.enterFullscreen",defaultMessage:"Enter fullscreen"}),Q=N?a.formatMessage({id:"tooltip.logout",defaultMessage:"Log out"}):a.formatMessage({id:"tooltip.login",defaultMessage:"Log in"});return o.a.createElement(o.a.Fragment,null,o.a.createElement(me.a,{position:"fixed",className:Pe()(w.toolbarsVisible||C?U.show:U.hide,O||S||!k?null:U.persistentDrawerOpen)},o.a.createElement(Mr.a,null,o.a.createElement(Qr,{color:"secondary",badgeContent:z,onClick:()=>V()},o.a.createElement(Ue.a,{color:"inherit","aria-label":a.formatMessage({id:"label.openDrawer",defaultMessage:"Open drawer"}),className:U.menuButton},o.a.createElement(Or.a,null))),window.config.logo&&o.a.createElement("img",{alt:"Logo",className:U.logo,src:window.config.logo}),o.a.createElement(Re.a,{className:U.title,variant:"h6",color:"inherit",noWrap:!0},window.config.title?window.config.title:"Multiparty meeting"),o.a.createElement("div",{className:U.grow}),o.a.createElement("div",{className:U.sectionDesktop},o.a.createElement(da.a,{title:a.formatMessage({id:"label.moreActions",defaultMessage:"More actions"})},o.a.createElement(Ue.a,{"aria-owns":_&&"moreActions"===g?"material-appbar":void 0,"aria-haspopup":!0,onClick:e=>b(e,"moreActions"),color:"inherit"},o.a.createElement(Nr.a,null))),P&&o.a.createElement(da.a,{title:Y},o.a.createElement(Ue.a,{"aria-label":a.formatMessage({id:"tooltip.enterFullscreen",defaultMessage:"Enter fullscreen"}),className:U.actionButton,color:"inherit",onClick:j},L?o.a.createElement(Nt.a,null):o.a.createElement(bt.a,null))),o.a.createElement(da.a,{title:a.formatMessage({id:"tooltip.participants",defaultMessage:"Show participants"})},o.a.createElement(Ue.a,{"aria-label":a.formatMessage({id:"tooltip.participants",defaultMessage:"Show participants"}),color:"inherit",onClick:()=>F()},o.a.createElement(ge.a,{color:"primary",badgeContent:y+1},o.a.createElement(Br.a,null)))),o.a.createElement(da.a,{title:a.formatMessage({id:"tooltip.settings",defaultMessage:"Show settings"})},o.a.createElement(Ue.a,{"aria-label":a.formatMessage({id:"tooltip.settings",defaultMessage:"Show settings"}),className:U.actionButton,color:"inherit",onClick:()=>A(!w.settingsOpen)},o.a.createElement(jr.a,null))),o.a.createElement(da.a,{title:K},o.a.createElement("span",{className:U.disabledButton},o.a.createElement(Ue.a,{"aria-label":a.formatMessage({id:"tooltip.lockRoom",defaultMessage:"Lock room"}),className:U.actionButton,color:"inherit",disabled:!W,onClick:()=>{w.locked?v.unlockRoom():v.lockRoom()}},w.locked?o.a.createElement(Vr.a,null):o.a.createElement(zr.a,null)))),M.length>0&&o.a.createElement(da.a,{title:a.formatMessage({id:"tooltip.lobby",defaultMessage:"Show lobby"})},o.a.createElement("span",{className:U.disabledButton},o.a.createElement(Ue.a,{"aria-label":a.formatMessage({id:"tooltip.lobby",defaultMessage:"Show lobby"}),className:U.actionButton,color:"inherit",disabled:!q,onClick:()=>D(!w.lockDialogOpen)},o.a.createElement(Qr,{color:"secondary",badgeContent:M.length},o.a.createElement(Ir.a,null))))),x&&o.a.createElement(da.a,{title:Q},o.a.createElement(Ue.a,{"aria-label":a.formatMessage({id:"tooltip.login",defaultMessage:"Log in"}),className:U.actionButton,color:"inherit",onClick:()=>{N?v.logout():v.login()}},T?o.a.createElement(Kt.a,{src:T}):o.a.createElement(Pr.a,{className:N?U.green:null})))),o.a.createElement("div",{className:U.sectionMobile},M.length>0&&o.a.createElement(da.a,{title:a.formatMessage({id:"tooltip.lobby",defaultMessage:"Show lobby"})},o.a.createElement("span",{className:U.disabledButton},o.a.createElement(Ue.a,{"aria-label":a.formatMessage({id:"tooltip.lobby",defaultMessage:"Show lobby"}),className:U.actionButton,color:"inherit",disabled:!q,onClick:()=>D(!w.lockDialogOpen)},o.a.createElement(Qr,{color:"secondary",badgeContent:M.length},o.a.createElement(Ir.a,null))))),o.a.createElement(Ue.a,{"aria-haspopup":!0,onClick:e=>{s(e.currentTarget)},color:"inherit"},o.a.createElement(Ur.a,null))),o.a.createElement("div",{className:U.divider}),o.a.createElement(Oe.a,{"aria-label":a.formatMessage({id:"label.leave",defaultMessage:"Leave"}),className:U.actionButton,variant:"contained",color:"secondary",onClick:()=>v.close()},o.a.createElement(E.a,{id:"label.leave",defaultMessage:"Leave"})))),o.a.createElement(Sr.a,{anchorEl:d,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:_,onClose:f,onExited:()=>{h(null)},getContentAnchorEl:null},"moreActions"===g&&o.a.createElement(he.a,null,o.a.createElement(er.a,{disabled:!H,onClick:()=>{f(),I(!w.extraVideoOpen)}},o.a.createElement(Wr.a,{"aria-label":a.formatMessage({id:"label.addVideo",defaultMessage:"Add video"})}),o.a.createElement("p",{className:U.moreAction},o.a.createElement(E.a,{id:"label.addVideo",defaultMessage:"Add video"}))),o.a.createElement(er.a,{onClick:()=>{f(),R(!w.helpOpen)}},o.a.createElement(Gr.a,{"aria-label":a.formatMessage({id:"room.help",defaultMessage:"Help"})}),o.a.createElement("p",{className:U.moreAction},o.a.createElement(E.a,{id:"room.help",defaultMessage:"Help"}))),o.a.createElement(er.a,{onClick:()=>{f(),B(!w.aboutOpen)}},o.a.createElement(Yr.a,{"aria-label":a.formatMessage({id:"room.about",defaultMessage:"About"})}),o.a.createElement("p",{className:U.moreAction},o.a.createElement(E.a,{id:"room.about",defaultMessage:"About"}))))),o.a.createElement(Cr.a,{anchorEl:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},open:G,onClose:f,getContentAnchorEl:null},x&&o.a.createElement(er.a,{"aria-label":Q,onClick:()=>{f(),N?v.logout():v.login()}},T?o.a.createElement(Kt.a,{src:T}):o.a.createElement(Pr.a,{className:N?U.green:null}),N?o.a.createElement("p",{className:U.moreAction},o.a.createElement(E.a,{id:"tooltip.logout",defaultMessage:"Log out"})):o.a.createElement("p",{className:U.moreAction},o.a.createElement(E.a,{id:"tooltip.login",defaultMessage:"Log in"}))),o.a.createElement(er.a,{"aria-label":K,disabled:!W,onClick:()=>{f(),w.locked?v.unlockRoom():v.lockRoom()}},w.locked?o.a.createElement(Vr.a,null):o.a.createElement(zr.a,null),w.locked?o.a.createElement("p",{className:U.moreAction},o.a.createElement(E.a,{id:"tooltip.unLockRoom",defaultMessage:"Unlock room"})):o.a.createElement("p",{className:U.moreAction},o.a.createElement(E.a,{id:"tooltip.lockRoom",defaultMessage:"Lock room"}))),o.a.createElement(er.a,{"aria-label":a.formatMessage({id:"tooltip.settings",defaultMessage:"Show settings"}),onClick:()=>{f(),A(!w.settingsOpen)}},o.a.createElement(jr.a,null),o.a.createElement("p",{className:U.moreAction},o.a.createElement(E.a,{id:"tooltip.settings",defaultMessage:"Show settings"}))),o.a.createElement(er.a,{"aria-label":a.formatMessage({id:"tooltip.participants",defaultMessage:"Show participants"}),onClick:()=>{f(),F()}},o.a.createElement(ge.a,{color:"primary",badgeContent:y+1},o.a.createElement(Br.a,null)),o.a.createElement("p",{className:U.moreAction},o.a.createElement(E.a,{id:"tooltip.participants",defaultMessage:"Show participants"}))),P&&o.a.createElement(er.a,{"aria-label":a.formatMessage({id:"tooltip.enterFullscreen",defaultMessage:"Enter fullscreen"}),onClick:()=>{f(),j()}},L?o.a.createElement(Nt.a,null):o.a.createElement(bt.a,null),o.a.createElement("p",{className:U.moreAction},o.a.createElement(E.a,{id:"tooltip.enterFullscreen",defaultMessage:"Enter fullscreen"}))),o.a.createElement(er.a,{"aria-label":a.formatMessage({id:"label.moreActions",defaultMessage:"Add video"}),onClick:e=>b(e,"moreActions")},o.a.createElement(Nr.a,null),o.a.createElement("p",{className:U.moreAction},o.a.createElement(E.a,{id:"label.moreActions",defaultMessage:"More actions"})))))}))),Jr=t(570),$r=t.n(Jr);const Zr={handleCloseExtraVideo:m.i};var eo=Object(be.b)(Object(l.b)(e=>({webcamDevices:e.me.webcamDevices,extraVideoOpen:e.room.extraVideoOpen}),Zr,null,{areStatesEqual:(e,a)=>a.me.webcamDevices===e.me.webcamDevices&&a.room.extraVideoOpen===e.room.extraVideoOpen})(Object(i.a)(e=>({dialogPaper:{width:"30vw",[e.breakpoints.down("lg")]:{width:"40vw"},[e.breakpoints.down("md")]:{width:"50vw"},[e.breakpoints.down("sm")]:{width:"70vw"},[e.breakpoints.down("xs")]:{width:"90vw"}},setting:{padding:e.spacing(2)},formControl:{display:"flex"}}))(({roomClient:e,extraVideoOpen:a,webcamDevices:t,handleCloseExtraVideo:r,classes:l})=>{const n=Object(de.a)(),s=o.a.useState(""),i=Object(We.a)(s,2),c=i[0],d=i[1];let m;return m=t?Object.values(t):[],o.a.createElement(Dt.a,{open:a,onClose:()=>r(!1),classes:{paper:l.dialogPaper}},o.a.createElement(Vt.a,{id:"form-dialog-title"},o.a.createElement(E.a,{id:"room.extraVideo",defaultMessage:"Extra video"})),o.a.createElement("form",{className:l.setting,autoComplete:"off"},o.a.createElement(tr.a,{className:l.formControl},o.a.createElement(or.a,{value:c,displayEmpty:!0,name:n.formatMessage({id:"settings.camera",defaultMessage:"Camera"}),autoWidth:!0,className:l.selectEmpty,disabled:0===m.length,onChange:e=>{d(e.target.value)}},m.map((e,a)=>o.a.createElement(er.a,{key:a,value:e.deviceId},e.label))),o.a.createElement(ar.a,null,m.length>0?n.formatMessage({id:"settings.selectCamera",defaultMessage:"Select video device"}):n.formatMessage({id:"settings.cantSelectCamera",defaultMessage:"Unable to select video device"})))),o.a.createElement(Ft.a,null,o.a.createElement(Oe.a,{onClick:()=>e.addExtraVideo(c),color:"primary"},o.a.createElement(E.a,{id:"label.addVideo",defaultMessage:"Add video"}))))})));var ao=Object(be.b)(Object(l.b)(e=>Object(ia.a)(Object(ia.a)({toolbarsVisible:e.room.toolbarsVisible,hiddenControls:e.settings.hiddenControls,drawerOverlayed:e.settings.drawerOverlayed,toolAreaOpen:e.toolarea.toolAreaOpen},se(e)),{},{me:e.me}),null,null,{areStatesEqual:(e,a)=>a.room.toolbarsVisible===e.room.toolbarsVisible&&a.settings.hiddenControls===e.settings.hiddenControls&&a.settings.drawerOverlayed===e.settings.drawerOverlayed&&a.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen&&a.producers===e.producers&&a.me===e.me})(Object(i.a)(e=>({root:{position:"fixed",display:"flex",zIndex:30,[e.breakpoints.up("md")]:{top:"50%",transform:"translate(0%, -50%)",flexDirection:"column",justifyContent:"center",alignItems:"center",left:e.spacing(1)},[e.breakpoints.down("sm")]:{flexDirection:"row",bottom:e.spacing(1),left:"50%",transform:"translate(-50%, -0%)"}},fab:{margin:e.spacing(1)},show:{opacity:1,transition:"opacity .5s"},hide:{opacity:0,transition:"opacity .5s"},move:{left:"30vw",top:"50%",transform:"translate(0%, -50%)",flexDirection:"column",justifyContent:"center",alignItems:"center",[e.breakpoints.down("lg")]:{left:"40vw"},[e.breakpoints.down("md")]:{left:"50vw"},[e.breakpoints.down("sm")]:{left:"70vw"},[e.breakpoints.down("xs")]:{left:"90vw"}}}),{withTheme:!0})(e=>{const a=Object(de.a)(),t=e.roomClient,r=e.toolbarsVisible,l=e.hiddenControls,n=e.drawerOverlayed,s=e.toolAreaOpen,i=e.me,c=e.micProducer,d=e.webcamProducer,m=e.screenProducer,u=e.classes,p=e.theme;let g,h,b,f,v,E;i.canSendMic?c?c.locallyPaused||c.remotelyPaused?(g="muted",h=a.formatMessage({id:"device.unMuteAudio",defaultMessage:"Unmute audio"})):(g="on",h=a.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"})):(g="off",h=a.formatMessage({id:"device.activateAudio",defaultMessage:"Activate audio"})):(g="unsupported",h=a.formatMessage({id:"device.audioUnsupported",defaultMessage:"Audio unsupported"})),i.canSendWebcam?d?(b="on",f=a.formatMessage({id:"device.stopVideo",defaultMessage:"Stop video"})):(b="off",f=a.formatMessage({id:"device.startVideo",defaultMessage:"Start video"})):(b="unsupported",f=a.formatMessage({id:"device.videoUnsupported",defaultMessage:"Video unsupported"})),i.canShareScreen?m?(v="on",E=a.formatMessage({id:"device.stopScreenSharing",defaultMessage:"Stop screen sharing"})):(v="off",E=a.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"})):(v="unsupported",E=a.formatMessage({id:"device.screenSharingUnsupported",defaultMessage:"Screen sharing not supported"}));const w=Object(Ga.a)(p.breakpoints.down("sm"));return o.a.createElement("div",{className:Pe()(u.root,l?r?u.show:u.hide:u.show,s&&"mobile"!==i.browser.platform&&!n?u.move:null)},o.a.createElement(da.a,{title:h,placement:w?"top":"right"},o.a.createElement(ut.a,{"aria-label":a.formatMessage({id:"device.muteAudio",defaultMessage:"Mute audio"}),className:u.fab,disabled:!i.canSendMic||i.audioInProgress,color:"on"===g?"default":"secondary",size:w?"large":"medium",onClick:()=>{"off"===g?t.updateMic({start:!0}):"on"===g?t.muteMic():t.unmuteMic()}},"on"===g?o.a.createElement(ba.a,null):o.a.createElement(va.a,null))),o.a.createElement(da.a,{title:f,placement:w?"top":"right"},o.a.createElement(ut.a,{"aria-label":a.formatMessage({id:"device.startVideo",defaultMessage:"Start video"}),className:u.fab,disabled:!i.canSendWebcam||i.webcamInProgress,color:"on"===b?"default":"secondary",size:w?"large":"medium",onClick:()=>{"on"===b?t.disableWebcam():t.updateWebcam({start:!0})}},"on"===b?o.a.createElement(ua.a,null):o.a.createElement(ga.a,null))),"mobile"!==i.browser.platform&&o.a.createElement(da.a,{title:E,placement:w?"top":"right"},o.a.createElement(ut.a,{"aria-label":a.formatMessage({id:"device.startScreenSharing",defaultMessage:"Start screen sharing"}),className:u.fab,disabled:!i.canShareScreen||i.screenShareInProgress,color:"on"===v?"primary":"default",size:w?"large":"medium",onClick:()=>{"off"===v?t.updateScreenSharing({start:!0}):"on"===v&&t.disableScreenSharing()}},"on"===v||"unsupported"===v?o.a.createElement(Oa.a,null):null,"off"===v?o.a.createElement(Sa.a,null):null)))})));const to=[{key:"h",label:"room.help",defaultMessage:"Help"},{key:"m",label:"device.muteAudio",defaultMessage:"Mute Audio"},{key:"v",label:"device.stopVideo",defaultMessage:"Mute Video"},{key:"1",label:"label.democratic",defaultMessage:"Democratic View"},{key:"2",label:"label.filmstrip",defaultMessage:"Filmstrip View"},{key:"space",label:"me.mutedPTT",defaultMessage:"Push SPACE to talk"},{key:"a",label:"label.advanced",defaultMessage:"Show advanced information"},{key:"".concat(String.fromCharCode(8592)," ").concat(String.fromCharCode(8594)),label:"room.browsePeersSpotlight",defaultMessage:"Browse participants into Spotlight"}],ro={handleCloseHelp:m.j};var oo=Object(be.b)(Object(l.b)(e=>({helpOpen:e.room.helpOpen}),ro,null,{areStatesEqual:(e,a)=>a.room.helpOpen===e.room.helpOpen})(Object(i.a)(e=>({dialogPaper:{width:"30vw",[e.breakpoints.down("lg")]:{width:"40vw"},[e.breakpoints.down("md")]:{width:"50vw"},[e.breakpoints.down("sm")]:{width:"70vw"},[e.breakpoints.down("xs")]:{width:"90vw"},display:"flex",flexDirection:"column"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,whiteSpace:"nowrap",marginRight:e.spacing(3),marginBottom:e.spacing(1),minWidth:e.spacing(8)},shortcuts:{display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},tabsHeader:{flexGrow:1,marginBottom:e.spacing(1)}}))(({helpOpen:e,handleCloseHelp:a,classes:t})=>{const r=Object(de.a)();return o.a.createElement(Dt.a,{open:e,onClose:()=>{a(!1)},classes:{paper:t.dialogPaper}},o.a.createElement(Vt.a,{id:"form-dialog-title"},o.a.createElement(E.a,{id:"room.help",defaultMessage:"Help"})),o.a.createElement(ue.a,{value:0,className:t.tabsHeader,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},o.a.createElement(pe.a,{label:r.formatMessage({id:"room.shortcutKeys",defaultMessage:"Shortcut keys"})})),to.map((e,a)=>o.a.createElement("div",{key:a,className:t.shortcuts},o.a.createElement(he.a,{className:t.paper},e.key),o.a.createElement(E.a,{id:e.label,defaultMessage:e.defaultMessage}))),o.a.createElement(Ft.a,null,o.a.createElement(Oe.a,{onClick:()=>{a(!1)},color:"primary"},o.a.createElement(E.a,{id:"label.close",defaultMessage:"Close"}))))}))),lo=t(618),no=t(619);const so={handleCloseAbout:m.b};var io=Object(be.b)(Object(l.b)(e=>({aboutOpen:e.room.aboutOpen}),so,null,{areStatesEqual:(e,a)=>a.room.aboutOpen===e.room.aboutOpen})(Object(i.a)(e=>({dialogPaper:{width:"30vw",[e.breakpoints.down("lg")]:{width:"40vw"},[e.breakpoints.down("md")]:{width:"50vw"},[e.breakpoints.down("sm")]:{width:"70vw"},[e.breakpoints.down("xs")]:{width:"90vw"}},logo:{marginRight:"auto"},link:{display:"block",textAlign:"center",marginBottom:e.spacing(1)},divider:{marginBottom:e.spacing(3)}}))(({aboutOpen:e,handleCloseAbout:a,classes:t})=>o.a.createElement(Dt.a,{open:e,onClose:()=>a(!1),classes:{paper:t.dialogPaper}},o.a.createElement(Vt.a,{id:"form-dialog-title"},o.a.createElement(E.a,{id:"room.about",defaultMessage:"About"})),o.a.createElement(zt.a,{dividers:!0},o.a.createElement(Ht.a,{paragraph:!0},"Contributions to this work were made on behalf of the G\xc9ANT project, a project that has received funding from the European Union\u2019s Horizon 2020 research and innovation programme under Grant Agreement No. 731122 (GN4-2). On behalf of G\xc9ANT project, G\xc9ANT Association is the sole owner of the copyright in all material which was developed by a member of the G\xc9ANT project."),o.a.createElement(Ht.a,{paragraph:!0},"G\xc9ANT Vereniging (Association) is registered with the Chamber of Commerce in Amsterdam with registration number 40535155 and operates in the UK as a branch of G\xc9ANT Vereniging. Registered office: Hoekenrode 3, 1102BR Amsterdam, The Netherlands. UK branch address: City House, 126-130 Hills Road, Cambridge CB2 1PQ, UK."),o.a.createElement(Ht.a,{align:"center",paragraph:!0},o.a.createElement(lo.a,{href:"https://edumeet.org",target:"_blank",rel:"noreferrer",color:"secondary",variant:"h6"},"https://edumeet.org")),o.a.createElement(Ht.a,{align:"center",variant:"body2"},o.a.createElement(E.a,{id:"label.version",defaultMessage:"Version"}),":"," ".concat("3.3.0")),o.a.createElement(no.a,{variant:"middle",light:!0,className:t.divider}),window.config.supportUrl&&o.a.createElement(Ht.a,{align:"center",paragraph:!0},o.a.createElement("span",null,"Visit for more info: "),o.a.createElement(lo.a,{href:window.config.supportUrl,target:"_blank",rel:"noreferrer",color:"secondary"},window.config.supportUrl)),o.a.createElement(lo.a,{href:window.config.privacyUrl?window.config.privacyUrl:"privacy/privacy.html",target:"_blank",rel:"noreferrer",color:"secondary",className:t.link},"Data protection and Privacy Policy")),o.a.createElement(Ft.a,null,window.config.logo&&o.a.createElement("img",{alt:"Logo",className:t.logo,src:window.config.logo}),o.a.createElement(Oe.a,{onClick:()=>{a(!1)},color:"primary"},o.a.createElement(E.a,{id:"label.close",defaultMessage:"Close"})))))));const co=window.config.hideTimeout||5e3;class mo extends o.a.PureComponent{constructor(e){super(e),this.waitForHide=Object(p.b)(()=>{this.props.setToolbarsVisible(!1)},co),this.handleMovement=()=>{this.props.room.toolbarsVisible||this.props.setToolbarsVisible(!0),this.waitForHide()},this.handleToggleFullscreen=()=>{this.fullscreen.fullscreenElement?this.fullscreen.exitFullscreen():this.fullscreen.requestFullscreen(document.documentElement)},this.handleFullscreenChange=()=>{this.setState({fullscreen:null!==this.fullscreen.fullscreenElement})},this.fullscreen=new v(document),this.state={fullscreen:!1}}componentDidMount(){this.fullscreen.fullscreenEnabled&&this.fullscreen.addEventListener("fullscreenchange",this.handleFullscreenChange),window.addEventListener("mousemove",this.handleMovement),window.addEventListener("touchstart",this.handleMovement)}componentWillUnmount(){this.fullscreen.fullscreenEnabled&&this.fullscreen.removeEventListener("fullscreenchange",this.handleFullscreenChange),window.removeEventListener("mousemove",this.handleMovement),window.removeEventListener("touchstart",this.handleMovement)}render(){const e=this.props,a=e.room,t=e.browser,r=e.advancedMode,l=e.showNotifications,n=e.buttonControlBar,s=e.drawerOverlayed,i=e.toolAreaOpen,c=e.toggleToolArea,m=e.classes,u=e.theme,p={filmstrip:St,democratic:wt}[a.mode],g=void 0!==window?window.document.body:void 0;return o.a.createElement("div",{className:m.root},!d()()&&o.a.createElement(y.a,{buttonText:o.a.createElement(E.a,{id:"room.consentUnderstand",defaultMessage:"I understand"})},o.a.createElement(E.a,{id:"room.cookieConsent",defaultMessage:"This website uses cookies to enhance the user experience"})),o.a.createElement(xt,{advancedMode:r}),o.a.createElement(Bt,{advancedMode:r}),o.a.createElement(Ot,null),l&&o.a.createElement(P,null),o.a.createElement(M.a,null),o.a.createElement(Xr,{fullscreenEnabled:this.fullscreen.fullscreenEnabled,fullscreen:this.state.fullscreen,onFullscreen:this.handleToggleFullscreen}),"mobile"===t.platform||s?o.a.createElement("nav",null,o.a.createElement(k.a,{implementation:"css"},o.a.createElement(C.a,{container:g,variant:"temporary",anchor:"rtl"===u.direction?"right":"left",open:i,onClose:()=>c(),onOpen:()=>c(),classes:{paper:m.drawerPaper},ModalProps:{keepMounted:!0}},o.a.createElement(_a,{closeDrawer:c})))):o.a.createElement("nav",{className:i?m.drawer:null},o.a.createElement(k.a,{implementation:"css"},o.a.createElement(S.a,{variant:"persistent",anchor:"rtl"===u.direction?"right":"left",open:i,onClose:()=>c(),classes:{paper:m.drawerPaper}},o.a.createElement(_a,{closeDrawer:c})))),"mobile"===t.platform&&"ios"!==t.os&&o.a.createElement($r.a,null),o.a.createElement(p,{advancedMode:r}),n&&o.a.createElement(ao,null),a.lockDialogOpen&&o.a.createElement($t,null),a.settingsOpen&&o.a.createElement(yr,null),a.extraVideoOpen&&o.a.createElement(eo,null),a.helpOpen&&o.a.createElement(oo,null),a.aboutOpen&&o.a.createElement(io,null))}}a.default=Object(l.b)(e=>({room:e.room,browser:e.me.browser,advancedMode:e.settings.advancedMode,showNotifications:e.settings.showNotifications,buttonControlBar:e.settings.buttonControlBar,drawerOverlayed:e.settings.drawerOverlayed,toolAreaOpen:e.toolarea.toolAreaOpen}),e=>({setToolbarsVisible:a=>{e(m.D(a))},toggleToolArea:()=>{e({type:"TOGGLE_TOOL_AREA"})}}),null,{areStatesEqual:(e,a)=>a.room===e.room&&a.me.browser===e.me.browser&&a.settings.advancedMode===e.settings.advancedMode&&a.settings.showNotifications===e.settings.showNotifications&&a.settings.buttonControlBar===e.settings.buttonControlBar&&a.settings.drawerOverlayed===e.settings.drawerOverlayed&&a.toolarea.toolAreaOpen===e.toolarea.toolAreaOpen})(Object(i.a)(e=>({root:{display:"flex",width:"100%",height:"100%",backgroundColor:"var(--background-color)",backgroundImage:"url(".concat(window.config?window.config.background:null,")"),backgroundAttachment:"fixed",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},drawer:{width:"30vw",flexShrink:0,[e.breakpoints.down("lg")]:{width:"40vw"},[e.breakpoints.down("md")]:{width:"50vw"},[e.breakpoints.down("sm")]:{width:"70vw"},[e.breakpoints.down("xs")]:{width:"90vw"}},drawerPaper:{width:"30vw",[e.breakpoints.down("lg")]:{width:"40vw"},[e.breakpoints.down("md")]:{width:"50vw"},[e.breakpoints.down("sm")]:{width:"70vw"},[e.breakpoints.down("xs")]:{width:"90vw"}}}),{withTheme:!0})(mo))}}]);
//# sourceMappingURL=room.e249fa9e.chunk.js.map