(this["webpackJsonpmultiparty-meeting"]=this["webpackJsonpmultiparty-meeting"]||[]).push([[8],{606:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return u}));var r=i(44),a=i(107),s=i.n(a);let n=null;s()()&&"function"===typeof window.require&&(n=window.require("electron"));class o{constructor(){this._stream=null}start(){return Promise.resolve().then(()=>n.desktopCapturer.getSources({types:["window","screen"]})).then(e=>{var t,i=Object(r.a)(e);try{for(i.s();!(t=i.n()).done;){const e=t.value;if("Entire Screen"===e.name)return navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e.id}}})}}catch(a){i.e(a)}finally{i.f()}}).then(e=>(this._stream=e,e))}stop(){this._stream instanceof MediaStream!==!1&&(this._stream.getTracks().forEach(e=>e.stop()),this._stream=null)}isScreenShareAvailable(){return!0}}class c{constructor(){this._stream=null}start(e={}){const t=this._toConstraints(e);return navigator.mediaDevices.getDisplayMedia(t).then(e=>(this._stream=e,Promise.resolve(e)))}stop(){this._stream instanceof MediaStream!==!1&&(this._stream.getTracks().forEach(e=>e.stop()),this._stream=null)}isScreenShareAvailable(){return!0}_toConstraints(e){const t={video:{}};return isFinite(e.width)&&(t.video.width=e.width),isFinite(e.height)&&(t.video.height=e.height),isFinite(e.frameRate)&&(t.video.frameRate=e.frameRate),t}}class h{constructor(){this._stream=null}start(e={}){const t=this._toConstraints(e);return navigator.mediaDevices.getUserMedia(t).then(e=>(this._stream=e,Promise.resolve(e)))}stop(){this._stream instanceof MediaStream!==!1&&(this._stream.getTracks().forEach(e=>e.stop()),this._stream=null)}isScreenShareAvailable(){return!0}_toConstraints(e){const t={video:{mediaSource:"window"},audio:!1};return"mediaSource"in e&&(t.video.mediaSource=e.mediaSource),isFinite(e.width)&&(t.video.width={min:e.width,max:e.width}),isFinite(e.height)&&(t.video.height={min:e.height,max:e.height}),isFinite(e.frameRate)&&(t.video.frameRate={min:e.frameRate,max:e.frameRate}),t}}class m{isScreenShareAvailable(){return!1}}class u{static create(e){if(s()()&&n)return new o;if("desktop"!==e.platform)return new m;switch(e.flag){case"firefox":return e.version<66?new h:new c;case"safari":return e.version>=13?new c:new m;case"chrome":case"chromium":case"opera":case"edge":return new c;default:return new m}}}}}]);
//# sourceMappingURL=screensharing.01df4aa7.chunk.js.map