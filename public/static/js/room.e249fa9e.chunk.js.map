{"version":3,"sources":["images/avatar-empty.jpeg","components/appPropTypes.js","actions/toolareaActions.js","components/FullScreen.js","components/Notifications/Notifications.js","components/Selectors.js","permissions.js","components/MeetingDrawer/Chat/ChatModerator.js","components/MeetingDrawer/Chat/Message.js","components/MeetingDrawer/Chat/MessageList.js","components/MeetingDrawer/Chat/ChatInput.js","components/MeetingDrawer/Chat/Chat.js","components/MeetingDrawer/FileSharing/File.js","components/MeetingDrawer/FileSharing/FileList.js","components/MeetingDrawer/FileSharing/FileSharingModerator.js","components/MeetingDrawer/FileSharing/FileSharing.js","components/MeetingDrawer/ParticipantList/ListPeer.js","components/MeetingDrawer/ParticipantList/ListMe.js","components/MeetingDrawer/ParticipantList/ListModerator.js","components/Containers/Volume.js","components/MeetingDrawer/ParticipantList/ParticipantList.js","components/MeetingDrawer/MeetingDrawer.js","components/Controls/EditableInput.js","components/VideoContainers/VideoView.js","components/Containers/Peer.js","components/Containers/Me.js","components/MeetingViews/Democratic.js","components/Containers/SpeakerPeer.js","components/MeetingViews/Filmstrip.js","components/PeerAudio/PeerAudio.js","components/PeerAudio/AudioPeers.js","components/VideoContainers/FullScreenView.js","components/VideoWindow/NewWindow.js","components/VideoContainers/FullView.js","components/VideoWindow/VideoWindow.js","components/AccessControl/LockDialog/ListLobbyPeer.js","components/AccessControl/LockDialog/LockDialog.js","components/Settings/MediaSettings.js","components/Settings/AppearenceSettings.js","components/Settings/AdvancedSettings.js","components/Settings/Settings.js","components/Controls/TopBar.js","components/Controls/ExtraVideo.js","components/Controls/ButtonControlBar.js","components/Controls/Help.js","components/Controls/About.js","components/Room.js"],"names":["module","exports","PropTypes","shape","state","oneOf","isRequired","activeSpeakerId","string","id","canSendMic","bool","canSendWebcam","webcamInProgress","source","deviceLabel","type","paused","track","any","codec","displayName","consumers","arrayOf","peerId","locallyPaused","remotelyPaused","profile","timeout","number","component","text","sender","data","picture","file","magnet","me","notify","func","setToolTab","toolTab","payload","key","fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror","webkit","moz","ms","FullScreen","constructor","document","this","vendor","Object","keys","element","requestFullscreenFunction","addEventListener","handler","removeEventListener","bind","Boolean","val","toLowerCase","notificationPosition","window","config","Notifications","Component","displayed","storeDisplayed","shouldComponentUpdate","notifications","newNotifications","currentNotifications","props","notExists","i","length","filter","componentDidUpdate","forEach","notification","includes","enqueueSnackbar","variant","autoHideDuration","anchorOrigin","vertical","horizontal","removeNotification","render","withSnackbar","connect","dispatch","notificationId","notificationActions","areStatesEqual","next","prev","meRolesSelect","roles","roomPermissionsSelect","room","roomPermissions","roomAllowWhenRoleMissing","allowWhenRoleMissing","producersSelect","producers","consumersSelect","spotlightsSelector","spotlights","peersSelector","peers","getPeerConsumers","getAllConsumers","peersKeySelector","createSelector","peersValueSelector","values","lobbyPeersKeySelector","lobbyPeers","screenProducersSelector","producer","extraVideoProducersSelector","micProducerSelector","find","webcamProducerSelector","screenProducerSelector","spotlightScreenConsumerSelector","consumer","spotlightExtraVideoConsumerSelector","passiveMicConsumerSelector","spotlightsLengthSelector","spotlightPeersSelector","spotlightSortedPeersSelector","peer","raisedHand","sort","a","b","String","localeCompare","raisedHandSortedPeers","raisedHandTimestamp","peersSortedSelector","participantListSelector","raisedHands","peersLengthSelector","raisedHandsSelector","reduce","videoBoxesSelector","spotlightsLength","screenProducers","screenConsumers","extraVideoProducers","extraVideoConsumers","meProducersSelector","micProducer","webcamProducer","screenProducer","makePeerConsumerSelector","allConsumers","consumersArray","map","consumerId","micConsumer","webcamConsumer","screenConsumer","makePermissionSelector","permission","some","role","permissions","withRoomContext","hasPermission","isChatModerator","withStyles","theme","root","display","padding","spacing","boxShadow","backgroundColor","listheader","fontWeight","actionButton","marginLeft","intl","useIntl","roomClient","classes","className","defaultMessage","Button","aria-label","formatMessage","color","disabled","clearChatInProgress","onClick","clearChat","linkRenderer","marked","Renderer","link","href","title","marginBottom","flexShrink","selfMessage","remoteMessage","marginRight","margin","content","avatar","borderRadius","height","alignSelf","self","time","name","Paper","classnames","alt","src","Typography","dangerouslySetInnerHTML","__html","DOMPurify","sanitize","parse","renderer","ALLOWED_TAGS","ALLOWED_ATTR","MessageList","React","componentDidMount","node","scrollTop","scrollHeight","getSnapshotBeforeUpdate","offsetHeight","nextProps","chat","prevProps","prevState","shouldScroll","getTimeString","value","Date","myPicture","ref","message","index","EmptyAvatar","flexDirection","alignItems","overflowY","settings","canChat","input","flex","iconButton","useState","setMessage","createNewMessage","now","InputBase","placeholder","onChange","e","target","onKeyPress","ev","preventDefault","sendMessage","sendChatMessage","autoFocus","IconButton","width","File","PureComponent","canShareFiles","magnetUri","fileContent","files","sharedFile","fileInfo","button","saveFile","active","decode","dn","handleDownload","progress","FileList","entries","filePicture","injectIntl","isFileSharingModerator","clearFileSharingInProgress","clearFileSharing","browser","tabOpen","toolarea","currentToolTab","canShare","shareButtonsWrapper","handleFileChange","event","shareFiles","buttonDescription","buttonGalleryDescription","accept","htmlFor","platform","initialState","overflow","cursor","marginTop","peerInfo","fontSize","paddingLeft","flexGrow","indicators","buttons","green","isModerator","spotlight","children","webcamEnabled","micEnabled","screenVisible","style","raisedHandInProgress","stopPropagation","lowerPeerHand","Tooltip","placement","peerScreenInProgress","modifyPeerConsumer","peerVideoInProgress","peerAudioInProgress","peerKickInProgress","kickPeer","stopPeerAudioInProgress","mutePeer","stopPeerVideoInProgress","stopPeerVideo","stopPeerScreenSharingInProgress","stopPeerScreenSharing","setRaisedHand","divider","muteAllInProgress","muteAllPeers","stopAllVideoInProgress","stopAllPeerVideo","stopAllScreenSharingInProgress","stopAllPeerScreenSharing","closeMeetingInProgress","closeMeeting","peerVolumes","noiseThreshold","volume","Math","round","volumeLarge","position","top","bottom","right","justifyContent","largeBar","background","transitionProperty","transitionDuration","volumeSmall","float","backgroundSize","smallBar","backgroundRepeat","transform","small","ParticipantList","advancedMode","participants","selectedPeerId","list","flipKey","flipId","listItem","selected","setSelectedPeer","ParticipantListContainer","listStyleType","borderBottom","tabs","mapDispatchToProps","toolareaActions","unreadMessages","unreadFiles","palette","paper","appBar","tabsHeader","withTheme","closeDrawer","AppBar","Tabs","indexOf","indicatorColor","textColor","Tab","label","Badge","badgeContent","direction","EditableInput","propName","classLoading","classInvalid","editProps","shouldBlockWhileLoading","change","logger","Logger","VideoView","super","videoWidth","videoHeight","_audioTrack","_videoTrack","_videoResolutionTimer","isMe","isScreen","isExtraVideo","showQuality","showPeerInfo","videoContain","videoVisible","videoMultiLayer","audioScore","videoScore","consumerCurrentSpatialLayer","consumerCurrentTemporalLayer","consumerPreferredSpatialLayer","consumerPreferredTemporalLayer","audioCodec","videoCodec","onChangeDisplayName","netInfo","quality","red","score","producerScore","orange","yellow","info","media","box","hidden","Fragment","recv","send","iceSelectedTuple","sendBitrate","toFixed","bytesSent","recvBitrate","bytesReceived","remoteIp","localIp","displayNameEdit","maxLength","autoCorrect","spellCheck","newDisplayName","displayNameStatic","video","contain","autoPlay","playsInline","muted","controls","videoTrack","audioTrack","_setTracks","componentWillUnmount","clearInterval","videoElement","refs","oncanplay","onplay","onpause","_hideVideoResolution","audioElement","stream","MediaStream","addTrack","srcObject","setState","videoCanPlay","play","catch","error","warn","_showVideoResolution","setInterval","objectFit","userSelect","opacity","zIndex","gap","gridTemplateAreas","gridArea","justifySelf","border","windowConsumer","activeSpeaker","toggleConsumerFullscreen","roomActions","toggleConsumerWindow","touchAction","backgroundImage","backgroundPosition","borderColor","order","fab","smallContainer","pointerEvents","transition","viewContainer","videoInfo","hover","setHover","touchTimeout","smallScreen","useMediaQuery","breakpoints","down","rootStyle","onMouseOver","onMouseOut","onTouchStart","clearTimeout","onTouchEnd","setTimeout","size","Fab","consumerSpatialLayers","spatialLayers","consumerTemporalLayers","temporalLayers","currentSpatialLayer","currentTemporalLayer","preferredSpatialLayer","preferredTemporalLayer","abs","canShareScreen","transports","noiseVolume","meTag","left","ptt","textAlign","micState","micTip","webcamState","webcamTip","screenState","screenTip","screenShareTooltipOpen","screenShareTooltipSetOpen","screenShareTooltipHandleClose","screenShareInProgress","spacingStyle","curr","useEffect","poll","getTransportStats","isSpeaking","buttonControlBar","hiddenControls","audioInProgress","voiceActivatedUnmute","isAutoMuted","updateMic","start","muteMic","unmuteMic","disableWebcam","updateWebcam","open","onClose","onOpen","updateScreenSharing","disableScreenSharing","changeDisplayName","disableExtraVideo","Democratic","updateDimensions","peersRef","current","n","boxes","clientWidth","clientHeight","toolbarsVisible","permanentTopBar","x","y","space","rows","ceil","peerWidth","peerHeight","resizeTimeout","createRef","spotlightsPeers","showingToolBar","hiddenToolBar","toolAreaOpen","flexWrap","alignContent","paddingTop","Filmstrip","lastSpeaker","getActivePeerId","peerIds","isSharingCamera","newState","rootContainer","availableWidth","availableSpeakerHeight","availableFilmstripHeight","activePeerContainer","speakerWidth","speakerHeight","filmStripContainer","filmStripHeight","filmStripWidth","myId","activePeerId","speakerStyle","peerStyle","speaker","filmStrip","Grid","container","justify","item","filmItem","spotlightsElement","gridTemplateColumns","gridTemplateRows","PeerAudio","_audioOutputDevice","audioOutputDevice","_setTrack","_setOutputDevice","audio","setSinkId","AudioPeersContainer","micConsumers","selectedAudioOutputDevice","data-component","fullScreenConsumer","icon","incompatibleVideo","consumerVisible","visible","NewWindow","handleToggleFullscreen","fullscreen","documentElement","handleFullscreenChange","createElement","windowCheckerInterval","released","mounted","ReactDOM","createPortal","data-tip","data-place","data-type","openChild","url","features","onBlock","center","outerWidth","screenX","outerHeight","screenY","screenLeft","undefined","screen","screenTop","innerWidth","innerHeight","obj","push","join","closed","release","body","appendChild","copyStyles","Array","from","styleSheets","styleSheet","rules","cssRules","err","newStyleEl","cssRule","cssText","returnText","split","line","slice","location","origin","createTextNode","head","newLinkEl","rel","close","onUnload","defaultProps","FullView","videoProfile","loading","VideoWindowContainer","promotionInProgress","lobbyPeersPromotionInProgress","canPromote","ListItem","ListItemAvatar","Avatar","ListItemText","primary","promoteLobbyPeer","handleCloseLockDialog","handleAccessCode","dialogPaper","lock","Dialog","lockDialogOpen","DialogTitle","List","dense","subheader","ListSubheader","DialogContent","DialogContentText","gutterBottom","DialogActions","promoteAllLobbyPeers","NoiseSlider","rail","mark","markActive","Slider","setEchoCancellation","settingsActions","setAutoGainControl","setNoiseSuppression","setVoiceActivatedUnmute","setting","switchLabel","nested","paddingBottom","paddingRight","formControl","audioSettingsOpen","setAudioSettingsOpen","videoSettingsOpen","setVideoSettingsOpen","resolutions","webcams","audioDevices","audioOutputDevices","webcamDevices","autoComplete","FormControl","Select","selectedWebcam","restart","newDeviceId","displayEmpty","autoWidth","selectEmpty","webcam","MenuItem","deviceId","FormHelperText","Collapse","in","resolution","newResolution","screenSharingFrameRate","newFrameRate","selectedAudioDevice","audioOutputSupportedBrowsers","changeAudioOutputDevice","audioOutputInProgress","audioOutput","FormControlLabel","control","Switch","checked","echoCancellation","labelPlacement","autoGainControl","noiseSuppression","slider","min","max","valueLabelDisplay","_setNoiseThreshold","marks","onTogglePermanentTopBar","onToggleHiddenControls","onToggleShowNotifications","onToggleButtonControlBar","onToggleDrawerOverlayed","handleChangeMode","isMobile","modes","mode","drawerOverlayed","showNotifications","onToggleAdvancedMode","onToggleNotificationSounds","notificationSounds","lockLastN","lastN","changeMaxSpotlights","maxLastN","_","handleCloseSettings","setSettingsTab","currentSettingsTab","settingsOpen","PulsingBadge","badge","secondary","main","animation","hasExtraVideoPermission","hasLockPermission","hasPromotionPermission","peersLength","loggedIn","loginEnabled","unread","canProduceExtraVideo","canLock","setToolbarsVisible","setSettingsOpen","setExtraVideoOpen","extraVideoOpen","setHelpOpen","helpOpen","setAboutOpen","aboutOpen","setLockDialogOpen","toggleToolArea","openUsersTab","persistentDrawerOpen","menuButton","logo","up","show","hide","grow","sectionDesktop","sectionMobile","disabledButton","moreAction","mobileMoreAnchorEl","setMobileMoreAnchorEl","anchorEl","setAnchorEl","currentMenu","setCurrentMenu","handleMenuOpen","menu","currentTarget","handleMenuClose","onFullscreen","isMenuOpen","isMobileMenuOpen","lockTooltip","locked","fullscreenTooltip","loginTooltip","Toolbar","noWrap","aria-owns","aria-haspopup","unlockRoom","lockRoom","logout","login","Popover","transformOrigin","onExited","getContentAnchorEl","Menu","handleCloseExtraVideo","videoDevice","setVideoDevice","videoDevices","addExtraVideo","move","shortcuts","fromCharCode","handleCloseHelp","whiteSpace","minWidth","handleCloseAbout","dividers","paragraph","align","Link","process","Divider","light","supportUrl","privacyUrl","TIMEOUT","hideTimeout","Room","waitForHide","idle","handleMovement","View","filmstrip","democratic","isElectron","buttonText","CssBaseline","Hidden","implementation","SwipeableDrawer","anchor","drawerPaper","ModalProps","keepMounted","drawer","Drawer","os","backgroundAttachment"],"mappings":"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","file":"static/js/room.e249fa9e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/avatar-empty.23a3776b.jpeg\";","import PropTypes from 'prop-types';\n\nexport const Room = PropTypes.shape(\n\t{\n\t\tstate : PropTypes.oneOf(\n\t\t\t[ 'new', 'connecting', 'connected', 'closed' ]).isRequired,\n\t\tactiveSpeakerId : PropTypes.string\n\t});\n\nexport const Me = PropTypes.shape(\n\t{\n\t\tid               : PropTypes.string.isRequired,\n\t\tcanSendMic       : PropTypes.bool.isRequired,\n\t\tcanSendWebcam    : PropTypes.bool.isRequired,\n\t\twebcamInProgress : PropTypes.bool.isRequired\n\t});\n\nexport const Producer = PropTypes.shape(\n\t{\n\t\tid          : PropTypes.string.isRequired,\n\t\tsource      : PropTypes.oneOf([ 'mic', 'webcam', 'screen', 'extravideo' ]).isRequired,\n\t\tdeviceLabel : PropTypes.string,\n\t\ttype        : PropTypes.oneOf([ 'front', 'back', 'screen', 'extravideo' ]),\n\t\tpaused      : PropTypes.bool.isRequired,\n\t\ttrack       : PropTypes.any,\n\t\tcodec       : PropTypes.string.isRequired\n\t});\n\nexport const Peer = PropTypes.shape(\n\t{\n\t\tid          : PropTypes.string.isRequired,\n\t\tdisplayName : PropTypes.string,\n\t\tconsumers   : PropTypes.arrayOf(PropTypes.string).isRequired\n\t});\n\nexport const Consumer = PropTypes.shape(\n\t{\n\t\tid             : PropTypes.string.isRequired,\n\t\tpeerId         : PropTypes.string.isRequired,\n\t\tsource         : PropTypes.oneOf([ 'mic', 'webcam', 'screen', 'extravideo' ]).isRequired,\n\t\tlocallyPaused  : PropTypes.bool.isRequired,\n\t\tremotelyPaused : PropTypes.bool.isRequired,\n\t\tprofile        : PropTypes.oneOf([ 'none', 'default', 'low', 'medium', 'high' ]),\n\t\ttrack          : PropTypes.any,\n\t\tcodec          : PropTypes.string\n\t});\n\nexport const Notification = PropTypes.shape(\n\t{\n\t\tid      : PropTypes.string.isRequired,\n\t\ttype    : PropTypes.oneOf([ 'info', 'error' ]).isRequired,\n\t\ttimeout : PropTypes.number\n\t});\n\nexport const Message = PropTypes.shape(\n\t{\n\t\ttype      : PropTypes.string,\n\t\tcomponent : PropTypes.string,\n\t\ttext      : PropTypes.string,\n\t\tsender    : PropTypes.string\n\t});\n\nexport const FileEntryProps = PropTypes.shape(\n\t{\n\t\tdata : PropTypes.shape({\n\t\t\tid      : PropTypes.string.isRequired,\n\t\t\tpicture : PropTypes.string,\n\t\t\tfile    : PropTypes.shape({\n\t\t\t\tmagnet : PropTypes.string.isRequired\n\t\t\t}).isRequired,\n\t\t\tme : PropTypes.bool\n\t\t}).isRequired,\n\t\tnotify : PropTypes.func.isRequired\n\t});","export const toggleToolArea = () =>\n\t({\n\t\ttype : 'TOGGLE_TOOL_AREA'\n\t});\n\nexport const openToolArea = () =>\n\t({\n\t\ttype : 'OPEN_TOOL_AREA'\n\t});\n\nexport const closeToolArea = () =>\n\t({\n\t\ttype : 'CLOSE_TOOL_AREA'\n\t});\n\nexport const setToolTab = (toolTab) =>\n\t({\n\t\ttype    : 'SET_TOOL_TAB',\n\t\tpayload : { toolTab }\n\t});","const key = {\n\tfullscreenEnabled : 0,\n\tfullscreenElement : 1,\n\trequestFullscreen : 2,\n\texitFullscreen    : 3,\n\tfullscreenchange  : 4,\n\tfullscreenerror   : 5\n};\n\nconst webkit = [\n\t'webkitFullscreenEnabled',\n\t'webkitFullscreenElement',\n\t'webkitRequestFullscreen',\n\t'webkitExitFullscreen',\n\t'webkitfullscreenchange',\n\t'webkitfullscreenerror'\n];\n\nconst moz = [\n\t'mozFullScreenEnabled',\n\t'mozFullScreenElement',\n\t'mozRequestFullScreen',\n\t'mozCancelFullScreen',\n\t'mozfullscreenchange',\n\t'mozfullscreenerror'\n];\n\nconst ms = [\n\t'msFullscreenEnabled',\n\t'msFullscreenElement',\n\t'msRequestFullscreen',\n\t'msExitFullscreen',\n\t'MSFullscreenChange',\n\t'MSFullscreenError'\n];\n\nexport default class FullScreen\n{\n\tconstructor(document)\n\t{\n\t\tthis.document = document;\n\t\tthis.vendor = (\n\t\t\t('fullscreenEnabled' in this.document && Object.keys(key)) ||\n\t\t\t(webkit[0] in this.document && webkit) ||\n\t\t\t(moz[0] in this.document && moz) ||\n\t\t\t(ms[0] in this.document && ms) ||\n\t\t\t[]\n\t\t);\n\t}\n\n\trequestFullscreen(element)\n\t{\n\t\telement[this.vendor[key.requestFullscreen]]();\n\t}\n\n\trequestFullscreenFunction(element)\n\t{\n\t\t// eslint-disable-next-line\n\t\telement[this.vendor[key.requestFullscreen]];\n\t}\n\n\taddEventListener(type, handler)\n\t{\n\t\tthis.document.addEventListener(this.vendor[key[type]], handler);\n\t}\n\n\tremoveEventListener(type, handler)\n\t{\n\t\tthis.document.removeEventListener(this.vendor[key[type]], handler);\n\t}\n\n\tget exitFullscreen()\n\t{\n\t\treturn this.document[this.vendor[key.exitFullscreen]].bind(this.document);\n\t}\n\n\tget fullscreenEnabled()\n\t{\n\t\treturn Boolean(this.document[this.vendor[key.fullscreenEnabled]]);\n\t}\n\tset fullscreenEnabled(val) {}\n\n\tget fullscreenElement()\n\t{\n\t\treturn this.document[this.vendor[key.fullscreenElement]];\n\t}\n\tset fullscreenElement(val) {}\n\n\tget onfullscreenchange()\n\t{\n\t\treturn this.document[`on${this.vendor[key.fullscreenchange]}`.toLowerCase()];\n\t}\n\n\tset onfullscreenchange(handler)\n\t{\n\t\tthis.document[`on${this.vendor[key.fullscreenchange]}`.toLowerCase()] = handler;\n\t}\n\n\tget onfullscreenerror()\n\t{\n\t\treturn this.document[`on${this.vendor[key.fullscreenerror]}`.toLowerCase()];\n\t}\n\n\tset onfullscreenerror(handler)\n\t{\n\t\tthis.document[`on${this.vendor[key.fullscreenerror]}`.toLowerCase()] = handler;\n\t}\n}\n","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withSnackbar } from 'notistack';\nimport * as notificationActions from '../../actions/notificationActions';\n\nconst notificationPosition = window.config.notificationPosition || 'right';\n\nclass Notifications extends Component\n{\n\tdisplayed = [];\n\n\tstoreDisplayed = (id) =>\n\t{\n\t\tthis.displayed = [ ...this.displayed, id ];\n\t};\n\n\tshouldComponentUpdate({ notifications: newNotifications = [] })\n\t{\n\t\tconst { notifications: currentNotifications } = this.props;\n\n\t\tlet notExists = false;\n\n\t\tfor (let i = 0; i < newNotifications.length; i += 1)\n\t\t{\n\t\t\tif (notExists) continue;\n\n\t\t\tnotExists = notExists ||\n\t\t\t\t!currentNotifications.filter(({ id }) => newNotifications[i].id === id).length;\n\t\t}\n\n\t\treturn notExists;\n\t}\n\n\tcomponentDidUpdate()\n\t{\n\t\tconst { notifications = [] } = this.props;\n\n\t\tnotifications.forEach((notification) =>\n\t\t{\n\t\t\t// Do nothing if snackbar is already displayed\n\t\t\tif (this.displayed.includes(notification.id)) return;\n\t\t\t// Display snackbar using notistack\n\t\t\tthis.props.enqueueSnackbar(notification.text,\n\t\t\t\t{\n\t\t\t\t\tvariant          : notification.type,\n\t\t\t\t\tautoHideDuration : notification.timeout,\n\t\t\t\t\tanchorOrigin     : {\n\t\t\t\t\t\tvertical   : 'bottom',\n\t\t\t\t\t\thorizontal : notificationPosition\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\t// Keep track of snackbars that we've displayed\n\t\t\tthis.storeDisplayed(notification.id);\n\t\t\t// Dispatch action to remove snackbar from redux store\n\t\t\tthis.props.removeNotification(notification.id);\n\t\t});\n\t}\n\n\trender()\n\t{\n\t\treturn null;\n\t}\n}\n\nNotifications.propTypes =\n{\n\tnotifications      : PropTypes.array.isRequired,\n\tenqueueSnackbar    : PropTypes.func.isRequired,\n\tremoveNotification : PropTypes.func.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tnotifications : state.notifications\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tremoveNotification : (notificationId) =>\n\t\t\tdispatch(notificationActions.removeNotification({ notificationId }))\n\t});\n\nexport default withSnackbar(\n\tconnect(\n\t\tmapStateToProps,\n\t\tmapDispatchToProps,\n\t\tnull,\n\t\t{\n\t\t\tareStatesEqual : (next, prev) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tprev.notifications === next.notifications\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t)(Notifications)\n);\n","import { createSelector } from 'reselect';\n\nconst meRolesSelect = (state) => state.me.roles;\nconst roomPermissionsSelect = (state) => state.room.roomPermissions;\nconst roomAllowWhenRoleMissing = (state) => state.room.allowWhenRoleMissing;\nconst producersSelect = (state) => state.producers;\nconst consumersSelect = (state) => state.consumers;\nconst spotlightsSelector = (state) => state.room.spotlights;\nconst peersSelector = (state) => state.peers;\nconst lobbyPeersSelector = (state) => state.lobbyPeers;\nconst getPeerConsumers = (state, id) =>\n\t(state.peers[id] ? state.peers[id].consumers : null);\nconst getAllConsumers = (state) => state.consumers;\nconst peersKeySelector = createSelector(\n\tpeersSelector,\n\t(peers) => Object.keys(peers)\n);\n\nexport const peersValueSelector = createSelector(\n\tpeersSelector,\n\t(peers) => Object.values(peers)\n);\n\nexport const lobbyPeersKeySelector = createSelector(\n\tlobbyPeersSelector,\n\t(lobbyPeers) => Object.keys(lobbyPeers)\n);\n\nexport const micProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'mic')\n);\n\nexport const webcamProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'webcam')\n);\n\nexport const screenProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'screen')\n);\n\nexport const extraVideoProducersSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).filter((producer) => producer.source === 'extravideo')\n);\n\nexport const micProducerSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).find((producer) => producer.source === 'mic')\n);\n\nexport const webcamProducerSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).find((producer) => producer.source === 'webcam')\n);\n\nexport const screenProducerSelector = createSelector(\n\tproducersSelect,\n\t(producers) => Object.values(producers).find((producer) => producer.source === 'screen')\n);\n\nexport const micConsumerSelector = createSelector(\n\tconsumersSelect,\n\t(consumers) => Object.values(consumers).filter((consumer) => consumer.source === 'mic')\n);\n\nexport const webcamConsumerSelector = createSelector(\n\tconsumersSelect,\n\t(consumers) => Object.values(consumers).filter((consumer) => consumer.source === 'webcam')\n);\n\nexport const screenConsumerSelector = createSelector(\n\tconsumersSelect,\n\t(consumers) => Object.values(consumers).filter((consumer) => consumer.source === 'screen')\n);\n\nexport const spotlightScreenConsumerSelector = createSelector(\n\tspotlightsSelector,\n\tconsumersSelect,\n\t(spotlights, consumers) =>\n\t\tObject.values(consumers).filter(\n\t\t\t(consumer) => consumer.source === 'screen' && spotlights.includes(consumer.peerId)\n\t\t)\n);\n\nexport const spotlightExtraVideoConsumerSelector = createSelector(\n\tspotlightsSelector,\n\tconsumersSelect,\n\t(spotlights, consumers) =>\n\t\tObject.values(consumers).filter(\n\t\t\t(consumer) => consumer.source === 'extravideo' && spotlights.includes(consumer.peerId)\n\t\t)\n);\n\nexport const passiveMicConsumerSelector = createSelector(\n\tspotlightsSelector,\n\tconsumersSelect,\n\t(spotlights, consumers) =>\n\t\tObject.values(consumers).filter(\n\t\t\t(consumer) => consumer.source === 'mic' && !spotlights.includes(consumer.peerId)\n\t\t)\n);\n\nexport const spotlightsLengthSelector = createSelector(\n\tspotlightsSelector,\n\t(spotlights) => spotlights.length\n);\n\nexport const spotlightPeersSelector = createSelector(\n\tspotlightsSelector,\n\tpeersKeySelector,\n\t(spotlights, peers) => peers.filter((peerId) => spotlights.includes(peerId))\n);\n\nexport const spotlightSortedPeersSelector = createSelector(\n\tspotlightsSelector,\n\tpeersValueSelector,\n\t(spotlights, peers) =>\n\t\tpeers.filter((peer) => spotlights.includes(peer.id) && !peer.raisedHand)\n\t\t\t.sort((a, b) => String(a.displayName || '').localeCompare(String(b.displayName || '')))\n);\n\nconst raisedHandSortedPeers = createSelector(\n\tpeersValueSelector,\n\t(peers) => peers.filter((peer) => peer.raisedHand)\n\t\t.sort((a, b) => a.raisedHandTimestamp - b.raisedHandTimestamp)\n);\n\nconst peersSortedSelector = createSelector(\n\tspotlightsSelector,\n\tpeersValueSelector,\n\t(spotlights, peers) =>\n\t\tpeers.filter((peer) => !spotlights.includes(peer.id) && !peer.raisedHand)\n\t\t\t.sort((a, b) => String(a.displayName || '').localeCompare(String(b.displayName || '')))\n);\n\nexport const participantListSelector = createSelector(\n\traisedHandSortedPeers,\n\tspotlightSortedPeersSelector,\n\tpeersSortedSelector,\n\t(raisedHands, spotlights, peers) =>\n\t\t[ ...raisedHands, ...spotlights, ...peers ]\n);\n\nexport const peersLengthSelector = createSelector(\n\tpeersSelector,\n\t(peers) => Object.values(peers).length\n);\n\nexport const passivePeersSelector = createSelector(\n\tpeersValueSelector,\n\tspotlightsSelector,\n\t(peers, spotlights) => peers.filter((peer) => !spotlights.includes(peer.id))\n\t\t.sort((a, b) => String(a.displayName || '').localeCompare(String(b.displayName || '')))\n);\n\nexport const raisedHandsSelector = createSelector(\n\tpeersValueSelector,\n\t(peers) => peers.reduce((a, b) => (a + (b.raisedHand ? 1 : 0)), 0)\n);\n\nexport const videoBoxesSelector = createSelector(\n\tspotlightsLengthSelector,\n\tscreenProducersSelector,\n\tspotlightScreenConsumerSelector,\n\textraVideoProducersSelector,\n\tspotlightExtraVideoConsumerSelector,\n\t(\n\t\tspotlightsLength,\n\t\tscreenProducers,\n\t\tscreenConsumers,\n\t\textraVideoProducers,\n\t\textraVideoConsumers\n\t) =>\n\t\tspotlightsLength + 1 + screenProducers.length +\n\t\tscreenConsumers.length + extraVideoProducers.length +\n\t\textraVideoConsumers.length\n);\n\nexport const meProducersSelector = createSelector(\n\tmicProducerSelector,\n\twebcamProducerSelector,\n\tscreenProducerSelector,\n\textraVideoProducersSelector,\n\t(micProducer, webcamProducer, screenProducer, extraVideoProducers) =>\n\t{\n\t\treturn {\n\t\t\tmicProducer,\n\t\t\twebcamProducer,\n\t\t\tscreenProducer,\n\t\t\textraVideoProducers\n\t\t};\n\t}\n);\n\nexport const makePeerConsumerSelector = () =>\n{\n\treturn createSelector(\n\t\tgetPeerConsumers,\n\t\tgetAllConsumers,\n\t\t(consumers, allConsumers) =>\n\t\t{\n\t\t\tif (!consumers)\n\t\t\t\treturn null;\n\n\t\t\tconst consumersArray = consumers\n\t\t\t\t.map((consumerId) => allConsumers[consumerId]);\n\t\t\tconst micConsumer =\n\t\t\t\tconsumersArray.find((consumer) => consumer.source === 'mic');\n\t\t\tconst webcamConsumer =\n\t\t\t\tconsumersArray.find((consumer) => consumer.source === 'webcam');\n\t\t\tconst screenConsumer =\n\t\t\t\tconsumersArray.find((consumer) => consumer.source === 'screen');\n\t\t\tconst extraVideoConsumers =\n\t\t\t\tconsumersArray.filter((consumer) => consumer.source === 'extravideo');\n\n\t\t\treturn { micConsumer, webcamConsumer, screenConsumer, extraVideoConsumers };\n\t\t}\n\t);\n};\n\n// Very important that the Components that use this\n// selector need to check at least these state changes:\n//\n// areStatesEqual : (next, prev) =>\n// {\n// \t\treturn (\n// \t\t\tprev.room.roomPermissions === next.room.roomPermissions &&\n// \t\t\tprev.room.allowWhenRoleMissing === next.room.allowWhenRoleMissing &&\n// \t\t\tprev.peers === next.peers &&\n// \t\t\tprev.me.roles === next.me.roles\n// \t\t);\n// }\nexport const makePermissionSelector = (permission) =>\n{\n\treturn createSelector(\n\t\tmeRolesSelect,\n\t\troomPermissionsSelect,\n\t\troomAllowWhenRoleMissing,\n\t\tpeersValueSelector,\n\t\t(roles, roomPermissions, allowWhenRoleMissing, peers) =>\n\t\t{\n\t\t\tif (!roomPermissions)\n\t\t\t\treturn false;\n\n\t\t\tconst permitted = roles.some((role) =>\n\t\t\t\troomPermissions[permission].includes(role)\n\t\t\t);\n\n\t\t\tif (permitted)\n\t\t\t\treturn true;\n\n\t\t\tif (!allowWhenRoleMissing)\n\t\t\t\treturn false;\n\n\t\t\t// Allow if config is set, and no one is present\n\t\t\tif (allowWhenRoleMissing.includes(permission) &&\n\t\t\t\tpeers.filter(\n\t\t\t\t\t(peer) =>\n\t\t\t\t\t\tpeer.roles.some(\n\t\t\t\t\t\t\t(role) => roomPermissions[permission].includes(role)\n\t\t\t\t\t\t)\n\t\t\t\t).length === 0\n\t\t\t)\n\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t}\n\t);\n};","export const permissions = {\n\t// The role(s) have permission to lock/unlock a room\n\tCHANGE_ROOM_LOCK : 'CHANGE_ROOM_LOCK',\n\t// The role(s) have permission to promote a peer from the lobby\n\tPROMOTE_PEER     : 'PROMOTE_PEER',\n\t// The role(s) have permission to send chat messages\n\tSEND_CHAT        : 'SEND_CHAT',\n\t// The role(s) have permission to moderate chat\n\tMODERATE_CHAT    : 'MODERATE_CHAT',\n\t// The role(s) have permission to share screen\n\tSHARE_SCREEN     : 'SHARE_SCREEN',\n\t// The role(s) have permission to produce extra video\n\tEXTRA_VIDEO      : 'EXTRA_VIDEO',\n\t// The role(s) have permission to share files\n\tSHARE_FILE       : 'SHARE_FILE',\n\t// The role(s) have permission to moderate files\n\tMODERATE_FILES   : 'MODERATE_FILES',\n\t// The role(s) have permission to moderate room (e.g. kick user)\n\tMODERATE_ROOM    : 'MODERATE_ROOM'\n};","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withRoomContext } from '../../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay         : 'flex',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tboxShadow       : '0 2px 5px 2px rgba(0, 0, 0, 0.2)',\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 1)'\n\t\t},\n\t\tlistheader :\n\t\t{\n\t\t\tpadding    : theme.spacing(1),\n\t\t\tfontWeight : 'bolder'\n\t\t},\n\t\tactionButton :\n\t\t{\n\t\t\tmarginLeft : 'auto'\n\t\t}\n\t});\n\nconst ChatModerator = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\tisChatModerator,\n\t\troom,\n\t\tclasses\n\t} = props;\n\n\tif (!isChatModerator)\n\t\treturn null;\n\n\treturn (\n\t\t<ul className={classes.root}>\n\t\t\t<li className={classes.listheader}>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.moderatoractions'\n\t\t\t\t\tdefaultMessage='Moderator actions'\n\t\t\t\t/>\n\t\t\t</li>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.clearChat',\n\t\t\t\t\tdefaultMessage : 'Clear chat'\n\t\t\t\t})}\n\t\t\t\tclassName={classes.actionButton}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.clearChatInProgress}\n\t\t\t\tonClick={() => roomClient.clearChat()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.clearChat'\n\t\t\t\t\tdefaultMessage='Clear chat'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t</ul>\n\t);\n};\n\nChatModerator.propTypes =\n{\n\troomClient      : PropTypes.any.isRequired,\n\tisChatModerator : PropTypes.bool,\n\troom            : PropTypes.object,\n\tclasses         : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.MODERATE_CHAT);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\tisChatModerator : hasPermission(state),\n\t\t\troom            : state.room\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ChatModerator)));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport DOMPurify from 'dompurify';\nimport marked from 'marked';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { useIntl } from 'react-intl';\n\nconst linkRenderer = new marked.Renderer();\n\nlinkRenderer.link = (href, title, text) =>\n{\n\ttitle = title ? title : href;\n\ttext = text ? text : href;\n\n\treturn `<a target='_blank' href='${ href }' title='${ title }'>${ text }</a>`;\n};\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay      : 'flex',\n\t\t\tmarginBottom : theme.spacing(1),\n\t\t\tpadding      : theme.spacing(1),\n\t\t\tflexShrink   : 0\n\t\t},\n\t\tselfMessage :\n\t\t{\n\t\t\tmarginLeft : 'auto'\n\t\t},\n\t\tremoteMessage :\n\t\t{\n\t\t\tmarginRight : 'auto'\n\t\t},\n\t\ttext :\n\t\t{\n\t\t\t'& p' :\n\t\t\t{\n\t\t\t\tmargin : 0\n\t\t\t}\n\t\t},\n\t\tcontent :\n\t\t{\n\t\t\tmarginLeft : theme.spacing(1)\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem',\n\t\t\talignSelf    : 'center'\n\t\t}\n\t});\n\nconst Message = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\tself,\n\t\tpicture,\n\t\ttext,\n\t\ttime,\n\t\tname,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper\n\t\t\tclassName={classnames(\n\t\t\t\tclasses.root,\n\t\t\t\tself ? classes.selfMessage : classes.remoteMessage\n\t\t\t)}\n\t\t>\n\t\t\t<img alt='Avatar' className={classes.avatar} src={picture} />\n\t\t\t<div className={classes.content}>\n\t\t\t\t<Typography\n\t\t\t\t\tclassName={classes.text}\n\t\t\t\t\tvariant='subtitle1'\n\t\t\t\t\t// eslint-disable-next-line react/no-danger\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html : DOMPurify.sanitize(\n\t\t\t\t\t\tmarked.parse(\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t\t{ renderer: linkRenderer }\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tALLOWED_TAGS : [ 'a' ],\n\t\t\t\t\t\t\tALLOWED_ATTR : [ 'href', 'target', 'title' ]\n\t\t\t\t\t\t}\n\t\t\t\t\t) }}\n\t\t\t\t/>\n\t\t\t\t<Typography variant='caption'>\n\t\t\t\t\t{ self ?\n\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.me',\n\t\t\t\t\t\t\tdefaultMessage : 'Me'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t:\n\t\t\t\t\t\tname\n\t\t\t\t\t} - {time}\n\t\t\t\t</Typography>\n\t\t\t</div>\n\t\t</Paper>\n\t);\n};\n\nMessage.propTypes =\n{\n\tself    : PropTypes.bool,\n\tpicture : PropTypes.string,\n\ttext    : PropTypes.string,\n\ttime    : PropTypes.object,\n\tname    : PropTypes.string,\n\tclasses : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(Message);","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { FormattedTime } from 'react-intl';\nimport Message from './Message';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\theight        : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\talignItems    : 'center',\n\t\t\toverflowY     : 'auto',\n\t\t\tpadding       : theme.spacing(1)\n\t\t}\n\t});\n\nclass MessageList extends React.Component\n{\n\tcomponentDidMount()\n\t{\n\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t}\n\n\tgetSnapshotBeforeUpdate()\n\t{\n\t\treturn this.node.scrollTop\n\t\t\t+ this.node.offsetHeight === this.node.scrollHeight;\n\t}\n\n\tshouldComponentUpdate(nextProps)\n\t{\n\t\tif (nextProps.chat.length !== this.props.chat.length)\n\t\t\treturn true;\n\n\t\treturn false;\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, shouldScroll)\n\t{\n\t\tif (shouldScroll)\n\t\t{\n\t\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t\t}\n\t}\n\n\tgetTimeString(time)\n\t{\n\t\treturn (<FormattedTime value={new Date(time)} />);\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tchat,\n\t\t\tmyPicture,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root} ref={(node) => { this.node = node; }}>\n\t\t\t\t{\n\t\t\t\t\tchat.map((message, index) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tconst picture = (message.sender === 'response' ?\n\t\t\t\t\t\t\tmessage.picture : myPicture) || EmptyAvatar;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tself={message.sender === 'client'}\n\t\t\t\t\t\t\t\tpicture={picture}\n\t\t\t\t\t\t\t\ttext={message.text}\n\t\t\t\t\t\t\t\ttime={this.getTimeString(message.time)}\n\t\t\t\t\t\t\t\tname={message.name}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nMessageList.propTypes =\n{\n\tchat      : PropTypes.array,\n\tmyPicture : PropTypes.string,\n\tclasses   : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tchat      : state.chat,\n\t\tmyPicture : state.me.picture\n\t});\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.chat === next.chat &&\n\t\t\t\tprev.me.picture === next.me.picture\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(MessageList));","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport Paper from '@material-ui/core/Paper';\nimport InputBase from '@material-ui/core/InputBase';\nimport IconButton from '@material-ui/core/IconButton';\nimport SendIcon from '@material-ui/icons/Send';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tpadding      : theme.spacing(1),\n\t\t\tdisplay      : 'flex',\n\t\t\talignItems   : 'center',\n\t\t\tborderRadius : 0\n\t\t},\n\t\tinput :\n\t\t{\n\t\t\tmarginLeft : 8,\n\t\t\tflex       : 1\n\t\t},\n\t\ticonButton :\n\t\t{\n\t\t\tpadding : 10\n\t\t}\n\t});\n\nconst ChatInput = (props) =>\n{\n\tconst [ message, setMessage ] = useState('');\n\n\tconst intl = useIntl();\n\n\tconst createNewMessage = (text, sender, name, picture) =>\n\t\t({\n\t\t\ttype : 'message',\n\t\t\ttext,\n\t\t\ttime : Date.now(),\n\t\t\tname,\n\t\t\tsender,\n\t\t\tpicture\n\t\t});\n\n\tconst handleChange = (e) =>\n\t{\n\t\tsetMessage(e.target.value);\n\t};\n\n\tconst {\n\t\troomClient,\n\t\tdisplayName,\n\t\tpicture,\n\t\tcanChat,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper className={classes.root}>\n\t\t\t<InputBase\n\t\t\t\tclassName={classes.input}\n\t\t\t\tplaceholder={intl.formatMessage({\n\t\t\t\t\tid             : 'label.chatInput',\n\t\t\t\t\tdefaultMessage : 'Enter chat message...'\n\t\t\t\t})}\n\t\t\t\tvalue={message || ''}\n\t\t\t\tdisabled={!canChat}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tonKeyPress={(ev) =>\n\t\t\t\t{\n\t\t\t\t\tif (ev.key === 'Enter')\n\t\t\t\t\t{\n\t\t\t\t\t\tev.preventDefault();\n\n\t\t\t\t\t\tif (message && message !== '')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst sendMessage = createNewMessage(message, 'response', displayName, picture);\n\n\t\t\t\t\t\t\troomClient.sendChatMessage(sendMessage);\n\n\t\t\t\t\t\t\tsetMessage('');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tautoFocus\n\t\t\t/>\n\t\t\t<IconButton\n\t\t\t\tcolor='primary'\n\t\t\t\tclassName={classes.iconButton}\n\t\t\t\taria-label='Send'\n\t\t\t\tdisabled={!canChat}\n\t\t\t\tonClick={() =>\n\t\t\t\t{\n\t\t\t\t\tif (message && message !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\tconst sendMessage = createNewMessage(message, 'response', displayName, picture);\n\n\t\t\t\t\t\troomClient.sendChatMessage(sendMessage);\n\n\t\t\t\t\t\tsetMessage('');\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<SendIcon />\n\t\t\t</IconButton>\n\t\t</Paper>\n\t);\n};\n\nChatInput.propTypes =\n{\n\troomClient  : PropTypes.object.isRequired,\n\tdisplayName : PropTypes.string,\n\tpicture     : PropTypes.string,\n\tcanChat     : PropTypes.bool.isRequired,\n\tclasses     : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.SEND_CHAT);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\tdisplayName : state.settings.displayName,\n\t\t\tpicture     : state.me.picture,\n\t\t\tcanChat     : hasPermission(state)\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(\n\tconnect(\n\t\tmakeMapStateToProps,\n\t\tnull,\n\t\tnull,\n\t\t{\n\t\t\tareStatesEqual : (next, prev) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\tprev.room === next.room &&\n\t\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\t\tprev.peers === next.peers &&\n\t\t\t\t\tprev.settings.displayName === next.settings.displayName &&\n\t\t\t\t\tprev.me.picture === next.me.picture\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t)(withStyles(styles)(ChatInput))\n);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport ChatModerator from './ChatModerator';\nimport MessageList from './MessageList';\nimport ChatInput from './ChatInput';\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\twidth         : '100%',\n\t\t\theight        : '100%',\n\t\t\toverflowY     : 'auto'\n\t\t}\n\t});\n\nconst Chat = (props) =>\n{\n\tconst {\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper className={classes.root}>\n\t\t\t<ChatModerator />\n\t\t\t<MessageList />\n\t\t\t<ChatInput />\n\t\t</Paper>\n\t);\n};\n\nChat.propTypes =\n{\n\tclasses : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(Chat);","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRoomContext } from '../../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport { FormattedMessage } from 'react-intl';\nimport magnet from 'magnet-uri';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay              : 'flex',\n\t\t\talignItems           : 'center',\n\t\t\twidth                : '100%',\n\t\t\tpadding              : theme.spacing(1),\n\t\t\tboxShadow            : '0px 1px 5px 0px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 3px 1px -2px rgba(0, 0, 0, 0.12)',\n\t\t\t'&:not(:last-child)' :\n\t\t\t{\n\t\t\t\tmarginBottom : theme.spacing(1)\n\t\t\t}\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem'\n\t\t},\n\t\ttext :\n\t\t{\n\t\t\tmargin  : 0,\n\t\t\tpadding : theme.spacing(1)\n\t\t},\n\t\tfileContent :\n\t\t{\n\t\t\tdisplay    : 'flex',\n\t\t\talignItems : 'center'\n\t\t},\n\t\tfileInfo :\n\t\t{\n\t\t\tdisplay    : 'flex',\n\t\t\talignItems : 'center',\n\t\t\tpadding    : theme.spacing(1)\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tmarginRight : 'auto'\n\t\t}\n\t});\n\nclass File extends React.PureComponent\n{\n\trender()\n\t{\n\t\tconst {\n\t\t\troomClient,\n\t\t\tdisplayName,\n\t\t\tpicture,\n\t\t\tcanShareFiles,\n\t\t\tmagnetUri,\n\t\t\tfile,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<img alt='Avatar' className={classes.avatar} src={picture} />\n\n\t\t\t\t<div className={classes.fileContent}>\n\t\t\t\t\t{ file.files &&\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='filesharing.finished'\n\t\t\t\t\t\t\t\t\tdefaultMessage='File finished downloading'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t{ file.files.map((sharedFile, i) => (\n\t\t\t\t\t\t\t\t<div className={classes.fileInfo} key={i}>\n\t\t\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t\t\t{sharedFile.name}\n\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient.saveFile(sharedFile);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\t\tid='filesharing.save'\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage='Save'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t}\n\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='filesharing.sharedFile'\n\t\t\t\t\t\t\tdefaultMessage='{displayName} shared a file'\n\t\t\t\t\t\t\tvalues={{\n\t\t\t\t\t\t\t\tdisplayName\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t{ (!file.active && !file.files) &&\n\t\t\t\t\t\t<div className={classes.fileInfo}>\n\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t{ magnet.decode(magnetUri).dn }\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t{ canShareFiles ?\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\troomClient.handleDownload(magnetUri);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='filesharing.download'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Download'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='label.fileSharingUnsupported'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='File sharing not supported'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ file.timeout &&\n\t\t\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='filesharing.missingSeeds'\n\t\t\t\t\t\t\t\tdefaultMessage={\n\t\t\t\t\t\t\t\t\t`If this process takes a long time, there might not \n\t\t\t\t\t\t\t\t\tbe anyone seeding this torrent. Try asking someone to \n\t\t\t\t\t\t\t\t\treupload the file that you want.`\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ file.active &&\n\t\t\t\t\t\t<progress value={file.progress} />\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nFile.propTypes = {\n\troomClient    : PropTypes.object.isRequired,\n\tmagnetUri     : PropTypes.string.isRequired,\n\tdisplayName   : PropTypes.string.isRequired,\n\tpicture       : PropTypes.string,\n\tcanShareFiles : PropTypes.bool.isRequired,\n\tfile          : PropTypes.object.isRequired,\n\tclasses       : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state, { magnetUri }) =>\n{\n\treturn {\n\t\tfile          : state.files[magnetUri],\n\t\tcanShareFiles : state.me.canShareFiles\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.files === next.files &&\n\t\t\t\tprev.me.canShareFiles === next.me.canShareFiles\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(File)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { injectIntl } from 'react-intl';\nimport File from './File';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\theight        : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\talignItems    : 'center',\n\t\t\toverflowY     : 'auto',\n\t\t\tpadding       : theme.spacing(1)\n\t\t}\n\t});\n\nclass FileList extends React.PureComponent\n{\n\tcomponentDidMount()\n\t{\n\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t}\n\n\tgetSnapshotBeforeUpdate()\n\t{\n\t\treturn this.node.scrollTop\n\t\t\t+ this.node.offsetHeight === this.node.scrollHeight;\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, shouldScroll)\n\t{\n\t\tif (shouldScroll)\n\t\t{\n\t\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tfiles,\n\t\t\tme,\n\t\t\tpeers,\n\t\t\tintl,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root} ref={(node) => { this.node = node; }}>\n\t\t\t\t{ Object.entries(files).map(([ magnetUri, file ]) =>\n\t\t\t\t{\n\t\t\t\t\tlet displayName;\n\n\t\t\t\t\tlet filePicture;\n\n\t\t\t\t\tif (me.id === file.peerId)\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName = intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.me',\n\t\t\t\t\t\t\tdefaultMessage : 'Me'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfilePicture = me.picture;\n\t\t\t\t\t}\n\t\t\t\t\telse if (peers[file.peerId])\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName = peers[file.peerId].displayName;\n\t\t\t\t\t\tfilePicture = peers[file.peerId].picture;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplayName = intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.unknown',\n\t\t\t\t\t\t\tdefaultMessage : 'Unknown'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<File\n\t\t\t\t\t\t\tkey={magnetUri}\n\t\t\t\t\t\t\tmagnetUri={magnetUri}\n\t\t\t\t\t\t\tdisplayName={displayName}\n\t\t\t\t\t\t\tpicture={filePicture || EmptyAvatar}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nFileList.propTypes =\n{\n\tfiles   : PropTypes.object.isRequired,\n\tme      : appPropTypes.Me.isRequired,\n\tpeers   : PropTypes.object.isRequired,\n\tintl    : PropTypes.object.isRequired,\n\tclasses : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tfiles : state.files,\n\t\tme    : state.me,\n\t\tpeers : state.peers\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.files === next.files &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(injectIntl(FileList)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withRoomContext } from '../../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay         : 'flex',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tboxShadow       : '0 2px 5px 2px rgba(0, 0, 0, 0.2)',\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 1)'\n\t\t},\n\t\tlistheader :\n\t\t{\n\t\t\tpadding    : theme.spacing(1),\n\t\t\tfontWeight : 'bolder'\n\t\t},\n\t\tactionButton :\n\t\t{\n\t\t\tmarginLeft : 'auto'\n\t\t}\n\t});\n\nconst FileSharingModerator = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\tisFileSharingModerator,\n\t\troom,\n\t\tclasses\n\t} = props;\n\n\tif (!isFileSharingModerator)\n\t\treturn null;\n\n\treturn (\n\t\t<ul className={classes.root}>\n\t\t\t<li className={classes.listheader}>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.moderatoractions'\n\t\t\t\t\tdefaultMessage='Moderator actions'\n\t\t\t\t/>\n\t\t\t</li>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.clearFileSharing',\n\t\t\t\t\tdefaultMessage : 'Clear files'\n\t\t\t\t})}\n\t\t\t\tclassName={classes.actionButton}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.clearFileSharingInProgress}\n\t\t\t\tonClick={() => roomClient.clearFileSharing()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.clearFileSharing'\n\t\t\t\t\tdefaultMessage='Clear files'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t</ul>\n\t);\n};\n\nFileSharingModerator.propTypes =\n{\n\troomClient             : PropTypes.any.isRequired,\n\tisFileSharingModerator : PropTypes.bool,\n\troom                   : PropTypes.object,\n\tclasses                : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.MODERATE_FILES);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\tisFileSharingModerator : hasPermission(state),\n\t\t\troom                   : state.room\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(FileSharingModerator)));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport FileList from './FileList';\nimport FileSharingModerator from './FileSharingModerator';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\twidth         : '100%',\n\t\t\theight        : '100%'\n\t\t},\n\t\tinput :\n\t\t{\n\t\t\tdisplay : 'none'\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tmargin : theme.spacing(1)\n\t\t},\n\t\tshareButtonsWrapper :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t}\n\t});\n\nconst FileSharing = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst handleFileChange = async (event) =>\n\t{\n\t\tif (event.target.files.length > 0)\n\t\t{\n\t\t\tawait props.roomClient.shareFiles(event.target.files);\n\t\t}\n\t};\n\n\tconst {\n\t\tcanShareFiles,\n\t\tbrowser,\n\t\tcanShare,\n\t\tclasses\n\t} = props;\n\n\tconst buttonDescription = canShareFiles ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.shareFile',\n\t\t\tdefaultMessage : 'Share file'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.fileSharingUnsupported',\n\t\t\tdefaultMessage : 'File sharing not supported'\n\t\t});\n\n\tconst buttonGalleryDescription = canShareFiles ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.shareGalleryFile',\n\t\t\tdefaultMessage : 'Share image'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'label.fileSharingUnsupported',\n\t\t\tdefaultMessage : 'File sharing not supported'\n\t\t});\n\n\treturn (\n\t\t<Paper className={classes.root}>\n\t\t\t<FileSharingModerator />\n\t\t\t<div className={classes.shareButtonsWrapper} >\n\t\t\t\t<input\n\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\ttype='file'\n\t\t\t\t\tdisabled={!canShare}\n\t\t\t\t\tonChange={handleFileChange}\n\t\t\t\t\t// Need to reset to be able to share same file twice\n\t\t\t\t\tonClick={(e) => (e.target.value = null)}\n\t\t\t\t\tid='share-files-button'\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\ttype='file'\n\t\t\t\t\tdisabled={!canShare}\n\t\t\t\t\tonChange={handleFileChange}\n\t\t\t\t\taccept='image/*'\n\t\t\t\t\tid='share-files-gallery-button'\n\t\t\t\t/>\n\t\t\t\t<label htmlFor='share-files-button'>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\tdisabled={!canShareFiles || !canShare}\n\t\t\t\t\t>\n\t\t\t\t\t\t{buttonDescription}\n\t\t\t\t\t</Button>\n\t\t\t\t</label>\n\t\t\t\t{\n\t\t\t\t\t(browser.platform === 'mobile') && canShareFiles && canShare && <label htmlFor='share-files-gallery-button'>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\tcomponent='span'\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\tdisabled={!canShareFiles || !canShare}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{buttonGalleryDescription}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</label>\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<FileList />\n\t\t</Paper>\n\t);\n};\n\nFileSharing.propTypes = {\n\troomClient    : PropTypes.any.isRequired,\n\tbrowser       : PropTypes.object.isRequired,\n\tcanShareFiles : PropTypes.bool.isRequired,\n\ttabOpen       : PropTypes.bool.isRequired,\n\tcanShare      : PropTypes.bool.isRequired,\n\tclasses       : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.SHARE_FILE);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tcanShareFiles : state.me.canShareFiles,\n\t\t\tbrowser       : state.me.browser,\n\t\t\ttabOpen       : state.toolarea.currentToolTab === 'files',\n\t\t\tcanShare      : hasPermission(state)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.me.canShareFiles === next.me.canShareFiles &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.toolarea.currentToolTab === next.toolarea.currentToolTab\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(FileSharing)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { makePeerConsumerSelector } from '../../Selectors';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../../appPropTypes';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { green } from '@material-ui/core/colors';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport VideocamIcon from '@material-ui/icons/Videocam';\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff';\nimport MicIcon from '@material-ui/icons/Mic';\nimport MicOffIcon from '@material-ui/icons/MicOff';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport ScreenIcon from '@material-ui/icons/ScreenShare';\nimport ScreenOffIcon from '@material-ui/icons/StopScreenShare';\nimport ExitIcon from '@material-ui/icons/ExitToApp';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\nimport PanIcon from '@material-ui/icons/PanTool';\nimport RecordVoiceOverIcon from '@material-ui/icons/RecordVoiceOver';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth    : '100%',\n\t\t\toverflow : 'hidden',\n\t\t\tcursor   : 'auto',\n\t\t\tdisplay  : 'flex'\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem',\n\t\t\tmarginTop    : theme.spacing(0.5)\n\t\t},\n\t\tpeerInfo :\n\t\t{\n\t\t\tfontSize    : '1rem',\n\t\t\tdisplay     : 'flex',\n\t\t\tpaddingLeft : theme.spacing(1),\n\t\t\tflexGrow    : 1,\n\t\t\talignItems  : 'center'\n\t\t},\n\t\tindicators :\n\t\t{\n\t\t\tdisplay : 'flex',\n\t\t\tpadding : theme.spacing(1)\n\t\t},\n\t\tbuttons :\n\t\t{\n\t\t\tpadding : theme.spacing(1)\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tcolor      : 'rgba(0, 153, 0, 1)',\n\t\t\tmarginLeft : theme.spacing(2)\n\t\t}\n\t});\n\nconst ListPeer = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\tisModerator,\n\t\tspotlight,\n\t\tpeer,\n\t\tmicConsumer,\n\t\twebcamConsumer,\n\t\tscreenConsumer,\n\t\tchildren,\n\t\tclasses\n\t} = props;\n\n\tconst webcamEnabled = (\n\t\tBoolean(webcamConsumer) &&\n\t\t!webcamConsumer.locallyPaused &&\n\t\t!webcamConsumer.remotelyPaused\n\t);\n\n\tconst micEnabled = (\n\t\tBoolean(micConsumer) &&\n\t\t!micConsumer.locallyPaused &&\n\t\t!micConsumer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenConsumer) &&\n\t\t!screenConsumer.locallyPaused &&\n\t\t!screenConsumer.remotelyPaused\n\t);\n\n\tconst picture = peer.picture || EmptyAvatar;\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<img alt='Peer avatar' className={classes.avatar} src={picture} />\n\n\t\t\t<div className={classes.peerInfo}>\n\t\t\t\t{peer.displayName}\n\t\t\t</div>\n\t\t\t{ peer.raisedHand &&\n\t\t\t\t<IconButton\n\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\tdisabled={!isModerator || peer.raisedHandInProgress}\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\troomClient.lowerPeerHand(peer.id);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<PanIcon />\n\t\t\t\t</IconButton>\n\t\t\t}\n\t\t\t{ spotlight &&\n\t\t\t\t<IconButton\n\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\tdisabled\n\t\t\t\t>\n\t\t\t\t\t<RecordVoiceOverIcon />\n\t\t\t\t</IconButton>\n\t\t\t}\n\t\t\t{ screenConsumer && spotlight &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteScreenSharing',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant share'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'tooltip.muteScreenSharing',\n\t\t\t\t\t\t\tdefaultMessage : 'Mute participant share'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tcolor={screenVisible ? 'primary' : 'secondary'}\n\t\t\t\t\t\tdisabled={peer.peerScreenInProgress}\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\tscreenVisible ?\n\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'screen', true) :\n\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'screen', false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ screenVisible ?\n\t\t\t\t\t\t\t<ScreenIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<ScreenOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{ spotlight &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipantVideo',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant video'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'tooltip.muteParticipantVideo',\n\t\t\t\t\t\t\tdefaultMessage : 'Mute participant video'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tcolor={webcamEnabled ? 'primary' : 'secondary'}\n\t\t\t\t\t\tdisabled={peer.peerVideoInProgress}\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\twebcamEnabled ?\n\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'webcam', true) :\n\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'webcam', false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ webcamEnabled ?\n\t\t\t\t\t\t\t<VideocamIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<VideocamOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'tooltip.muteParticipant',\n\t\t\t\t\tdefaultMessage : 'Mute participant'\n\t\t\t\t})}\n\t\t\t\tplacement='bottom'\n\t\t\t>\n\t\t\t\t<IconButton\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipant',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant'\n\t\t\t\t\t})}\n\t\t\t\t\tcolor={micEnabled ? 'primary' : 'secondary'}\n\t\t\t\t\tdisabled={peer.peerAudioInProgress}\n\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\tmicEnabled ?\n\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', true) :\n\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', false);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ micEnabled ?\n\t\t\t\t\t\t<VolumeUpIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<VolumeOffIcon />\n\t\t\t\t\t}\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t\t{ isModerator &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.kickParticipant',\n\t\t\t\t\t\tdefaultMessage : 'Kick out participant'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'tooltip.kickParticipant',\n\t\t\t\t\t\t\tdefaultMessage : 'Kick out participant'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tdisabled={peer.peerKickInProgress}\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.kickPeer(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ExitIcon />\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{ isModerator && micConsumer &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipantAudioModerator',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant audio globally'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\t\tdisabled={!isModerator || peer.stopPeerAudioInProgress}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.mutePeer(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ !micConsumer.remotelyPaused ?\n\t\t\t\t\t\t\t<MicIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{ isModerator && webcamConsumer &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteParticipantVideoModerator',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant video globally'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\t\tdisabled={!isModerator || peer.stopPeerVideoInProgress}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.stopPeerVideo(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ !webcamConsumer.remotelyPaused ?\n\t\t\t\t\t\t\t<VideocamIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<VideocamOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{ isModerator && screenConsumer &&\n\t\t\t\t<Tooltip\n\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.muteScreenSharingModerator',\n\t\t\t\t\t\tdefaultMessage : 'Mute participant screen share globally'\n\t\t\t\t\t})}\n\t\t\t\t\tplacement='bottom'\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={classes.buttons}\n\t\t\t\t\t\tstyle={{ color: green[500] }}\n\t\t\t\t\t\tdisabled={!isModerator || peer.stopPeerScreenSharingInProgress}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\troomClient.stopPeerScreenSharing(peer.id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ !screenConsumer.remotelyPaused ?\n\t\t\t\t\t\t\t<ScreenIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<ScreenOffIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nListPeer.propTypes =\n{\n\troomClient     : PropTypes.any.isRequired,\n\tadvancedMode   : PropTypes.bool,\n\tisModerator    : PropTypes.bool,\n\tspotlight      : PropTypes.bool,\n\tpeer           : appPropTypes.Peer.isRequired,\n\tmicConsumer    : appPropTypes.Consumer,\n\twebcamConsumer : appPropTypes.Consumer,\n\tscreenConsumer : appPropTypes.Consumer,\n\tchildren       : PropTypes.object,\n\tclasses        : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, { id }) =>\n{\n\tconst getPeerConsumers = makePeerConsumerSelector();\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tpeer : state.peers[id],\n\t\t\t...getPeerConsumers(state, id)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListPeer)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../../appPropTypes';\nimport { useIntl } from 'react-intl';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport PanIcon from '@material-ui/icons/PanTool';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth    : '100%',\n\t\t\toverflow : 'hidden',\n\t\t\tcursor   : 'auto',\n\t\t\tdisplay  : 'flex'\n\t\t},\n\t\tavatar :\n\t\t{\n\t\t\tborderRadius : '50%',\n\t\t\theight       : '2rem',\n\t\t\tmarginTop    : theme.spacing(0.5)\n\t\t},\n\t\tpeerInfo :\n\t\t{\n\t\t\tfontSize    : '1rem',\n\t\t\tdisplay     : 'flex',\n\t\t\tpaddingLeft : theme.spacing(1),\n\t\t\tflexGrow    : 1,\n\t\t\talignItems  : 'center'\n\t\t},\n\t\tbuttons :\n\t\t{\n\t\t\tpadding : theme.spacing(1)\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tcolor : 'rgba(0, 153, 0, 1)'\n\t\t}\n\t});\n\nconst ListMe = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\tme,\n\t\tsettings,\n\t\tclasses\n\t} = props;\n\n\tconst picture = me.picture || EmptyAvatar;\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<img alt='My avatar' className={classes.avatar} src={picture} />\n\n\t\t\t<div className={classes.peerInfo}>\n\t\t\t\t{settings.displayName}\n\t\t\t</div>\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'tooltip.raisedHand',\n\t\t\t\t\tdefaultMessage : 'Raise hand'\n\t\t\t\t})}\n\t\t\t\tplacement='bottom'\n\t\t\t>\n\t\t\t\t<IconButton\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.raisedHand',\n\t\t\t\t\t\tdefaultMessage : 'Raise hand'\n\t\t\t\t\t})}\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tclassnames(me.raisedHand ? classes.green : null, classes.buttons)\n\t\t\t\t\t}\n\t\t\t\t\tdisabled={me.raisedHandInProgress}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\troomClient.setRaisedHand(!me.raisedHand);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<PanIcon />\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t</div>\n\t);\n};\n\nListMe.propTypes =\n{\n\troomClient : PropTypes.object.isRequired,\n\tme         : appPropTypes.Me.isRequired,\n\tsettings   : PropTypes.object.isRequired,\n\tclasses    : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) => ({\n\tme       : state.me,\n\tsettings : state.settings\n});\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.settings === next.settings\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListMe)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tpadding : theme.spacing(1),\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tdivider :\n\t\t{\n\t\t\tmarginLeft : theme.spacing(2)\n\t\t}\n\t});\n\nconst ListModerator = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\troom,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.muteAll',\n\t\t\t\t\tdefaultMessage : 'Mute all'\n\t\t\t\t})}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.muteAllInProgress}\n\t\t\t\tonClick={() => roomClient.muteAllPeers()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.muteAll'\n\t\t\t\t\tdefaultMessage='Mute all'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t\t<div className={classes.divider} />\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.stopAllVideo',\n\t\t\t\t\tdefaultMessage : 'Stop all video'\n\t\t\t\t})}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.stopAllVideoInProgress}\n\t\t\t\tonClick={() => roomClient.stopAllPeerVideo()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.stopAllVideo'\n\t\t\t\t\tdefaultMessage='Stop all video'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t\t<div className={classes.divider} />\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.stopAllScreenSharing',\n\t\t\t\t\tdefaultMessage : 'Stop all screen sharing'\n\t\t\t\t})}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.stopAllScreenSharingInProgress}\n\t\t\t\tonClick={() => roomClient.stopAllPeerScreenSharing()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.stopAllScreenSharing'\n\t\t\t\t\tdefaultMessage='Stop all screen sharing'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t\t<div className={classes.divider} />\n\t\t\t<Button\n\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\tid             : 'room.closeMeeting',\n\t\t\t\t\tdefaultMessage : 'Close meeting'\n\t\t\t\t})}\n\t\t\t\tvariant='contained'\n\t\t\t\tcolor='secondary'\n\t\t\t\tdisabled={room.closeMeetingInProgress}\n\t\t\t\tonClick={() => roomClient.closeMeeting()}\n\t\t\t>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.closeMeeting'\n\t\t\t\t\tdefaultMessage='Close meeting'\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t</div>\n\t);\n};\n\nListModerator.propTypes =\n{\n\troomClient : PropTypes.any.isRequired,\n\troom       : PropTypes.object.isRequired,\n\tclasses    : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) => ({\n\troom : state.room\n});\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListModerator)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = () =>\n\t({\n\t\tvolumeLarge :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\ttop            : 0,\n\t\t\tbottom         : 0,\n\t\t\tright          : 2,\n\t\t\twidth          : 10,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center'\n\t\t},\n\t\tlargeBar :\n\t\t{\n\t\t\twidth              : 6,\n\t\t\tborderRadius       : 6,\n\t\t\tbackground         : 'rgba(yellow, 0.65)',\n\t\t\ttransitionProperty : 'height background-color',\n\t\t\ttransitionDuration : '0.25s',\n\t\t\t'&.level0'         :\n\t\t\t{\n\t\t\t\theight          : 0,\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level1' :\n\t\t\t{\n\t\t\t\theight          : '10%',\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level2' :\n\t\t\t{\n\t\t\t\theight          : '20%',\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level3' :\n\t\t\t{\n\t\t\t\theight          : '30%',\n\t\t\t\tbackgroundColor : 'rgba(255, 255, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level4' :\n\t\t\t{\n\t\t\t\theight          : '40%',\n\t\t\t\tbackgroundColor : 'rgba(255, 165, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level5' :\n\t\t\t{\n\t\t\t\theight          : '50%',\n\t\t\t\tbackgroundColor : 'rgba(255, 165, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level6' :\n\t\t\t{\n\t\t\t\theight          : '60%',\n\t\t\t\tbackgroundColor : 'rgba(255, 165, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level7' :\n\t\t\t{\n\t\t\t\theight          : '70%',\n\t\t\t\tbackgroundColor : 'rgba(255, 100, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level8' :\n\t\t\t{\n\t\t\t\theight          : '80%',\n\t\t\t\tbackgroundColor : 'rgba(255, 60, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level9' :\n\t\t\t{\n\t\t\t\theight          : '90%',\n\t\t\t\tbackgroundColor : 'rgba(255, 30, 0, 0.65)'\n\t\t\t},\n\t\t\t'&.level10' :\n\t\t\t{\n\t\t\t\theight          : '100%',\n\t\t\t\tbackgroundColor : 'rgba(255, 0, 0, 0.65)'\n\t\t\t}\n\t\t},\n\t\tvolumeSmall :\n\t\t{\n\t\t\tfloat          : 'right',\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tjustifyContent : 'flex-start',\n\t\t\twidth          : '1vmin',\n\t\t\tposition       : 'relative',\n\t\t\tbackgroundSize : '75%'\n\t\t},\n\t\tsmallBar :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tbackgroundSize     : '75%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\tbackgroundColor    : 'rgba(0, 0, 0, 1)',\n\t\t\tcursor             : 'pointer',\n\t\t\ttransitionProperty : 'opacity, background-color',\n\t\t\twidth              : 3,\n\t\t\tborderRadius       : 2,\n\t\t\ttransitionDuration : '0.25s',\n\t\t\tposition           : 'absolute',\n\t\t\ttop                : '50%',\n\t\t\ttransform          : 'translateY(-50%)',\n\t\t\t'&.level0'         : { height: 0 },\n\t\t\t'&.level1'         : { height: '0.2vh' },\n\t\t\t'&.level2'         : { height: '0.4vh' },\n\t\t\t'&.level3'         : { height: '0.6vh' },\n\t\t\t'&.level4'         : { height: '0.8vh' },\n\t\t\t'&.level5'         : { height: '1.0vh' },\n\t\t\t'&.level6'         : { height: '1.2vh' },\n\t\t\t'&.level7'         : { height: '1.4vh' },\n\t\t\t'&.level8'         : { height: '1.6vh' },\n\t\t\t'&.level9'         : { height: '1.8vh' },\n\t\t\t'&.level10'        : { height: '2.0vh' }\n\t\t}\n\t});\n\nconst Volume = (props) =>\n{\n\tconst {\n\t\tsmall,\n\t\tvolume,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<div className={small ? classes.volumeSmall : classes.volumeLarge}>\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\tsmall ? classes.smallBar : classes.largeBar, `level${volume}`\n\t\t\t\t)}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nVolume.propTypes =\n{\n\tsmall   : PropTypes.bool,\n\tvolume  : PropTypes.number,\n\tclasses : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, props) =>\n{\n\tconst mapStateToProps = (state) =>\n\t{\n\t\tif (state.peerVolumes[props.id]>state.settings.noiseThreshold)\n\t\t{\n\t\t\treturn {\n\t\t\t\tvolume : Math.round((state.peerVolumes[props.id]+100) / 10)\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn { volume: 0 };\n\t\t}\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default connect(\n\tmakeMapStateToProps\n)(withStyles(styles)(Volume));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tparticipantListSelector,\n\tmakePermissionSelector\n} from '../../Selectors';\nimport { permissions } from '../../../permissions';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport PropTypes from 'prop-types';\nimport { Flipper, Flipped } from 'react-flip-toolkit';\nimport { FormattedMessage } from 'react-intl';\nimport ListPeer from './ListPeer';\nimport ListMe from './ListMe';\nimport ListModerator from './ListModerator';\nimport Volume from '../../Containers/Volume';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth     : '100%',\n\t\t\toverflowY : 'auto',\n\t\t\tpadding   : theme.spacing(1)\n\t\t},\n\t\tlist :\n\t\t{\n\t\t\tlistStyleType   : 'none',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tboxShadow       : '0 2px 5px 2px rgba(0, 0, 0, 0.2)',\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 1)'\n\t\t},\n\t\tlistheader :\n\t\t{\n\t\t\tfontWeight : 'bolder'\n\t\t},\n\t\tlistItem :\n\t\t{\n\t\t\twidth        : '100%',\n\t\t\toverflow     : 'hidden',\n\t\t\tcursor       : 'pointer',\n\t\t\t'&.selected' :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgba(55, 126, 255, 1)'\n\t\t\t},\n\t\t\t'&:not(:last-child)' :\n\t\t\t{\n\t\t\t\tborderBottom : '1px solid #CBCBCB'\n\t\t\t}\n\t\t}\n\t});\n\nclass ParticipantList extends React.PureComponent\n{\n\tcomponentDidMount()\n\t{\n\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t}\n\n\tgetSnapshotBeforeUpdate()\n\t{\n\t\treturn this.node.scrollTop\n\t\t\t+ this.node.offsetHeight === this.node.scrollHeight;\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, shouldScroll)\n\t{\n\t\tif (shouldScroll)\n\t\t{\n\t\t\tthis.node.scrollTop = this.node.scrollHeight;\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\troomClient,\n\t\t\tadvancedMode,\n\t\t\tisModerator,\n\t\t\tparticipants,\n\t\t\tspotlights,\n\t\t\tselectedPeerId,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root} ref={(node) => { this.node = node; }}>\n\t\t\t\t{ isModerator &&\n\t\t\t\t\t<ul className={classes.list}>\n\t\t\t\t\t\t<li className={classes.listheader}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.moderatoractions'\n\t\t\t\t\t\t\t\tdefaultMessage='Moderator actions'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<ListModerator />\n\t\t\t\t\t</ul>\n\t\t\t\t}\n\t\t\t\t<ul className={classes.list}>\n\t\t\t\t\t<li className={classes.listheader}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\tdefaultMessage='Me'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t\t<ListMe />\n\t\t\t\t</ul>\n\t\t\t\t<ul className={classes.list}>\n\t\t\t\t\t<li className={classes.listheader}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='label.participants'\n\t\t\t\t\t\t\tdefaultMessage='Participants'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t\t<Flipper\n\t\t\t\t\t\tflipKey={participants}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ participants.map((peer) => (\n\t\t\t\t\t\t\t<Flipped key={peer.id} flipId={peer.id}>\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tkey={peer.id}\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.listItem, {\n\t\t\t\t\t\t\t\t\t\tselected : peer.id === selectedPeerId\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tonClick={() => roomClient.setSelectedPeer(peer.id)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ spotlights.includes(peer.id) ?\n\t\t\t\t\t\t\t\t\t\t<ListPeer\n\t\t\t\t\t\t\t\t\t\t\tid={peer.id}\n\t\t\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\t\t\tisModerator={isModerator}\n\t\t\t\t\t\t\t\t\t\t\tspotlight\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Volume small id={peer.id} />\n\t\t\t\t\t\t\t\t\t\t</ListPeer>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<ListPeer\n\t\t\t\t\t\t\t\t\t\t\tid={peer.id}\n\t\t\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\t\t\tisModerator={isModerator}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</Flipped>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Flipper>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nParticipantList.propTypes =\n{\n\troomClient     : PropTypes.any.isRequired,\n\tadvancedMode   : PropTypes.bool,\n\tisModerator    : PropTypes.bool,\n\tparticipants   : PropTypes.array,\n\tspotlights     : PropTypes.array,\n\tselectedPeerId : PropTypes.string,\n\tclasses        : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.MODERATE_ROOM);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tisModerator    : hasPermission(state),\n\t\t\tparticipants   : participantListSelector(state),\n\t\t\tspotlights     : state.room.spotlights,\n\t\t\tselectedPeerId : state.room.selectedPeerId\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nconst ParticipantListContainer = withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ParticipantList)));\n\nexport default ParticipantListContainer;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { raisedHandsSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as toolareaActions from '../../actions/toolareaActions';\nimport { useIntl } from 'react-intl';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Badge from '@material-ui/core/Badge';\nimport Chat from './Chat/Chat';\nimport FileSharing from './FileSharing/FileSharing';\nimport ParticipantList from './ParticipantList/ParticipantList';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport IconButton from '@material-ui/core/IconButton';\n\nconst tabs =\n[\n\t'chat',\n\t'files',\n\t'users'\n];\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay         : 'flex',\n\t\t\tflexDirection   : 'column',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : theme.palette.background.paper\n\t\t},\n\t\tappBar :\n\t\t{\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'row'\n\t\t},\n\t\ttabsHeader :\n\t\t{\n\t\t\tflexGrow : 1\n\t\t}\n\t});\n\nconst MeetingDrawer = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\tcurrentToolTab,\n\t\tunreadMessages,\n\t\tunreadFiles,\n\t\traisedHands,\n\t\tcloseDrawer,\n\t\tsetToolTab,\n\t\tclasses,\n\t\ttheme\n\t} = props;\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<AppBar\n\t\t\t\tposition='static'\n\t\t\t\tcolor='default'\n\t\t\t\tclassName={classes.appBar}\n\t\t\t>\n\t\t\t\t<Tabs\n\t\t\t\t\tclassName={classes.tabsHeader}\n\t\t\t\t\tvalue={tabs.indexOf(currentToolTab)}\n\t\t\t\t\tonChange={(event, value) => setToolTab(tabs[value])}\n\t\t\t\t\tindicatorColor='primary'\n\t\t\t\t\ttextColor='primary'\n\t\t\t\t\tvariant='fullWidth'\n\t\t\t\t>\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Badge color='secondary' badgeContent={unreadMessages}>\n\t\t\t\t\t\t\t\t{intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.chat',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Chat'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Badge color='secondary' badgeContent={unreadFiles}>\n\t\t\t\t\t\t\t\t{intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.filesharing',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'File sharing'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<Badge color='secondary' badgeContent={raisedHands}>\n\t\t\t\t\t\t\t\t{intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.participants',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Participants'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</Tabs>\n\t\t\t\t<IconButton onClick={closeDrawer}>\n\t\t\t\t\t{theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n\t\t\t\t</IconButton>\n\t\t\t</AppBar>\n\t\t\t{currentToolTab === 'chat' && <Chat />}\n\t\t\t{currentToolTab === 'files' && <FileSharing />}\n\t\t\t{currentToolTab === 'users' && <ParticipantList />}\n\t\t</div>\n\t);\n};\n\nMeetingDrawer.propTypes =\n{\n\tcurrentToolTab : PropTypes.string.isRequired,\n\tsetToolTab     : PropTypes.func.isRequired,\n\tunreadMessages : PropTypes.number.isRequired,\n\tunreadFiles    : PropTypes.number.isRequired,\n\traisedHands    : PropTypes.number.isRequired,\n\tcloseDrawer    : PropTypes.func.isRequired,\n\tclasses        : PropTypes.object.isRequired,\n\ttheme          : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tcurrentToolTab : state.toolarea.currentToolTab,\n\t\tunreadMessages : state.toolarea.unreadMessages,\n\t\tunreadFiles    : state.toolarea.unreadFiles,\n\t\traisedHands    : raisedHandsSelector(state)\n\t};\n};\n\nconst mapDispatchToProps = {\n\tsetToolTab : toolareaActions.setToolTab\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.toolarea.currentToolTab === next.toolarea.currentToolTab &&\n\t\t\t\tprev.toolarea.unreadMessages === next.toolarea.unreadMessages &&\n\t\t\t\tprev.toolarea.unreadFiles === next.toolarea.unreadFiles &&\n\t\t\t\tprev.peers === next.peers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(MeetingDrawer));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { RIEInput } from 'riek';\n\nexport default class EditableInput extends React.Component\n{\n\trender()\n\t{\n\t\tconst {\n\t\t\tvalue,\n\t\t\tpropName,\n\t\t\tclassName,\n\t\t\tclassLoading,\n\t\t\tclassInvalid,\n\t\t\teditProps,\n\t\t\tonChange\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<RIEInput\n\t\t\t\tvalue={value}\n\t\t\t\tpropName={propName}\n\t\t\t\tclassName={className}\n\t\t\t\tclassLoading={classLoading}\n\t\t\t\tclassInvalid={classInvalid}\n\t\t\t\tshouldBlockWhileLoading\n\t\t\t\teditProps={editProps}\n\t\t\t\tchange={(data) => onChange(data)}\n\t\t\t/>\n\t\t);\n\t}\n\n\tshouldComponentUpdate(nextProps)\n\t{\n\t\tif (nextProps.value === this.props.value)\n\t\t\treturn false;\n\n\t\treturn true;\n\t}\n}\n\nEditableInput.propTypes =\n{\n\tvalue        : PropTypes.string,\n\tpropName     : PropTypes.string.isRequired,\n\tclassName    : PropTypes.string,\n\tclassLoading : PropTypes.string,\n\tclassInvalid : PropTypes.string,\n\teditProps    : PropTypes.any,\n\tonChange     : PropTypes.func.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport EditableInput from '../Controls/EditableInput';\nimport Logger from '../../Logger';\nimport { yellow, orange, red } from '@material-ui/core/colors';\nimport SignalCellularOffIcon from '@material-ui/icons/SignalCellularOff';\nimport SignalCellular0BarIcon from '@material-ui/icons/SignalCellular0Bar';\nimport SignalCellular1BarIcon from '@material-ui/icons/SignalCellular1Bar';\nimport SignalCellular2BarIcon from '@material-ui/icons/SignalCellular2Bar';\nimport SignalCellular3BarIcon from '@material-ui/icons/SignalCellular3Bar';\n\nconst logger = new Logger('VideoView');\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition      : 'relative',\n\t\t\tflex          : '100 100 auto',\n\t\t\theight        : '100%',\n\t\t\twidth         : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\toverflow      : 'hidden'\n\t\t},\n\n\t\tvideo :\n\t\t{\n\t\t\tflex               : '100 100 auto',\n\t\t\theight             : '100%',\n\t\t\twidth              : '100%',\n\t\t\tobjectFit          : 'cover',\n\t\t\tuserSelect         : 'none',\n\t\t\ttransitionProperty : 'opacity',\n\t\t\ttransitionDuration : '.15s',\n\t\t\tbackgroundColor    : 'var(--peer-video-bg-color)',\n\t\t\t'&.isMe'           :\n\t\t\t{\n\t\t\t\ttransform : 'scaleX(-1)'\n\t\t\t},\n\t\t\t'&.hidden' :\n\t\t\t{\n\t\t\t\topacity            : 0,\n\t\t\t\ttransitionDuration : '0s'\n\t\t\t},\n\t\t\t'&.loading' :\n\t\t\t{\n\t\t\t\tfilter : 'blur(5px)'\n\t\t\t},\n\t\t\t'&.contain' :\n\t\t\t{\n\t\t\t\tobjectFit       : 'contain',\n\t\t\t\tbackgroundColor : 'rgba(0, 0, 0, 1)'\n\t\t\t}\n\t\t},\n\t\tinfo :\n\t\t{\n\t\t\twidth          : '100%',\n\t\t\theight         : '100%',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 10,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'space-between'\n\t\t},\n\t\tmedia :\n\t\t{\n\t\t\tdisplay            : 'flex',\n\t\t\ttransitionProperty : 'opacity',\n\t\t\ttransitionDuration : '.15s'\n\t\t},\n\t\tbox :\n\t\t{\n\t\t\tpadding      : theme.spacing(0.5),\n\t\t\tborderRadius : 2,\n\t\t\tuserSelect   : 'none',\n\t\t\tmargin       : 0,\n\t\t\tcolor        : 'rgba(255, 255, 255, 0.7)',\n\t\t\tfontSize     : '0.8em',\n\n\t\t\t'&.left' :\n\t\t\t\t{\n\t\t\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.25)',\n\t\t\t\t\tdisplay         : 'grid',\n\t\t\t\t\tgap             : '1px 5px',\n\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\tgridTemplateAreas : '\\\n\t\t\t\t\"AcodL\t\tAcod\tAcod\tAcod\tAcod\" \\\n\t\t\t\t\t\"VcodL\t\tVcod\tVcod\tVcod\tVcod\" \\\n\t\t\t\t\t\"ResL\t\tRes\t\tRes\t\tRes\t\tRes\" \\\n\t\t\t\t\t\"RecvL\t\tRecvBps RecvBps RecvSum RecvSum\" \\\n\t\t\t\t\t\"SendL\t\tSendBps SendBps SendSum SendSum\" \\\n\t\t\t\t\t\"IPlocL\t\tIPloc\tIPloc\tIPloc\tIPloc\" \\\n\t\t\t\t\t\"IPsrvL\t\tIPsrv\tIPsrv\tIPsrv\tIPsrv\" \\\n\t\t\t\t\t\"STLcurrL\tSTLcurr\tSTLcurr STLcurr STLcurr\" \\\n\t\t\t\t\t\"STLprefL\tSTLpref STLpref STLpref STLpref\"',\n\n\t\t\t\t\t'& .AcodL'    : { gridArea: 'AcodL' },\n\t\t\t\t\t'& .Acod'     : { gridArea: 'Acod' },\n\t\t\t\t\t'& .VcodL'    : { gridArea: 'VcodL' },\n\t\t\t\t\t'& .Vcod'     : { gridArea: 'Vcod' },\n\t\t\t\t\t'& .ResL'     : { gridArea: 'ResL' },\n\t\t\t\t\t'& .Res'      : { gridArea: 'Res' },\n\t\t\t\t\t'& .RecvL'    : { gridArea: 'RecvL' },\n\t\t\t\t\t'& .RecvBps'  : { gridArea: 'RecvBps', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .RecvSum'  : { gridArea: 'RecvSum', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .SendL'    : { gridArea: 'SendL' },\n\t\t\t\t\t'& .SendBps'  : { gridArea: 'SendBps', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .SendSum'  : { gridArea: 'SendSum', justifySelf: 'flex-end' },\n\t\t\t\t\t'& .IPlocL'   : { gridArea: 'IPlocL' },\n\t\t\t\t\t'& .IPloc'    : { gridArea: 'IPloc' },\n\t\t\t\t\t'& .IPsrvL'   : { gridArea: 'IPsrvL' },\n\t\t\t\t\t'& .IPsrv'    : { gridArea: 'IPsrv' },\n\t\t\t\t\t'& .STLcurrL' : { gridArea: 'STLcurrL' },\n\t\t\t\t\t'& .STLcurr'  : { gridArea: 'STLcurr' },\n\t\t\t\t\t'& .STLprefL' : { gridArea: 'STLprefL' },\n\t\t\t\t\t'& .STLpref'  : { gridArea: 'STLpref' }\n\n\t\t\t\t},\n\t\t\t'&.right' :\n\t\t\t{\n\t\t\t\tmarginLeft : 'auto',\n\t\t\t\twidth      : 30\n\t\t\t},\n\t\t\t'&.hidden' :\n\t\t\t{\n\t\t\t\topacity            : 0,\n\t\t\t\ttransitionDuration : '0s'\n\t\t\t}\n\t\t},\n\t\tpeer :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tdisplayNameEdit :\n\t\t{\n\t\t\tfontSize        : 14,\n\t\t\tfontWeight      : 400,\n\t\t\tcolor           : 'rgba(255, 255, 255, 0.85)',\n\t\t\tborder          : 'none',\n\t\t\tborderBottom    : '1px solid #aeff00',\n\t\t\tbackgroundColor : 'transparent'\n\t\t},\n\t\tdisplayNameStatic :\n\t\t{\n\t\t\tuserSelect : 'none',\n\t\t\tcursor     : 'text',\n\t\t\tfontSize   : 14,\n\t\t\tfontWeight : 400,\n\t\t\tcolor      : 'rgba(255, 255, 255, 0.85)',\n\t\t\t'&:hover'  :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgb(174, 255, 0, 0.25)'\n\t\t\t}\n\t\t}\n\t});\n\nclass VideoView extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.state =\n\t\t{\n\t\t\tvideoWidth  : null,\n\t\t\tvideoHeight : null\n\t\t};\n\n\t\t// Latest received audio track\n\t\t// @type {MediaStreamTrack}\n\t\tthis._audioTrack = null;\n\n\t\t// Latest received video track.\n\t\t// @type {MediaStreamTrack}\n\t\tthis._videoTrack = null;\n\n\t\t// Periodic timer for showing video resolution.\n\t\tthis._videoResolutionTimer = null;\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tisMe,\n\t\t\tisScreen,\n\t\t\tisExtraVideo,\n\t\t\tshowQuality,\n\t\t\tdisplayName,\n\t\t\tshowPeerInfo,\n\t\t\tvideoContain,\n\t\t\tadvancedMode,\n\t\t\tvideoVisible,\n\t\t\tvideoMultiLayer,\n\t\t\taudioScore,\n\t\t\tvideoScore,\n\t\t\tconsumerCurrentSpatialLayer,\n\t\t\tconsumerCurrentTemporalLayer,\n\t\t\tconsumerPreferredSpatialLayer,\n\t\t\tconsumerPreferredTemporalLayer,\n\t\t\taudioCodec,\n\t\t\tvideoCodec,\n\t\t\tonChangeDisplayName,\n\t\t\tchildren,\n\t\t\tclasses,\n\t\t\tnetInfo\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tvideoWidth,\n\t\t\tvideoHeight\n\t\t} = this.state;\n\n\t\tlet quality = null;\n\n\t\tif (showQuality)\n\t\t{\n\t\t\tquality = <SignalCellularOffIcon style={{ color: red[500] }}/>;\n\n\t\t\tif (videoScore || audioScore)\n\t\t\t{\n\t\t\t\tconst score = videoScore ? videoScore : audioScore;\n\n\t\t\t\tswitch (isMe ? score.score : score.producerScore)\n\t\t\t\t{\n\t\t\t\t\tcase 0:\n\t\t\t\t\tcase 1:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular0BarIcon style={{ color: red[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 3:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular1BarIcon style={{ color: red[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\tcase 5:\n\t\t\t\t\tcase 6:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular2BarIcon style={{ color: orange[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\tcase 8:\n\t\t\t\t\tcase 9:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = <SignalCellular3BarIcon style={{ color: yellow[500] }}/>;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t{\n\t\t\t\t\t\tquality = null;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<div className={classes.info}>\n\t\t\t\t\t<div className={classes.media}>\n\t\t\t\t\t\t<div className={classnames(classes.box, 'left', { hidden: !advancedMode })}>\n\t\t\t\t\t\t\t{ audioCodec &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'AcodL'}>Acod: </span>\n\t\t\t\t\t\t\t\t\t<span className={'Acod'}>\n\t\t\t\t\t\t\t\t\t\t{audioCodec}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ videoCodec &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'VcodL'}>Vcod: </span>\n\t\t\t\t\t\t\t\t\t<span className={'Vcod'}>\n\t\t\t\t\t\t\t\t\t\t{videoCodec}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ (videoVisible && videoWidth !== null) &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'ResL'}>Res: </span>\n\t\t\t\t\t\t\t\t\t<span className={'Res'}>\n\t\t\t\t\t\t\t\t\t\t{videoWidth}x{videoHeight}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ isMe && !isScreen && !isExtraVideo &&\n\t\t\t\t\t\t\t\t\t(netInfo.recv && netInfo.send && netInfo.send.iceSelectedTuple) &&\n\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<span className={'RecvL'}>Recv: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'RecvBps'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.recv.sendBitrate/1024/1024).toFixed(2)}Mb/s\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className={'RecvSum'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.recv.bytesSent/1024/1024).toFixed(2)}MB\n\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t<span className={'SendL'}>Send: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'SendBps'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.send.recvBitrate/1024/1024).toFixed(2)}Mb/s\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span className={'SendSum'}>\n\t\t\t\t\t\t\t\t\t\t\t{(netInfo.send.bytesReceived/1024/1024).toFixed(2)}MB\n\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t<span className={'IPlocL'}>IPloc: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'IPloc'}>\n\t\t\t\t\t\t\t\t\t\t\t{netInfo.send.iceSelectedTuple.remoteIp}\n\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t<span className={'IPsrvL'}>IPsrv: </span>\n\t\t\t\t\t\t\t\t\t\t<span className={'IPsrv'}>\n\t\t\t\t\t\t\t\t\t\t\t{netInfo.send.iceSelectedTuple.localIp}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{ videoMultiLayer &&\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<span className={'STLcurrL'}>STLcurr: </span>\n\t\t\t\t\t\t\t\t\t<span className={'STLcurr'}>{consumerCurrentSpatialLayer} {consumerCurrentTemporalLayer}</span>\n\n\t\t\t\t\t\t\t\t\t<span className={'STLprefL'}>STLpref: </span>\n\t\t\t\t\t\t\t\t\t<span className={'STLpref'}>{consumerPreferredSpatialLayer} {consumerPreferredTemporalLayer}</span>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{ showQuality &&\n\t\t\t\t\t\t\t<div className={classnames(classes.box, 'right')}>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tquality\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{ showPeerInfo &&\n\t\t\t\t\t\t<div className={classes.peer}>\n\t\t\t\t\t\t\t<div className={classes.box}>\n\t\t\t\t\t\t\t\t{ isMe ?\n\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<EditableInput\n\t\t\t\t\t\t\t\t\t\t\tvalue={displayName}\n\t\t\t\t\t\t\t\t\t\t\tpropName='newDisplayName'\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.displayNameEdit}\n\t\t\t\t\t\t\t\t\t\t\tclassLoading='loading'\n\t\t\t\t\t\t\t\t\t\t\tclassInvalid='invalid'\n\t\t\t\t\t\t\t\t\t\t\tshouldBlockWhileLoading\n\t\t\t\t\t\t\t\t\t\t\teditProps={{\n\t\t\t\t\t\t\t\t\t\t\t\tmaxLength   : 30,\n\t\t\t\t\t\t\t\t\t\t\t\tautoCorrect : 'off',\n\t\t\t\t\t\t\t\t\t\t\t\tspellCheck  : false\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t({ newDisplayName }) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChangeDisplayName(newDisplayName)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<span className={classes.displayNameStatic}>\n\t\t\t\t\t\t\t\t\t\t{displayName}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\n\t\t\t\t<video\n\t\t\t\t\tref='videoElement'\n\t\t\t\t\tclassName={classnames(classes.video, {\n\t\t\t\t\t\thidden  : !videoVisible,\n\t\t\t\t\t\t'isMe'  : isMe && !isScreen,\n\t\t\t\t\t\tcontain : videoContain\n\t\t\t\t\t})}\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tmuted\n\t\t\t\t\tcontrols={false}\n\t\t\t\t/>\n\n\t\t\t\t<audio\n\t\t\t\t\tref='audioElement'\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tmuted={isMe}\n\t\t\t\t\tcontrols={false}\n\t\t\t\t/>\n\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tconst { videoTrack, audioTrack } = this.props;\n\n\t\tthis._setTracks(videoTrack, audioTrack);\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\tclearInterval(this._videoResolutionTimer);\n\n\t\tconst { videoElement } = this.refs;\n\n\t\tif (videoElement)\n\t\t{\n\t\t\tvideoElement.oncanplay = null;\n\t\t\tvideoElement.onplay = null;\n\t\t\tvideoElement.onpause = null;\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tconst { videoTrack, audioTrack } = this.props;\n\n\t\t\tthis._setTracks(videoTrack, audioTrack);\n\t\t}\n\t}\n\n\t_setTracks(videoTrack, audioTrack)\n\t{\n\t\tif (this._videoTrack === videoTrack && this._audioTrack === audioTrack)\n\t\t\treturn;\n\n\t\tthis._videoTrack = videoTrack;\n\t\tthis._audioTrack = audioTrack;\n\n\t\tclearInterval(this._videoResolutionTimer);\n\t\tthis._hideVideoResolution();\n\n\t\tconst { videoElement, audioElement } = this.refs;\n\n\t\tif (videoTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tstream.addTrack(videoTrack);\n\n\t\t\tvideoElement.srcObject = stream;\n\n\t\t\tvideoElement.oncanplay = () => this.setState({ videoCanPlay: true });\n\n\t\t\tvideoElement.onplay = () =>\n\t\t\t{\n\t\t\t\taudioElement.play()\n\t\t\t\t\t.catch((error) => logger.warn('audioElement.play() [error:\"%o]', error));\n\t\t\t};\n\n\t\t\tvideoElement.play()\n\t\t\t\t.catch((error) => logger.warn('videoElement.play() [error:\"%o]', error));\n\n\t\t\tthis._showVideoResolution();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvideoElement.srcObject = null;\n\t\t}\n\n\t\tif (audioTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tstream.addTrack(audioTrack);\n\t\t\taudioElement.srcObject = stream;\n\n\t\t\taudioElement.play()\n\t\t\t\t.catch((error) => logger.warn('audioElement.play() [error:\"%o]', error));\n\t\t}\n\t\telse\n\t\t{\n\t\t\taudioElement.srcObject = null;\n\t\t}\n\t}\n\n\t_showVideoResolution()\n\t{\n\t\tthis._videoResolutionTimer = setInterval(() =>\n\t\t{\n\t\t\tconst { videoWidth, videoHeight } = this.state;\n\t\t\tconst { videoElement } = this.refs;\n\n\t\t\t// Don't re-render if nothing changed.\n\t\t\tif (\n\t\t\t\tvideoElement.videoWidth === videoWidth &&\n\t\t\t\tvideoElement.videoHeight === videoHeight\n\t\t\t)\n\t\t\t\treturn;\n\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tvideoWidth  : videoElement.videoWidth,\n\t\t\t\t\tvideoHeight : videoElement.videoHeight\n\t\t\t\t});\n\t\t}, 1000);\n\t}\n\n\t_hideVideoResolution()\n\t{\n\t\tthis.setState({ videoWidth: null, videoHeight: null });\n\t}\n}\n\nVideoView.propTypes =\n{\n\tisMe                           : PropTypes.bool,\n\tisScreen                       : PropTypes.bool,\n\tisExtraVideo   \t               : PropTypes.bool,\n\tshowQuality                    : PropTypes.bool,\n\tdisplayName                    : PropTypes.string,\n\tshowPeerInfo                   : PropTypes.bool,\n\tvideoContain                   : PropTypes.bool,\n\tadvancedMode                   : PropTypes.bool,\n\tvideoTrack                     : PropTypes.any,\n\taudioTrack                     : PropTypes.any,\n\tvideoVisible                   : PropTypes.bool.isRequired,\n\tconsumerSpatialLayers          : PropTypes.number,\n\tconsumerTemporalLayers         : PropTypes.number,\n\tconsumerCurrentSpatialLayer    : PropTypes.number,\n\tconsumerCurrentTemporalLayer   : PropTypes.number,\n\tconsumerPreferredSpatialLayer  : PropTypes.number,\n\tconsumerPreferredTemporalLayer : PropTypes.number,\n\tvideoMultiLayer                : PropTypes.bool,\n\taudioScore                     : PropTypes.any,\n\tvideoScore                     : PropTypes.any,\n\taudioCodec                     : PropTypes.string,\n\tvideoCodec                     : PropTypes.string,\n\tonChangeDisplayName            : PropTypes.func,\n\tchildren                       : PropTypes.object,\n\tclasses                        : PropTypes.object.isRequired,\n\tnetInfo               \t\t\t\t\t\t   : PropTypes.object\n};\n\nexport default withStyles(styles)(VideoView);\n","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { makePeerConsumerSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { withRoomContext } from '../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport * as roomActions from '../../actions/roomActions';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport VideoView from '../VideoContainers/VideoView';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Fab from '@material-ui/core/Fab';\nimport IconButton from '@material-ui/core/IconButton';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport NewWindowIcon from '@material-ui/icons/OpenInNew';\nimport FullScreenIcon from '@material-ui/icons/Fullscreen';\nimport Volume from './Volume';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tboxShadow          : 'var(--peer-shadow)',\n\t\t\tborder             : 'var(--peer-border)',\n\t\t\ttouchAction        : 'none',\n\t\t\tbackgroundColor    : 'var(--peer-bg-color)',\n\t\t\tbackgroundImage    : 'var(--peer-empty-avatar)',\n\t\t\tbackgroundPosition : 'bottom',\n\t\t\tbackgroundSize     : 'auto 85%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\t'&.hover'          :\n\t\t\t{\n\t\t\t\tboxShadow : '0px 1px 3px rgba(0, 0, 0, 0.05) inset, 0px 0px 8px rgba(82, 168, 236, 0.9)'\n\t\t\t},\n\t\t\t'&.active-speaker' :\n\t\t\t{\n\t\t\t\t// transition  : 'filter .2s',\n\t\t\t\t// filter      : 'grayscale(0)',\n\t\t\t\tborderColor : 'var(--active-speaker-border-color)'\n\t\t\t},\n\t\t\t'&:not(.active-speaker):not(.screen)' :\n\t\t\t{\n\t\t\t\t// transition : 'filter 10s',\n\t\t\t\t// filter     : 'grayscale(0.75)'\n\t\t\t},\n\t\t\t'&.webcam' :\n\t\t\t{\n\t\t\t\torder : 4\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 3\n\t\t\t}\n\t\t},\n\t\tfab :\n\t\t{\n\t\t\tmargin : theme.spacing(1)\n\t\t},\n\t\tsmallContainer :\n\t\t{\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 0.9)',\n\t\t\tmargin          : '0.5vmin',\n\t\t\tpadding         : '0.5vmin',\n\t\t\tboxShadow       : '0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)',\n\t\t\tpointerEvents   : 'auto',\n\t\t\ttransition      : 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n\t\t\t'&:hover'       :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgba(213, 213, 213, 1)'\n\t\t\t}\n\t\t},\n\t\tviewContainer :\n\t\t{\n\t\t\tposition : 'relative',\n\t\t\twidth    : '100%',\n\t\t\theight   : '100%'\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.3)',\n\t\t\tdisplay         : 'flex',\n\t\t\tflexDirection   : 'column',\n\t\t\tjustifyContent  : 'center',\n\t\t\talignItems      : 'flex-end',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tzIndex          : 21,\n\t\t\topacity         : 0,\n\t\t\ttransition      : 'opacity 0.3s',\n\t\t\ttouchAction     : 'none',\n\t\t\t'&.hover'       :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t}\n\t\t},\n\t\tvideoInfo :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.3)',\n\t\t\tdisplay         : 'flex',\n\t\t\tjustifyContent  : 'center',\n\t\t\talignItems      : 'center',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tzIndex          : 20,\n\t\t\t'& p'           :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 20,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nconst Peer = (props) =>\n{\n\tconst [ hover, setHover ] = useState(false);\n\n\tconst intl = useIntl();\n\n\tlet touchTimeout = null;\n\n\tconst {\n\t\troomClient,\n\t\tadvancedMode,\n\t\tpeer,\n\t\tactiveSpeaker,\n\t\tbrowser,\n\t\tmicConsumer,\n\t\twebcamConsumer,\n\t\tscreenConsumer,\n\t\textraVideoConsumers,\n\t\ttoggleConsumerFullscreen,\n\t\ttoggleConsumerWindow,\n\t\tspacing,\n\t\tstyle,\n\t\tsmallContainer,\n\t\twindowConsumer,\n\t\tclasses,\n\t\ttheme\n\t} = props;\n\n\tconst micEnabled = (\n\t\tBoolean(micConsumer) &&\n\t\t!micConsumer.locallyPaused &&\n\t\t!micConsumer.remotelyPaused\n\t);\n\n\tconst videoVisible = (\n\t\tBoolean(webcamConsumer) &&\n\t\t!webcamConsumer.locallyPaused &&\n\t\t!webcamConsumer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenConsumer) &&\n\t\t!screenConsumer.locallyPaused &&\n\t\t!screenConsumer.remotelyPaused\n\t);\n\n\tconst smallScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n\tconst rootStyle =\n\t{\n\t\t'margin' : spacing,\n\t\t...style\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tclassnames(\n\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\tonTouchStart={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\tsetHover(true);\n\t\t\t\t}}\n\t\t\t\tonTouchEnd={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t}, 2000);\n\t\t\t\t}}\n\t\t\t\tstyle={rootStyle}\n\t\t\t>\n\t\t\t\t<div className={classnames(classes.viewContainer)}>\n\t\t\t\t\t{ !videoVisible &&\n\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classnames(classes.controls, hover ? 'hover' : null)}\n\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\tdisabled={!micConsumer}\n\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmicEnabled ?\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', true) :\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', false);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ micEnabled ?\n\t\t\t\t\t\t\t\t\t\t<VolumeUpIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<VolumeOffIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\tdisabled={!micConsumer}\n\t\t\t\t\t\t\t\t\tcolor={micEnabled ? 'default' : 'secondary'}\n\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmicEnabled ?\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', true) :\n\t\t\t\t\t\t\t\t\t\t\troomClient.modifyPeerConsumer(peer.id, 'mic', false);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ micEnabled ?\n\t\t\t\t\t\t\t\t\t\t<VolumeUpIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<VolumeOffIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t{ browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === webcamConsumer.id)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(webcamConsumer);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === webcamConsumer.id)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(webcamConsumer);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(webcamConsumer);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(webcamConsumer);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<VideoView\n\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\tpeer={peer}\n\t\t\t\t\t\tdisplayName={peer.displayName}\n\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\tconsumerSpatialLayers={webcamConsumer ? webcamConsumer.spatialLayers : null}\n\t\t\t\t\t\tconsumerTemporalLayers={webcamConsumer ? webcamConsumer.temporalLayers : null}\n\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvideoMultiLayer={webcamConsumer && webcamConsumer.type !== 'simple'}\n\t\t\t\t\t\tvideoTrack={webcamConsumer && webcamConsumer.track}\n\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\taudioTrack={micConsumer && micConsumer.track}\n\t\t\t\t\t\taudioCodec={micConsumer && micConsumer.codec}\n\t\t\t\t\t\tvideoCodec={webcamConsumer && webcamConsumer.codec}\n\t\t\t\t\t\taudioScore={micConsumer ? micConsumer.score : null}\n\t\t\t\t\t\tvideoScore={webcamConsumer ? webcamConsumer.score : null}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Volume id={peer.id} />\n\t\t\t\t\t</VideoView>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{ extraVideoConsumers.map((consumer) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\t<div key={consumer.id}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={rootStyle}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={classnames(classes.viewContainer)}>\n\t\t\t\t\t\t\t{ !videoVisible &&\n\t\t\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={classnames(classes.controls, hover ? 'hover' : null)}\n\t\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === consumer.id)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(consumer);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!videoVisible ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === consumer.id)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(consumer);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(consumer);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!videoVisible}\n\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(consumer);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\tpeer={peer}\n\t\t\t\t\t\t\t\tdisplayName={peer.displayName}\n\t\t\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\t\t\tconsumerSpatialLayers={consumer ? consumer.spatialLayers : null}\n\t\t\t\t\t\t\t\tconsumerTemporalLayers={consumer ? consumer.temporalLayers : null}\n\t\t\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.currentSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.currentTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.preferredSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\t\t\tconsumer ? consumer.preferredTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvideoMultiLayer={consumer && consumer.type !== 'simple'}\n\t\t\t\t\t\t\t\tvideoTrack={consumer && consumer.track}\n\t\t\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\t\t\tvideoCodec={consumer && consumer.codec}\n\t\t\t\t\t\t\t\tvideoScore={consumer ? consumer.score : null}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\n\t\t\t{ screenConsumer &&\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.root, 'screen', hover ? 'hover' : null)}\n\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t}}\n\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={rootStyle}\n\t\t\t\t>\n\t\t\t\t\t<div className={classnames(classes.viewContainer)}>\n\t\t\t\t\t\t{ !screenVisible &&\n\t\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classnames(classes.controls, hover ? 'hover' : null)}\n\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t{\n\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'label.newWindow',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'New window'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t!screenVisible ||\n\t\t\t\t\t\t\t\t\t\t\t(windowConsumer === screenConsumer.id)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsize={smallContainer ? 'small' : 'large'}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttoggleConsumerWindow(screenConsumer);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<NewWindowIcon />\n\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tplacement={smallScreen ? 'top' : 'left'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'label.fullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\tdisabled={!screenVisible}\n\t\t\t\t\t\t\t\t\tsize={smallContainer ? 'small' : 'large'}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttoggleConsumerFullscreen(screenConsumer);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tvideoContain\n\t\t\t\t\t\t\tconsumerSpatialLayers={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.spatialLayers : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerTemporalLayers={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.temporalLayers : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvideoMultiLayer={screenConsumer && screenConsumer.type !== 'simple'}\n\t\t\t\t\t\t\tvideoTrack={screenConsumer && screenConsumer.track}\n\t\t\t\t\t\t\tvideoVisible={screenVisible}\n\t\t\t\t\t\t\tvideoCodec={screenConsumer && screenConsumer.codec}\n\t\t\t\t\t\t\tvideoScore={screenConsumer ? screenConsumer.score : null}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nPeer.propTypes =\n{\n\troomClient               : PropTypes.any.isRequired,\n\tadvancedMode             : PropTypes.bool,\n\tpeer                     : appPropTypes.Peer,\n\tmicConsumer              : appPropTypes.Consumer,\n\twebcamConsumer           : appPropTypes.Consumer,\n\tscreenConsumer           : appPropTypes.Consumer,\n\textraVideoConsumers      : PropTypes.arrayOf(appPropTypes.Consumer),\n\twindowConsumer           : PropTypes.string,\n\tactiveSpeaker            : PropTypes.bool,\n\tbrowser                  : PropTypes.object.isRequired,\n\tspacing                  : PropTypes.number,\n\tstyle                    : PropTypes.object,\n\tsmallContainer           : PropTypes.bool,\n\ttoggleConsumerFullscreen : PropTypes.func.isRequired,\n\ttoggleConsumerWindow     : PropTypes.func.isRequired,\n\tclasses                  : PropTypes.object.isRequired,\n\ttheme                    : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, { id }) =>\n{\n\tconst getPeerConsumers = makePeerConsumerSelector();\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tpeer           : state.peers[id],\n\t\t\t...getPeerConsumers(state, id),\n\t\t\twindowConsumer : state.room.windowConsumer,\n\t\t\tactiveSpeaker  : id === state.room.activeSpeakerId,\n\t\t\tbrowser        : state.me.browser\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch) =>\n{\n\treturn {\n\t\ttoggleConsumerFullscreen : (consumer) =>\n\t\t{\n\t\t\tif (consumer)\n\t\t\t\tdispatch(roomActions.toggleConsumerFullscreen(consumer.id));\n\t\t},\n\t\ttoggleConsumerWindow : (consumer) =>\n\t\t{\n\t\t\tif (consumer)\n\t\t\t\tdispatch(roomActions.toggleConsumerWindow(consumer.id));\n\t\t}\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.activeSpeakerId === next.room.activeSpeakerId &&\n\t\t\t\tprev.room.windowConsumer === next.room.windowConsumer &&\n\t\t\t\tprev.me.browser === next.me.browser\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Peer)));\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tmeProducersSelector,\n\tmakePermissionSelector\n} from '../Selectors';\nimport { permissions } from '../../permissions';\nimport { withRoomContext } from '../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport VideoView from '../VideoContainers/VideoView';\nimport Volume from './Volume';\nimport Fab from '@material-ui/core/Fab';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport MicIcon from '@material-ui/icons/Mic';\nimport MicOffIcon from '@material-ui/icons/MicOff';\nimport VideoIcon from '@material-ui/icons/Videocam';\nimport VideoOffIcon from '@material-ui/icons/VideocamOff';\nimport ScreenIcon from '@material-ui/icons/ScreenShare';\nimport ScreenOffIcon from '@material-ui/icons/StopScreenShare';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tboxShadow          : 'var(--peer-shadow)',\n\t\t\tborder             : 'var(--peer-border)',\n\t\t\tbackgroundColor    : 'var(--peer-bg-color)',\n\t\t\tbackgroundImage    : 'var(--peer-empty-avatar)',\n\t\t\tbackgroundPosition : 'bottom',\n\t\t\tbackgroundSize     : 'auto 85%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\t'&.hover'          :\n\t\t\t{\n\t\t\t\tboxShadow : '0px 1px 3px rgba(0, 0, 0, 0.05) inset, 0px 0px 8px rgba(82, 168, 236, 0.9)'\n\t\t\t},\n\t\t\t'&.active-speaker' :\n\t\t\t{\n\t\t\t\t// transition  : 'filter .2s',\n\t\t\t\t// filter      : 'grayscale(0)',\n\t\t\t\tborderColor : 'var(--active-speaker-border-color)'\n\t\t\t},\n\t\t\t'&:not(.active-speaker):not(.screen)' :\n\t\t\t{\n\t\t\t\t// transition : 'filter 10s',\n\t\t\t\t// filter     : 'grayscale(0.75)'\n\t\t\t},\n\t\t\t'&.webcam' :\n\t\t\t{\n\t\t\t\torder : 1\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 2\n\t\t\t}\n\t\t},\n\t\tfab :\n\t\t{\n\t\t\tmargin        : theme.spacing(1),\n\t\t\tpointerEvents : 'auto'\n\t\t},\n\t\tsmallContainer :\n\t\t{\n\t\t\tbackgroundColor : 'rgba(255, 255, 255, 0.9)',\n\t\t\tmargin          : '0.5vmin',\n\t\t\tpadding         : '0.5vmin',\n\t\t\tboxShadow       : '0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)',\n\t\t\tpointerEvents   : 'auto',\n\t\t\ttransition      : 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n\t\t\t'&:hover'       :\n\t\t\t{\n\t\t\t\tbackgroundColor : 'rgba(213, 213, 213, 1)'\n\t\t\t}\n\t\t},\n\t\tviewContainer :\n\t\t{\n\t\t\tposition : 'relative',\n\t\t\twidth    : '100%',\n\t\t\theight   : '100%'\n\t\t},\n\t\tmeTag :\n\t\t{\n\t\t\tposition   : 'absolute',\n\t\t\tfloat      : 'left',\n\t\t\ttop        : '50%',\n\t\t\tleft       : '50%',\n\t\t\ttransform  : 'translate(-50%, -50%)',\n\t\t\tcolor      : 'rgba(255, 255, 255, 0.5)',\n\t\t\tfontSize   : '7em',\n\t\t\tzIndex     : 30,\n\t\t\tmargin     : 0,\n\t\t\topacity    : 0,\n\t\t\ttransition : 'opacity 0.1s ease-in-out',\n\t\t\t'&.hover'  :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t},\n\t\t\t'&.smallContainer' :\n\t\t\t{\n\t\t\t\tfontSize : '3em'\n\t\t\t}\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\twidth          : '100%',\n\t\t\theight         : '100%',\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'flex-end',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tzIndex         : 21,\n\t\t\ttouchAction    : 'none',\n\t\t\tpointerEvents  : 'none',\n\t\t\t'&.hide'       :\n\t\t\t{\n\t\t\t\ttransition : 'opacity 0.1s ease-in-out',\n\t\t\t\topacity    : 0\n\t\t\t},\n\t\t\t'&.hover' :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t}\n\t\t},\n\t\tptt :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\tfloat           : 'left',\n\t\t\ttop             : '25%',\n\t\t\tleft            : '50%',\n\t\t\ttransform       : 'translate(-50%, 0%)',\n\t\t\tcolor           : 'rgba(255, 255, 255, 0.7)',\n\t\t\tfontSize        : '1.3em',\n\t\t\tbackgroundColor : 'rgba(245, 0, 87, 0.70)',\n\t\t\tmargin          : '4px',\n\t\t\tpadding         : theme.spacing(2),\n\t\t\tzIndex          : 1200,\n\t\t\tborderRadius    : '20px',\n\t\t\ttextAlign       : 'center',\n\t\t\topacity         : 0,\n\t\t\ttransition      : 'opacity 1s ease',\n\t\t\tpointerEvents   : 'none',\n\t\t\t'&.enabled'     :\n\t\t\t{\n\t\t\t\ttransition : 'opacity 0.1s',\n\t\t\t\topacity    : 1\n\t\t\t}\n\t\t}\n\t});\n\nconst Me = (props) =>\n{\n\tconst [ hover, setHover ] = useState(false);\n\n\tconst intl = useIntl();\n\n\tlet touchTimeout = null;\n\n\tconst {\n\t\troomClient,\n\t\tme,\n\t\tsettings,\n\t\tactiveSpeaker,\n\t\tspacing,\n\t\tstyle,\n\t\tsmallContainer,\n\t\tadvancedMode,\n\t\tmicProducer,\n\t\twebcamProducer,\n\t\tscreenProducer,\n\t\textraVideoProducers,\n\t\tcanShareScreen,\n\t\ttransports,\n\t\tnoiseVolume,\n\t\tclasses\n\t} = props;\n\n\tconst videoVisible = (\n\t\tBoolean(webcamProducer) &&\n\t\t!webcamProducer.locallyPaused &&\n\t\t!webcamProducer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenProducer) &&\n\t\t!screenProducer.locallyPaused &&\n\t\t!screenProducer.remotelyPaused\n\t);\n\n\tlet micState;\n\n\tlet micTip;\n\n\tif (!me.canSendMic)\n\t{\n\t\tmicState = 'unsupported';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.audioUnsupported',\n\t\t\tdefaultMessage : 'Audio unsupported'\n\t\t});\n\t}\n\telse if (!micProducer)\n\t{\n\t\tmicState = 'off';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.activateAudio',\n\t\t\tdefaultMessage : 'Activate audio'\n\t\t});\n\t}\n\telse if (!micProducer.locallyPaused && !micProducer.remotelyPaused)\n\t{\n\t\tmicState = 'on';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.muteAudio',\n\t\t\tdefaultMessage : 'Mute audio'\n\t\t});\n\t}\n\telse\n\t{\n\t\tmicState = 'muted';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.unMuteAudio',\n\t\t\tdefaultMessage : 'Unmute audio'\n\t\t});\n\t}\n\n\tlet webcamState;\n\n\tlet webcamTip;\n\n\tif (!me.canSendWebcam)\n\t{\n\t\twebcamState = 'unsupported';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.videoUnsupported',\n\t\t\tdefaultMessage : 'Video unsupported'\n\t\t});\n\t}\n\telse if (webcamProducer)\n\t{\n\t\twebcamState = 'on';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.stopVideo',\n\t\t\tdefaultMessage : 'Stop video'\n\t\t});\n\t}\n\telse\n\t{\n\t\twebcamState = 'off';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.startVideo',\n\t\t\tdefaultMessage : 'Start video'\n\t\t});\n\t}\n\n\tlet screenState;\n\n\tlet screenTip;\n\n\tif (!me.canShareScreen)\n\t{\n\t\tscreenState = 'unsupported';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.screenSharingUnsupported',\n\t\t\tdefaultMessage : 'Screen sharing not supported'\n\t\t});\n\t}\n\telse if (screenProducer)\n\t{\n\t\tscreenState = 'on';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.stopScreenSharing',\n\t\t\tdefaultMessage : 'Stop screen sharing'\n\t\t});\n\t}\n\telse\n\t{\n\t\tscreenState = 'off';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.startScreenSharing',\n\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t});\n\t}\n\tconst [\n\t\tscreenShareTooltipOpen,\n\t\tscreenShareTooltipSetOpen\n\t] = React.useState(false);\n\n\tconst screenShareTooltipHandleClose = () =>\n\t{\n\t\tscreenShareTooltipSetOpen(false);\n\t};\n\n\tconst screenShareTooltipHandleOpen = () =>\n\t{\n\t\tscreenShareTooltipSetOpen(true);\n\t};\n\n\tif (screenState === 'off' && me.screenShareInProgress && screenShareTooltipOpen)\n\t{\n\t\tscreenShareTooltipHandleClose();\n\t}\n\n\tconst spacingStyle =\n\t{\n\t\t'margin' : spacing\n\t};\n\n\tlet audioScore = null;\n\n\tif (micProducer && micProducer.score)\n\t{\n\t\taudioScore =\n\t\t\tmicProducer.score.reduce(\n\t\t\t\t(prev, curr) =>\n\t\t\t\t\t(prev.score < curr.score ? prev : curr)\n\t\t\t);\n\t}\n\n\tlet videoScore = null;\n\n\tif (webcamProducer && webcamProducer.score)\n\t{\n\t\tvideoScore =\n\t\t\twebcamProducer.score.reduce(\n\t\t\t\t(prev, curr) =>\n\t\t\t\t\t(prev.score < curr.score ? prev : curr)\n\t\t\t);\n\t}\n\n\tuseEffect(() =>\n\t{\n\t\tlet poll;\n\n\t\tconst interval = 1000;\n\n\t\tif (advancedMode)\n\t\t{\n\t\t\tpoll = setInterval(() => roomClient.getTransportStats(), interval);\n\t\t}\n\n\t\treturn () => clearInterval(poll);\n\t}, [ roomClient, advancedMode ]);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tclassnames(\n\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\tonTouchStart={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\tsetHover(true);\n\t\t\t\t}}\n\t\t\t\tonTouchEnd={() =>\n\t\t\t\t{\n\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t}, 2000);\n\t\t\t\t}}\n\t\t\t\tstyle={spacingStyle}\n\t\t\t>\n\n\t\t\t\t{ me.browser.platform !== 'mobile' && smallContainer &&\n\t\t\t\t<div className={classnames(\n\t\t\t\t\tclasses.ptt,\n\t\t\t\t\t(micState === 'muted' && me.isSpeaking) ? 'enabled' : null\n\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='me.mutedPTT'\n\t\t\t\t\t\tdefaultMessage='You are muted, hold down SPACE-BAR to talk'\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={classes.viewContainer} style={style}>\n\t\t\t\t\t{ me.browser.platform !== 'mobile' && !smallContainer &&\n\t\t\t\t\t\t<div className={classnames(\n\t\t\t\t\t\t\tclasses.ptt,\n\t\t\t\t\t\t\t(micState === 'muted' && me.isSpeaking) ? 'enabled' : null\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='me.mutedPTT'\n\t\t\t\t\t\t\t\tdefaultMessage='You are muted, hold down SPACE-BAR to talk'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t<p className={\n\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\tclasses.meTag,\n\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\tsmallContainer ? 'smallContainer' : null\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\tdefaultMessage='ME'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t\t{ !settings.buttonControlBar &&\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t\t\tclasses.controls,\n\t\t\t\t\t\t\t\tsettings.hiddenControls ? 'hide' : null,\n\t\t\t\t\t\t\t\thover ? 'hover' : null\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t<Tooltip title={micTip} placement='left'>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendMic || me.audioInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tmicState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsettings.voiceActivatedUnmute && !me.isAutoMuted ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (micState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\telse if (micState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.muteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.unmuteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ micState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MicIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={me.isAutoMuted ? 'secondary' : 'primary'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ opacity: noiseVolume }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendMic || me.audioInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={micState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\tsettings.voiceActivatedUnmute && !me.isAutoMuted? 'primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (micState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\telse if (micState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.muteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.unmuteMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ micState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MicIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={me.isAutoMuted && settings.voiceActivatedUnmute ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'secondary' : 'primary'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={me.isAutoMuted && settings.voiceActivatedUnmute ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ opacity: noiseVolume }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: { opacity: 1 }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t<Tooltip title={webcamTip} placement='left'>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={webcamState === 'on' ? 'primary' : 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\twebcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableWebcam() :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ webcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={webcamState === 'on' ? 'default' : 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\twebcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableWebcam() :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ webcamState === 'on' ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoOffIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{ me.browser.platform !== 'mobile' &&\n\t\t\t\t\t\t\t\t\t<Tooltip open={screenShareTooltipOpen}\n\t\t\t\t\t\t\t\t\t\tonClose={screenShareTooltipHandleClose}\n\t\t\t\t\t\t\t\t\t\tonOpen={screenShareTooltipHandleOpen}\n\t\t\t\t\t\t\t\t\t\ttitle={screenTip} placement='left'\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startScreenSharing',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!canShareScreen ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t!me.canShareScreen ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tme.screenShareInProgress\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (screenState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telse if (screenState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableScreenSharing();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ (screenState === 'on' || screenState === 'unsupported') &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ScreenOffIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ screenState === 'off' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ScreenIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.startScreenSharing',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!canShareScreen ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t!me.canShareScreen ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tme.screenShareInProgress\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={screenState === 'on' ? 'primary' : 'default'}\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (screenState === 'off')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ start: true });\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telse if (screenState === 'on')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableScreenSharing();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ (screenState === 'on' || screenState === 'unsupported') &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ScreenOffIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ screenState === 'off' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ScreenIcon/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t<VideoView\n\t\t\t\t\t\tisMe\n\t\t\t\t\t\tVideoView\n\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\tpeer={me}\n\t\t\t\t\t\tdisplayName={settings.displayName}\n\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\tvideoTrack={webcamProducer && webcamProducer.track}\n\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\taudioCodec={micProducer && micProducer.codec}\n\t\t\t\t\t\tvideoCodec={webcamProducer && webcamProducer.codec}\n\t\t\t\t\t\tnetInfo={transports && transports}\n\t\t\t\t\t\taudioScore={audioScore}\n\t\t\t\t\t\tvideoScore={videoScore}\n\t\t\t\t\t\tshowQuality\n\t\t\t\t\t\tonChangeDisplayName={(displayName) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\troomClient.changeDisplayName(displayName);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ micState === 'muted' ? null : <Volume id={me.id} /> }\n\t\t\t\t\t</VideoView>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{ extraVideoProducers.map((producer) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\t<div key={producer.id}\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t\t\t'webcam',\n\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\tactiveSpeaker ? 'active-speaker' : null\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={spacingStyle}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={classes.viewContainer} style={style}>\n\t\t\t\t\t\t\t<p className={\n\t\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\t\tclasses.meTag,\n\t\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\t\tsmallContainer ? 'smallContainer' : null\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\t\t\tdefaultMessage='ME'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t\t\t\tclasses.controls,\n\t\t\t\t\t\t\t\t\tsettings.hiddenControls ? 'hide' : null,\n\t\t\t\t\t\t\t\t\thover ? 'hover' : null\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Tooltip title={webcamTip} placement='left'>\n\t\t\t\t\t\t\t\t\t{ smallContainer ?\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.stopVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Stop video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.smallContainer}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableExtraVideo(producer.id);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\n\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\t\t\tid             : 'device.stopVideo',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Stop video'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\t\t\t\t\t\t\t\tsize={smallContainer ? 'small' : 'large'}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.disableExtraVideo(producer.id);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\t\tisMe\n\t\t\t\t\t\t\t\tisExtraVideo\n\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\tpeer={me}\n\t\t\t\t\t\t\t\tdisplayName={settings.displayName}\n\t\t\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\t\t\tvideoTrack={producer && producer.track}\n\t\t\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\t\t\tvideoCodec={producer && producer.codec}\n\t\t\t\t\t\t\t\tonChangeDisplayName={(displayName) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\troomClient.changeDisplayName(displayName);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t\t{ screenProducer &&\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.root, 'screen', hover ? 'hover' : null)}\n\t\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\t\tonMouseOut={() => setHover(false)}\n\t\t\t\t\tonTouchStart={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\tsetHover(true);\n\t\t\t\t\t}}\n\t\t\t\t\tonTouchEnd={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (touchTimeout)\n\t\t\t\t\t\t\tclearTimeout(touchTimeout);\n\n\t\t\t\t\t\ttouchTimeout = setTimeout(() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetHover(false);\n\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={spacingStyle}\n\t\t\t\t>\n\t\t\t\t\t<div className={classes.viewContainer} style={style}>\n\t\t\t\t\t\t<p className={\n\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\tclasses.meTag,\n\t\t\t\t\t\t\t\thover ? 'hover' : null,\n\t\t\t\t\t\t\t\tsmallContainer ? 'smallContainer' : null\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.me'\n\t\t\t\t\t\t\t\tdefaultMessage='ME'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\tisMe\n\t\t\t\t\t\t\tisScreen\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tvideoContain\n\t\t\t\t\t\t\tvideoTrack={screenProducer && screenProducer.track}\n\t\t\t\t\t\t\tvideoVisible={screenVisible}\n\t\t\t\t\t\t\tvideoCodec={screenProducer && screenProducer.codec}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nMe.propTypes =\n{\n\troomClient          : PropTypes.any.isRequired,\n\tadvancedMode        : PropTypes.bool,\n\tme                  : appPropTypes.Me.isRequired,\n\tsettings            : PropTypes.object,\n\tactiveSpeaker       : PropTypes.bool,\n\tmicProducer         : appPropTypes.Producer,\n\twebcamProducer      : appPropTypes.Producer,\n\tscreenProducer      : appPropTypes.Producer,\n\textraVideoProducers : PropTypes.arrayOf(appPropTypes.Producer),\n\tspacing             : PropTypes.number,\n\tstyle               : PropTypes.object,\n\tsmallContainer      : PropTypes.bool,\n\tcanShareScreen      : PropTypes.bool.isRequired,\n\tnoiseVolume         : PropTypes.number,\n\tclasses             : PropTypes.object.isRequired,\n\ttheme               : PropTypes.object.isRequired,\n\ttransports          : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.SHARE_SCREEN);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\tlet volume;\n\n\t\t// noiseVolume under threshold\n\t\tif (state.peerVolumes[state.me.id] < state.settings.noiseThreshold)\n\t\t{\n\t\t\t// noiseVolume mapped to range 0.5 ... 1 (threshold switch)\n\t\t\tvolume = 1 + ((Math.abs(state.peerVolumes[state.me.id] -\n\t\t\t\tstate.settings.noiseThreshold) / (-120 -\n\t\t\t\tstate.settings.noiseThreshold)));\n\t\t}\n\t\t// noiseVolume over threshold: no noise but voice\n\t\telse { volume = 0; }\n\n\t\treturn {\n\t\t\tme             : state.me,\n\t\t\t...meProducersSelector(state),\n\t\t\tsettings       : state.settings,\n\t\t\tactiveSpeaker  : state.me.id === state.room.activeSpeakerId,\n\t\t\tcanShareScreen : hasPermission(state),\n\t\t\ttransports     : state.transports,\n\t\t\tnoiseVolume    : volume\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tMath.round(prev.peerVolumes[prev.me.id]) ===\n\t\t\t\t\tMath.round(next.peerVolumes[next.me.id]) &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.producers === next.producers &&\n\t\t\t\tprev.settings === next.settings &&\n\t\t\t\tprev.transports === next.transports\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Me)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tspotlightPeersSelector,\n\tvideoBoxesSelector\n} from '../Selectors';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Peer from '../Containers/Peer';\nimport Me from '../Containers/Me';\n\nconst RATIO = 1.334;\nconst PADDING = 60;\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\twidth          : '100%',\n\t\t\theight         : '100%',\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tflexWrap       : 'wrap',\n\t\t\toverflow       : 'hidden',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center',\n\t\t\talignContent   : 'center'\n\t\t},\n\t\thiddenToolBar :\n\t\t{\n\t\t\tpaddingTop : 0,\n\t\t\ttransition : 'padding .5s'\n\t\t},\n\t\tshowingToolBar :\n\t\t{\n\t\t\tpaddingTop : 60,\n\t\t\ttransition : 'padding .5s'\n\t\t},\n\t\tbuttonControlBar :\n\t\t{\n\t\t\tpaddingLeft                    : 60,\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\tpaddingLeft : 0\n\t\t\t}\n\t\t}\n\t});\n\nclass Democratic extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\n\t\tthis.resizeTimeout = null;\n\n\t\tthis.peersRef = React.createRef();\n\t}\n\n\tupdateDimensions = () =>\n\t{\n\t\tif (!this.peersRef.current)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst n = this.props.boxes;\n\n\t\tif (n === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst width =\n\t\t\tthis.peersRef.current.clientWidth - (this.props.buttonControlBar ? PADDING : 0);\n\t\tconst height =\n\t\t\tthis.peersRef.current.clientHeight -\n\t\t\t(this.props.toolbarsVisible || this.props.permanentTopBar ? PADDING : 0);\n\n\t\tlet x, y, space;\n\n\t\tfor (let rows = 1; rows < 100; rows = rows + 1)\n\t\t{\n\t\t\tx = width / Math.ceil(n / rows);\n\t\t\ty = x / RATIO;\n\t\t\tif (height < (y * rows))\n\t\t\t{\n\t\t\t\ty = height / rows;\n\t\t\t\tx = RATIO * y;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tspace = height - (y * (rows));\n\t\t\tif (space < y)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (Math.ceil(this.state.peerWidth) !== Math.ceil(0.94 * x))\n\t\t{\n\t\t\tthis.setState({\n\t\t\t\tpeerWidth  : 0.94 * x,\n\t\t\t\tpeerHeight : 0.94 * y\n\t\t\t});\n\t\t}\n\t};\n\n\tcomponentDidMount()\n\t{\n\t\t// window.resize event listener\n\t\twindow.addEventListener('resize', () =>\n\t\t{\n\t\t\t// clear the timeout\n\t\t\tclearTimeout(this.resizeTimeout);\n\n\t\t\t// start timing for event \"completion\"\n\t\t\tthis.resizeTimeout = setTimeout(() => this.updateDimensions(), 250);\n\t\t});\n\n\t\tthis.updateDimensions();\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\twindow.removeEventListener('resize', this.updateDimensions);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t\tthis.updateDimensions();\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tadvancedMode,\n\t\t\tspotlightsPeers,\n\t\t\ttoolbarsVisible,\n\t\t\tpermanentTopBar,\n\t\t\tbuttonControlBar,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\tconst style =\n\t\t{\n\t\t\t'width'  : this.state.peerWidth ? this.state.peerWidth : 0,\n\t\t\t'height' : this.state.peerHeight ? this.state.peerHeight : 0\n\t\t};\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\tclasses.root,\n\t\t\t\t\ttoolbarsVisible || permanentTopBar ?\n\t\t\t\t\t\tclasses.showingToolBar : classes.hiddenToolBar,\n\t\t\t\t\tbuttonControlBar ? classes.buttonControlBar : null\n\t\t\t\t)}\n\t\t\t\tref={this.peersRef}\n\t\t\t>\n\t\t\t\t<Me\n\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\tspacing={6}\n\t\t\t\t\tstyle={style}\n\t\t\t\t/>\n\t\t\t\t{ spotlightsPeers.map((peer) =>\n\t\t\t\t{\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Peer\n\t\t\t\t\t\t\tkey={peer}\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tid={peer}\n\t\t\t\t\t\t\tspacing={6}\n\t\t\t\t\t\t\tstyle={style}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nDemocratic.propTypes =\n{\n\tadvancedMode     : PropTypes.bool,\n\tboxes            : PropTypes.number,\n\tspotlightsPeers  : PropTypes.array.isRequired,\n\ttoolbarsVisible  : PropTypes.bool.isRequired,\n\tpermanentTopBar  : PropTypes.bool.isRequired,\n\tbuttonControlBar : PropTypes.bool.isRequired,\n\ttoolAreaOpen     : PropTypes.bool.isRequired,\n\tclasses          : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tboxes            : videoBoxesSelector(state),\n\t\tspotlightsPeers  : spotlightPeersSelector(state),\n\t\ttoolbarsVisible  : state.room.toolbarsVisible,\n\t\tpermanentTopBar  : state.settings.permanentTopBar,\n\t\tbuttonControlBar : state.settings.buttonControlBar,\n\t\ttoolAreaOpen     : state.toolarea.toolAreaOpen\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.producers === next.producers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.spotlights === next.room.spotlights &&\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar &&\n\t\t\t\tprev.settings.buttonControlBar === next.settings.buttonControlBar &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Democratic));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { makePeerConsumerSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { FormattedMessage } from 'react-intl';\nimport VideoView from '../VideoContainers/VideoView';\nimport Volume from './Volume';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tboxShadow          : 'var(--peer-shadow)',\n\t\t\tborder             : 'var(--peer-border)',\n\t\t\ttouchAction        : 'none',\n\t\t\tbackgroundColor    : 'var(--peer-bg-color)',\n\t\t\tbackgroundImage    : 'var(--peer-empty-avatar)',\n\t\t\tbackgroundPosition : 'bottom',\n\t\t\tbackgroundSize     : 'auto 85%',\n\t\t\tbackgroundRepeat   : 'no-repeat',\n\t\t\t'&.webcam'         :\n\t\t\t{\n\t\t\t\torder : 2\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 1\n\t\t\t}\n\t\t},\n\t\tviewContainer :\n\t\t{\n\t\t\tposition   : 'relative',\n\t\t\t'&.webcam' :\n\t\t\t{\n\t\t\t\torder : 2\n\t\t\t},\n\t\t\t'&.screen' :\n\t\t\t{\n\t\t\t\torder : 1\n\t\t\t}\n\t\t},\n\t\tvideoInfo :\n\t\t{\n\t\t\tposition        : 'absolute',\n\t\t\twidth           : '100%',\n\t\t\theight          : '100%',\n\t\t\tbackgroundColor : 'rgba(0, 0, 0, 0.3)',\n\t\t\tdisplay         : 'flex',\n\t\t\tjustifyContent  : 'center',\n\t\t\talignItems      : 'center',\n\t\t\tpadding         : theme.spacing(1),\n\t\t\tzIndex          : 21,\n\t\t\t'& p'           :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 20,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nconst SpeakerPeer = (props) =>\n{\n\tconst {\n\t\tadvancedMode,\n\t\tpeer,\n\t\tmicConsumer,\n\t\twebcamConsumer,\n\t\tscreenConsumer,\n\t\tspacing,\n\t\tstyle,\n\t\tclasses\n\t} = props;\n\n\tconst videoVisible = (\n\t\tBoolean(webcamConsumer) &&\n\t\t!webcamConsumer.locallyPaused &&\n\t\t!webcamConsumer.remotelyPaused\n\t);\n\n\tconst screenVisible = (\n\t\tBoolean(screenConsumer) &&\n\t\t!screenConsumer.locallyPaused &&\n\t\t!screenConsumer.remotelyPaused\n\t);\n\n\tconst spacingStyle =\n\t{\n\t\t'margin' : spacing\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\tclassnames(\n\t\t\t\t\t\tclasses.root,\n\t\t\t\t\t\t'webcam'\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tstyle={spacingStyle}\n\t\t\t>\n\t\t\t\t<div className={classnames(classes.viewContainer)} style={style}>\n\t\t\t\t\t{ !videoVisible &&\n\t\t\t\t\t\t<div className={classes.videoInfo}>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t<VideoView\n\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\tpeer={peer}\n\t\t\t\t\t\tdisplayName={peer.displayName}\n\t\t\t\t\t\tshowPeerInfo\n\t\t\t\t\t\tconsumerSpatialLayers={webcamConsumer ? webcamConsumer.spatialLayers : null}\n\t\t\t\t\t\tconsumerTemporalLayers={webcamConsumer ? webcamConsumer.temporalLayers : null}\n\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\twebcamConsumer ? webcamConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvideoMultiLayer={webcamConsumer && webcamConsumer.type !== 'simple'}\n\t\t\t\t\t\tvideoTrack={webcamConsumer && webcamConsumer.track}\n\t\t\t\t\t\tvideoVisible={videoVisible}\n\t\t\t\t\t\taudioCodec={micConsumer && micConsumer.codec}\n\t\t\t\t\t\tvideoCodec={webcamConsumer && webcamConsumer.codec}\n\t\t\t\t\t\taudioScore={micConsumer ? micConsumer.score : null}\n\t\t\t\t\t\tvideoScore={webcamConsumer ? webcamConsumer.score : null}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Volume id={peer.id} />\n\t\t\t\t\t</VideoView>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{ screenConsumer &&\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.root, 'screen')}\n\t\t\t\t>\n\t\t\t\t\t{ !screenVisible &&\n\t\t\t\t\t\t<div className={classes.videoInfo} style={style}>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.videoPaused'\n\t\t\t\t\t\t\t\t\tdefaultMessage='This video is paused'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ screenVisible &&\n\t\t\t\t\t\t<div className={classnames(classes.viewContainer)} style={style}>\n\t\t\t\t\t\t\t<VideoView\n\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\tvideoContain\n\t\t\t\t\t\t\t\tconsumerSpatialLayers={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.spatialLayers : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerTemporalLayers={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.temporalLayers : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.currentTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredSpatialLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\t\t\t\t\tscreenConsumer ? screenConsumer.preferredTemporalLayer : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvideoMultiLayer={screenConsumer && screenConsumer.type !== 'simple'}\n\t\t\t\t\t\t\t\tvideoTrack={screenConsumer && screenConsumer.track}\n\t\t\t\t\t\t\t\tvideoVisible={screenVisible}\n\t\t\t\t\t\t\t\tvideoCodec={screenConsumer && screenConsumer.codec}\n\t\t\t\t\t\t\t\tvideoScore={screenConsumer ? screenConsumer.score : null}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nSpeakerPeer.propTypes =\n{\n\tadvancedMode   : PropTypes.bool,\n\tpeer           : appPropTypes.Peer,\n\tmicConsumer    : appPropTypes.Consumer,\n\twebcamConsumer : appPropTypes.Consumer,\n\tscreenConsumer : appPropTypes.Consumer,\n\tspacing        : PropTypes.number,\n\tstyle          : PropTypes.object,\n\tclasses        : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state, { id }) =>\n{\n\tconst getPeerConsumers = makePeerConsumerSelector();\n\n\treturn {\n\t\tpeer : state.peers[id],\n\t\t...getPeerConsumers(state, id)\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.activeSpeakerId === next.room.activeSpeakerId\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(SpeakerPeer));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport classnames from 'classnames';\nimport {\n\tvideoBoxesSelector\n} from '../Selectors';\nimport { withRoomContext } from '../../RoomContext';\nimport Me from '../Containers/Me';\nimport Peer from '../Containers/Peer';\nimport SpeakerPeer from '../Containers/SpeakerPeer';\nimport Grid from '@material-ui/core/Grid';\n\nconst RATIO = 1.334;\nconst PADDING_V = 40;\nconst PADDING_H = 0;\nconst FILMSTRING_PADDING_V = 10;\nconst FILMSTRING_PADDING_H = 0;\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\theight              : '100%',\n\t\t\twidth               : '100%',\n\t\t\tdisplay             : 'grid',\n\t\t\toverflow            : 'hidden',\n\t\t\tgridTemplateColumns : '1fr',\n\t\t\tgridTemplateRows    : '1fr 0.25fr'\n\t\t},\n\t\tspeaker :\n\t\t{\n\t\t\tgridArea       : '1 / 1 / 1 / 1',\n\t\t\tdisplay        : 'flex',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center'\n\t\t},\n\t\tfilmStrip :\n\t\t{\n\t\t\tgridArea : '2 / 1 / 2 / 1'\n\t\t},\n\t\tfilmItem :\n\t\t{\n\t\t\tdisplay      : 'flex',\n\t\t\tborder       : 'var(--peer-border)',\n\t\t\t'&.selected' :\n\t\t\t{\n\t\t\t\tborderColor : 'var(--selected-peer-border-color)'\n\t\t\t},\n\t\t\t'&.active' :\n\t\t\t{\n\t\t\t\tborderColor : 'var(--selected-peer-border-color)'\n\t\t\t}\n\t\t},\n\t\thiddenToolBar :\n\t\t{\n\t\t\tpaddingTop : 0,\n\t\t\ttransition : 'padding .5s'\n\t\t},\n\t\tshowingToolBar :\n\t\t{\n\t\t\tpaddingTop : 60,\n\t\t\ttransition : 'padding .5s'\n\t\t}\n\t});\n\nclass Filmstrip extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.resizeTimeout = null;\n\n\t\tthis.rootContainer = React.createRef();\n\n\t\tthis.activePeerContainer = React.createRef();\n\n\t\tthis.filmStripContainer = React.createRef();\n\t}\n\n\tstate = {\n\t\tlastSpeaker : null\n\t};\n\n\t// Find the name of the peer which is currently speaking. This is either\n\t// the latest active speaker, or the manually selected peer, or, if no\n\t// person has spoken yet, the first peer in the list of peers.\n\tgetActivePeerId = () =>\n\t{\n\t\tconst {\n\t\t\tselectedPeerId,\n\t\t\tpeers\n\t\t} = this.props;\n\n\t\tconst { lastSpeaker } = this.state;\n\n\t\tif (selectedPeerId && peers[selectedPeerId])\n\t\t{\n\t\t\treturn this.props.selectedPeerId;\n\t\t}\n\n\t\tif (lastSpeaker && peers[lastSpeaker])\n\t\t{\n\t\t\treturn this.state.lastSpeaker;\n\t\t}\n\n\t\tconst peerIds = Object.keys(peers);\n\n\t\tif (peerIds.length > 0)\n\t\t{\n\t\t\treturn peerIds[0];\n\t\t}\n\t};\n\n\tisSharingCamera = (peerId) => this.props.peers[peerId] &&\n\t\tthis.props.peers[peerId].consumers.some((consumer) =>\n\t\t\tthis.props.consumers[consumer].source === 'screen');\n\n\tupdateDimensions = () =>\n\t{\n\t\tconst newState = {};\n\n\t\tconst root = this.rootContainer.current;\n\n\t\tif (!root)\n\t\t\treturn;\n\n\t\tconst availableWidth = root.clientWidth;\n\t\t// Grid is:\n\t\t// 4/5 speaker\n\t\t// 1/5 filmstrip\n\t\tconst availableSpeakerHeight = (root.clientHeight * 0.8) -\n\t\t\t(this.props.toolbarsVisible || this.props.permanentTopBar ? PADDING_V : PADDING_H);\n\n\t\tconst availableFilmstripHeight = root.clientHeight * 0.2;\n\n\t\tconst speaker = this.activePeerContainer.current;\n\n\t\tif (speaker)\n\t\t{\n\t\t\tlet speakerWidth = (availableWidth - PADDING_H);\n\n\t\t\tlet speakerHeight = speakerWidth / RATIO;\n\n\t\t\tif (this.isSharingCamera(this.getActivePeerId()))\n\t\t\t{\n\t\t\t\tspeakerWidth /= 2;\n\t\t\t\tspeakerHeight = speakerWidth / RATIO;\n\t\t\t}\n\n\t\t\tif (speakerHeight > (availableSpeakerHeight - PADDING_V))\n\t\t\t{\n\t\t\t\tspeakerHeight = (availableSpeakerHeight - PADDING_V);\n\t\t\t\tspeakerWidth = speakerHeight * RATIO;\n\t\t\t}\n\n\t\t\tnewState.speakerWidth = speakerWidth;\n\t\t\tnewState.speakerHeight = speakerHeight;\n\t\t}\n\n\t\tconst filmStrip = this.filmStripContainer.current;\n\n\t\tif (filmStrip)\n\t\t{\n\t\t\tlet filmStripHeight = availableFilmstripHeight - FILMSTRING_PADDING_V;\n\n\t\t\tlet filmStripWidth = filmStripHeight * RATIO;\n\n\t\t\tif (\n\t\t\t\t(filmStripWidth * this.props.boxes) >\n\t\t\t\t(availableWidth - FILMSTRING_PADDING_H)\n\t\t\t)\n\t\t\t{\n\t\t\t\tfilmStripWidth = (availableWidth - FILMSTRING_PADDING_H) /\n\t\t\t\t\tthis.props.boxes;\n\t\t\t\tfilmStripHeight = filmStripWidth / RATIO;\n\t\t\t}\n\n\t\t\tnewState.filmStripWidth = filmStripWidth;\n\t\t\tnewState.filmStripHeight = filmStripHeight;\n\t\t}\n\n\t\tthis.setState({\n\t\t\t...newState\n\t\t});\n\t};\n\n\tcomponentDidMount()\n\t{\n\t\t// window.resize event listener\n\t\twindow.addEventListener('resize', () =>\n\t\t{\n\t\t\t// clear the timeout\n\t\t\tclearTimeout(this.resizeTimeout);\n\n\t\t\t// start timing for event \"completion\"\n\t\t\tthis.resizeTimeout = setTimeout(() => this.updateDimensions(), 250);\n\t\t});\n\n\t\tthis.updateDimensions();\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\twindow.removeEventListener('resize', this.updateDimensions);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.props.activeSpeakerId != null &&\n\t\t\t\tthis.props.activeSpeakerId !== this.props.myId\n\t\t\t)\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line react/no-did-update-set-state\n\t\t\t\tthis.setState({\n\t\t\t\t\tlastSpeaker : this.props.activeSpeakerId\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.updateDimensions();\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\troomClient,\n\t\t\tpeers,\n\t\t\tmyId,\n\t\t\tadvancedMode,\n\t\t\tspotlights,\n\t\t\ttoolbarsVisible,\n\t\t\tpermanentTopBar,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\tconst activePeerId = this.getActivePeerId();\n\n\t\tconst speakerStyle =\n\t\t{\n\t\t\twidth  : this.state.speakerWidth,\n\t\t\theight : this.state.speakerHeight\n\t\t};\n\n\t\tconst peerStyle =\n\t\t{\n\t\t\twidth  : this.state.filmStripWidth,\n\t\t\theight : this.state.filmStripHeight\n\t\t};\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\tclasses.root,\n\t\t\t\t\ttoolbarsVisible || permanentTopBar ?\n\t\t\t\t\t\tclasses.showingToolBar : classes.hiddenToolBar\n\t\t\t\t)}\n\t\t\t\tref={this.rootContainer}\n\t\t\t>\n\t\t\t\t<div className={classes.speaker} ref={this.activePeerContainer}>\n\t\t\t\t\t{ peers[activePeerId] &&\n\t\t\t\t\t\t<SpeakerPeer\n\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\tid={activePeerId}\n\t\t\t\t\t\t\tstyle={speakerStyle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\n\t\t\t\t<div className={classes.filmStrip} ref={this.filmStripContainer}>\n\t\t\t\t\t<Grid container justify='center' spacing={0}>\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={classnames(classes.filmItem, {\n\t\t\t\t\t\t\t\t\tactive : myId === activePeerId\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Me\n\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\tstyle={peerStyle}\n\t\t\t\t\t\t\t\t\tsmallContainer\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t{ Object.keys(peers).map((peerId) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (spotlights.find((spotlightsElement) => spotlightsElement === peerId))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Grid key={peerId} item>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={peerId}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => roomClient.setSelectedPeer(peerId)}\n\t\t\t\t\t\t\t\t\t\t\tclassName={classnames(classes.filmItem, {\n\t\t\t\t\t\t\t\t\t\t\t\tselected : this.props.selectedPeerId === peerId,\n\t\t\t\t\t\t\t\t\t\t\t\tactive   : peerId === activePeerId\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Peer\n\t\t\t\t\t\t\t\t\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\t\t\t\t\t\t\t\t\tid={peerId}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={peerStyle}\n\t\t\t\t\t\t\t\t\t\t\t\tsmallContainer\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn ('');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nFilmstrip.propTypes = {\n\troomClient      : PropTypes.any.isRequired,\n\tactiveSpeakerId : PropTypes.string,\n\tadvancedMode    : PropTypes.bool,\n\tpeers           : PropTypes.object.isRequired,\n\tconsumers       : PropTypes.object.isRequired,\n\tmyId            : PropTypes.string.isRequired,\n\tselectedPeerId  : PropTypes.string,\n\tspotlights      : PropTypes.array.isRequired,\n\tboxes           : PropTypes.number,\n\ttoolbarsVisible : PropTypes.bool.isRequired,\n\ttoolAreaOpen    : PropTypes.bool.isRequired,\n\tpermanentTopBar : PropTypes.bool,\n\tclasses         : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tactiveSpeakerId : state.room.activeSpeakerId,\n\t\tselectedPeerId  : state.room.selectedPeerId,\n\t\tpeers           : state.peers,\n\t\tconsumers       : state.consumers,\n\t\tmyId            : state.me.id,\n\t\tspotlights      : state.room.spotlights,\n\t\tboxes           : videoBoxesSelector(state),\n\t\ttoolbarsVisible : state.room.toolbarsVisible,\n\t\ttoolAreaOpen    : state.toolarea.toolAreaOpen,\n\t\tpermanentTopBar : state.settings.permanentTopBar\n\t};\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.activeSpeakerId === next.room.activeSpeakerId &&\n\t\t\t\tprev.room.selectedPeerId === next.room.selectedPeerId &&\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.spotlights === next.room.spotlights &&\n\t\t\t\tprev.me.id === next.me.id\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(Filmstrip)));","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class PeerAudio extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\t// Latest received audio track.\n\t\t// @type {MediaStreamTrack}\n\t\tthis._audioTrack = null;\n\t\tthis._audioOutputDevice = null;\n\t}\n\n\trender()\n\t{\n\t\treturn (\n\t\t\t<audio\n\t\t\t\tref='audio'\n\t\t\t\tautoPlay\n\t\t\t/>\n\t\t);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tconst { audioTrack, audioOutputDevice } = this.props;\n\n\t\tthis._setTrack(audioTrack);\n\t\tthis._setOutputDevice(audioOutputDevice);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tconst { audioTrack, audioOutputDevice } = this.props;\n\n\t\t\tthis._setTrack(audioTrack);\n\t\t\tthis._setOutputDevice(audioOutputDevice);\n\t\t}\n\t}\n\n\t_setTrack(audioTrack)\n\t{\n\t\tif (this._audioTrack === audioTrack)\n\t\t\treturn;\n\n\t\tthis._audioTrack = audioTrack;\n\n\t\tconst { audio } = this.refs;\n\n\t\tif (audioTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tif (audioTrack)\n\t\t\t\tstream.addTrack(audioTrack);\n\n\t\t\taudio.srcObject = stream;\n\t\t}\n\t\telse\n\t\t{\n\t\t\taudio.srcObject = null;\n\t\t}\n\t}\n\n\t_setOutputDevice(audioOutputDevice)\n\t{\n\t\tif (this._audioOutputDevice === audioOutputDevice)\n\t\t\treturn;\n\n\t\tthis._audioOutputDevice = audioOutputDevice;\n\n\t\tconst { audio } = this.refs;\n\n\t\tif (audioOutputDevice && typeof audio.setSinkId === 'function')\n\t\t\taudio.setSinkId(audioOutputDevice);\n\t}\n}\n\nPeerAudio.propTypes =\n{\n\taudioTrack        : PropTypes.any,\n\taudioOutputDevice : PropTypes.string\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { passiveMicConsumerSelector } from '../Selectors';\nimport PropTypes from 'prop-types';\nimport PeerAudio from './PeerAudio';\n\nconst AudioPeers = (props) =>\n{\n\tconst {\n\t\tmicConsumers,\n\t\taudioOutputDevice\n\t} = props;\n\n\treturn (\n\t\t<div data-component='AudioPeers'>\n\t\t\t{\n\t\t\t\tmicConsumers.map((micConsumer) =>\n\t\t\t\t{\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<PeerAudio\n\t\t\t\t\t\t\tkey={micConsumer.id}\n\t\t\t\t\t\t\taudioTrack={micConsumer.track}\n\t\t\t\t\t\t\taudioOutputDevice={audioOutputDevice}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t}\n\t\t</div>\n\t);\n};\n\nAudioPeers.propTypes =\n{\n\tmicConsumers      : PropTypes.array,\n\taudioOutputDevice : PropTypes.string\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tmicConsumers      : passiveMicConsumerSelector(state),\n\t\taudioOutputDevice : state.settings.selectedAudioOutputDevice\n\t});\n\nconst AudioPeersContainer = connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.consumers === next.consumers &&\n\t\t\t\tprev.room.spotlights === next.room.spotlights &&\n\t\t\t\tprev.settings.selectedAudioOutputDevice ===\n\t\t\t\tnext.settings.selectedAudioOutputDevice\n\t\t\t);\n\t\t}\n\t}\n)(AudioPeers);\n\nexport default AudioPeersContainer;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as appPropTypes from '../appPropTypes';\nimport * as roomActions from '../../actions/roomActions';\nimport FullScreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport VideoView from './VideoView';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition : 'absolute',\n\t\t\ttop      : 0,\n\t\t\tleft     : 0,\n\t\t\theight   : '100%',\n\t\t\twidth    : '100%',\n\t\t\tzIndex   : 20000\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20020,\n\t\t\tright          : 0,\n\t\t\ttop            : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tjustifyContent : 'flex-start',\n\t\t\talignItems     : 'center',\n\t\t\tpadding        : theme.spacing(1)\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tmargin             : '0.2vmin',\n\t\t\tborderRadius       : 2,\n\t\t\tbackgroundColor    : 'rgba(255, 255, 255, 0.7)',\n\t\t\tcursor             : 'pointer',\n\t\t\ttransitionProperty : 'opacity, background-color',\n\t\t\ttransitionDuration : '0.15s',\n\t\t\twidth              : '5vmin',\n\t\t\theight             : '5vmin',\n\t\t\topacity            : 0,\n\t\t\t'&.visible'        :\n\t\t\t{\n\t\t\t\topacity : 1\n\t\t\t}\n\t\t},\n\t\ticon :\n\t\t{\n\t\t\tfontSize : '5vmin'\n\t\t},\n\t\tincompatibleVideo :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20010,\n\t\t\ttop            : 0,\n\t\t\tbottom         : 0,\n\t\t\tleft           : 0,\n\t\t\tright          : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center',\n\t\t\t'& p'          :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 15,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nconst FullScreenView = (props) =>\n{\n\tconst {\n\t\tadvancedMode,\n\t\tconsumer,\n\t\ttoggleConsumerFullscreen,\n\t\ttoolbarsVisible,\n\t\tpermanentTopBar,\n\t\tclasses\n\t} = props;\n\n\tif (!consumer)\n\t\treturn null;\n\n\tconst consumerVisible = (\n\t\tBoolean(consumer) &&\n\t\t!consumer.locallyPaused &&\n\t\t!consumer.remotelyPaused\n\t);\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<div className={classes.controls}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(classes.button, {\n\t\t\t\t\t\tvisible : toolbarsVisible || permanentTopBar\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\ttoggleConsumerFullscreen(consumer);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<FullScreenExitIcon className={classes.icon} />\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<VideoView\n\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\tvideoContain\n\t\t\t\tconsumerSpatialLayers={consumer ? consumer.spatialLayers : null}\n\t\t\t\tconsumerTemporalLayers={consumer ? consumer.temporalLayers : null}\n\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.currentSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.currentTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.preferredSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.preferredTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tvideoMultiLayer={consumer && consumer.type !== 'simple'}\n\t\t\t\tvideoTrack={consumer && consumer.track}\n\t\t\t\tvideoVisible={consumerVisible}\n\t\t\t\tvideoCodec={consumer && consumer.codec}\n\t\t\t\tvideoScore={consumer ? consumer.score : null}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nFullScreenView.propTypes =\n{\n\tadvancedMode             : PropTypes.bool,\n\tconsumer                 : appPropTypes.Consumer,\n\ttoggleConsumerFullscreen : PropTypes.func.isRequired,\n\ttoolbarsVisible          : PropTypes.bool,\n\tpermanentTopBar          : PropTypes.bool,\n\tclasses                  : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tconsumer        : state.consumers[state.room.fullScreenConsumer],\n\t\ttoolbarsVisible : state.room.toolbarsVisible,\n\t\tpermanentTopBar : state.settings.permanentTopBar\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\ttoggleConsumerFullscreen : (consumer) =>\n\t\t{\n\t\t\tif (consumer)\n\t\t\t\tdispatch(roomActions.toggleConsumerFullscreen(consumer.id));\n\t\t}\n\t});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.consumers[prev.room.fullScreenConsumer] ===\n\t\t\t\t\tnext.consumers[next.room.fullScreenConsumer] &&\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(FullScreenView));\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport FullScreen from '../FullScreen';\nimport FullScreenIcon from '@material-ui/icons/Fullscreen';\nimport FullScreenExitIcon from '@material-ui/icons/FullscreenExit';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition : 'absolute',\n\t\t\ttop      : 0,\n\t\t\tleft     : 0,\n\t\t\theight   : '100%',\n\t\t\twidth    : '100%',\n\t\t\tzIndex   : 20000\n\t\t},\n\t\tcontrols :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20020,\n\t\t\tright          : 0,\n\t\t\ttop            : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'row',\n\t\t\tjustifyContent : 'flex-start',\n\t\t\talignItems     : 'center',\n\t\t\tpadding        : theme.spacing(1)\n\t\t},\n\t\tbutton :\n\t\t{\n\t\t\tflex               : '0 0 auto',\n\t\t\tmargin             : '0.2vmin',\n\t\t\tborderRadius       : 2,\n\t\t\tbackgroundColor    : 'rgba(255, 255, 255, 0.7)',\n\t\t\tcursor             : 'pointer',\n\t\t\ttransitionProperty : 'opacity, background-color',\n\t\t\ttransitionDuration : '0.15s',\n\t\t\twidth              : '5vmin',\n\t\t\theight             : '5vmin'\n\t\t},\n\t\ticon :\n\t\t{\n\t\t\tfontSize : '5vmin'\n\t\t},\n\t\tincompatibleVideo :\n\t\t{\n\t\t\tposition       : 'absolute',\n\t\t\tzIndex         : 20010,\n\t\t\ttop            : 0,\n\t\t\tbottom         : 0,\n\t\t\tleft           : 0,\n\t\t\tright          : 0,\n\t\t\tdisplay        : 'flex',\n\t\t\tflexDirection  : 'column',\n\t\t\tjustifyContent : 'center',\n\t\t\talignItems     : 'center',\n\t\t\t'& p'          :\n\t\t\t{\n\t\t\t\tpadding       : '6px 12px',\n\t\t\t\tborderRadius  : 6,\n\t\t\t\tuserSelect    : 'none',\n\t\t\t\tpointerEvents : 'none',\n\t\t\t\tfontSize      : 15,\n\t\t\t\tcolor         : 'rgba(255, 255, 255, 0.55)'\n\t\t\t}\n\t\t}\n\t});\n\nclass NewWindow extends React.PureComponent\n{\n\tstatic defaultProps =\n\t{\n\t\turl        : '',\n\t\tname       : 'Multiparty Meeting',\n\t\ttitle      : 'Multiparty Meeting',\n\t\tfeatures   : { width: '800px', height: '600px' },\n\t\tonBlock    : null,\n\t\tonUnload   : null,\n\t\tcenter     : 'parent',\n\t\tcopyStyles : true\n\t};\n\n\thandleToggleFullscreen = () =>\n\t{\n\t\tif (this.fullscreen.fullscreenElement)\n\t\t{\n\t\t\tthis.fullscreen.exitFullscreen();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fullscreen.requestFullscreen(this.window.document.documentElement);\n\t\t}\n\t};\n\n\thandleFullscreenChange = () =>\n\t{\n\t\tthis.setState({\n\t\t\tfullscreen : this.fullscreen.fullscreenElement !== null\n\t\t});\n\t};\n\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.container = document.createElement('div');\n\t\tthis.window = null;\n\t\tthis.windowCheckerInterval = null;\n\t\tthis.released = false;\n\t\tthis.fullscreen = null;\n\n\t\tthis.state = {\n\t\t\tmounted    : false,\n\t\t\tfullscreen : false\n\t\t};\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\tif (!this.state.mounted)\n\t\t\treturn null;\n\n\t\treturn ReactDOM.createPortal([\n\t\t\t<div key='newwindow' className={classes.root}>\n\t\t\t\t<div className={classes.controls}>\n\t\t\t\t\t{ this.fullscreen.fullscreenEnabled &&\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\tonClick={this.handleToggleFullscreen}\n\t\t\t\t\t\t\tdata-tip='Fullscreen'\n\t\t\t\t\t\t\tdata-place='right'\n\t\t\t\t\t\t\tdata-type='dark'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ this.state.fullscreen ?\n\t\t\t\t\t\t\t\t<FullScreenExitIcon className={classes.icon} />\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<FullScreenIcon className={classes.icon} />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t{ this.props.children }\n\t\t\t</div>\n\t\t], this.container);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tthis.openChild();\n\t\t// eslint-disable-next-line react/no-did-mount-set-state\n\t\tthis.setState({ mounted: true });\n\n\t\tthis.fullscreen = new FullScreen(this.window.document);\n\n\t\tif (this.fullscreen.fullscreenEnabled)\n\t\t{\n\t\t\tthis.fullscreen.addEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t}\n\t}\n\n\topenChild()\n\t{\n\t\tconst {\n\t\t\turl,\n\t\t\ttitle,\n\t\t\tname,\n\t\t\tfeatures,\n\t\t\tonBlock,\n\t\t\tcenter\n\t\t} = this.props;\n\n\t\tif (center === 'parent')\n\t\t{\n\t\t\tfeatures.left =\n\t\t\t\t(window.top.outerWidth / 2) + window.top.screenX - (features.width / 2);\n\t\t\tfeatures.top =\n\t\t\t\t(window.top.outerHeight / 2) + window.top.screenY - (features.height / 2);\n\t\t}\n\t\telse if (center === 'screen')\n\t\t{\n\t\t\tconst screenLeft =\n\t\t\t\twindow.screenLeft !== undefined ? window.screenLeft : window.screen.left;\n\t\t\tconst screenTop =\n\t\t\t\twindow.screenTop !== undefined ? window.screenTop : window.screen.top;\n\n\t\t\tconst width = window.innerWidth\n\t\t\t\t? window.innerWidth\n\t\t\t\t: document.documentElement.clientWidth\n\t\t\t\t\t? document.documentElement.clientWidth\n\t\t\t\t\t: window.screen.width;\n\t\t\tconst height = window.innerHeight\n\t\t\t\t? window.innerHeight\n\t\t\t\t: document.documentElement.clientHeight\n\t\t\t\t\t? document.documentElement.clientHeight\n\t\t\t\t\t: window.screen.height;\n\n\t\t\tfeatures.left = (width / 2) - (features.width / 2) + screenLeft;\n\t\t\tfeatures.top = (height / 2) - (features.height / 2) + screenTop;\n\t\t}\n\n\t\tthis.window = window.open(url, name, toWindowFeatures(features));\n\n\t\tthis.windowCheckerInterval = setInterval(() =>\n\t\t{\n\t\t\tif (!this.window || this.window.closed)\n\t\t\t{\n\t\t\t\tthis.release();\n\t\t\t}\n\t\t}, 50);\n\n\t\tif (this.window)\n\t\t{\n\t\t\tthis.window.document.title = title;\n\t\t\tthis.window.document.body.appendChild(this.container);\n\n\t\t\tif (this.props.copyStyles)\n\t\t\t{\n\t\t\t\tsetTimeout(() => copyStyles(document, this.window.document), 0);\n\t\t\t}\n\n\t\t\tthis.window.addEventListener('beforeunload', () => this.release());\n\t\t}\n\t\telse if (typeof onBlock === 'function')\n\t\t{\n\t\t\tonBlock(null);\n\t\t}\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\tif (this.window)\n\t\t{\n\t\t\tif (this.fullscreen && this.fullscreen.fullscreenEnabled)\n\t\t\t{\n\t\t\t\tthis.fullscreen.removeEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t\t}\n\n\t\t\tthis.window.close();\n\t\t}\n\t}\n\n\trelease()\n\t{\n\t\tif (this.released)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.released = true;\n\n\t\tclearInterval(this.windowCheckerInterval);\n\n\t\tconst { onUnload } = this.props;\n\n\t\tif (typeof onUnload === 'function')\n\t\t{\n\t\t\tonUnload(null);\n\t\t}\n\t}\n}\n\nNewWindow.propTypes = {\n\tchildren   : PropTypes.node,\n\turl        : PropTypes.string,\n\tname       : PropTypes.string,\n\ttitle      : PropTypes.string,\n\tfeatures   : PropTypes.object,\n\tonUnload   : PropTypes.func,\n\tonBlock    : PropTypes.func,\n\tcenter     : PropTypes.oneOf([ 'parent', 'screen' ]),\n\tcopyStyles : PropTypes.bool,\n\tclasses    : PropTypes.object.isRequired\n};\n\nfunction copyStyles(source, target)\n{\n\tArray.from(source.styleSheets).forEach((styleSheet) =>\n\t{\n\t\tlet rules;\n\n\t\ttry\n\t\t{\n\t\t\trules = styleSheet.cssRules;\n\t\t}\n\t\tcatch (err) {}\n\n\t\tif (rules)\n\t\t{\n\t\t\tconst newStyleEl = source.createElement('style');\n\n\t\t\tArray.from(styleSheet.cssRules).forEach((cssRule) =>\n\t\t\t{\n\t\t\t\tconst { cssText, type } = cssRule;\n\n\t\t\t\tlet returnText = cssText;\n\n\t\t\t\tif ([ 3, 5 ].includes(type))\n\t\t\t\t{\n\t\t\t\t\treturnText = cssText\n\t\t\t\t\t\t.split('url(')\n\t\t\t\t\t\t.map((line) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (line[1] === '/')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn `${line.slice(0, 1)}${\n\t\t\t\t\t\t\t\t\twindow.location.origin\n\t\t\t\t\t\t\t\t}${line.slice(1)}`;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn line;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join('url(');\n\t\t\t\t}\n\n\t\t\t\tnewStyleEl.appendChild(source.createTextNode(returnText));\n\t\t\t});\n\n\t\t\ttarget.head.appendChild(newStyleEl);\n\t\t}\n\t\telse if (styleSheet.href)\n\t\t{\n\t\t\tconst newLinkEl = source.createElement('link');\n\n\t\t\tnewLinkEl.rel = 'stylesheet';\n\t\t\tnewLinkEl.href = styleSheet.href;\n\t\t\ttarget.head.appendChild(newLinkEl);\n\t\t}\n\t});\n}\n\nfunction toWindowFeatures(obj)\n{\n\treturn Object.keys(obj)\n\t\t.reduce((features, name) =>\n\t\t{\n\t\t\tconst value = obj[name];\n\n\t\t\tif (typeof value === 'boolean')\n\t\t\t{\n\t\t\t\tfeatures.push(`${name}=${value ? 'yes' : 'no'}`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfeatures.push(`${name}=${value}`);\n\t\t\t}\n\n\t\t\treturn features;\n\t\t}, [])\n\t\t.join(',');\n}\n\nexport default withStyles(styles)(NewWindow);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition      : 'relative',\n\t\t\tflex          : '100 100 auto',\n\t\t\theight        : '100%',\n\t\t\twidth         : '100%',\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column',\n\t\t\toverflow      : 'hidden'\n\t\t},\n\t\tvideo :\n\t\t{\n\t\t\tflex               : '100 100 auto',\n\t\t\theight             : '100%',\n\t\t\twidth              : '100%',\n\t\t\tobjectFit          : 'contain',\n\t\t\tuserSelect         : 'none',\n\t\t\ttransitionProperty : 'opacity',\n\t\t\ttransitionDuration : '.15s',\n\t\t\tbackgroundColor    : 'rgba(0, 0, 0, 1)',\n\t\t\t'&.hidden'         :\n\t\t\t{\n\t\t\t\topacity            : 0,\n\t\t\t\ttransitionDuration : '0s'\n\t\t\t},\n\t\t\t'&.loading' :\n\t\t\t{\n\t\t\t\tfilter : 'blur(5px)'\n\t\t\t}\n\t\t}\n\t});\n\nclass FullView extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\t// Latest received video track.\n\t\t// @type {MediaStreamTrack}\n\t\tthis._videoTrack = null;\n\n\t\tthis.video = React.createRef();\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tvideoVisible,\n\t\t\tvideoProfile,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<video\n\t\t\t\t\tref={this.video}\n\t\t\t\t\tclassName={classnames(classes.video, {\n\t\t\t\t\t\thidden  : !videoVisible,\n\t\t\t\t\t\tloading : videoProfile === 'none'\n\t\t\t\t\t})}\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tmuted={Boolean(true)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tconst { videoTrack } = this.props;\n\n\t\tthis._setTracks(videoTrack);\n\t}\n\n\tcomponentDidUpdate(prevProps)\n\t{\n\t\tif (prevProps !== this.props)\n\t\t{\n\t\t\tconst { videoTrack } = this.props;\n\n\t\t\tthis._setTracks(videoTrack);\n\t\t}\n\t}\n\n\t_setTracks(videoTrack)\n\t{\n\t\tif (this._videoTrack === videoTrack)\n\t\t\treturn;\n\n\t\tthis._videoTrack = videoTrack;\n\n\t\tconst video = this.video.current;\n\n\t\tif (videoTrack)\n\t\t{\n\t\t\tconst stream = new MediaStream();\n\n\t\t\tstream.addTrack(videoTrack);\n\t\t\tvideo.srcObject = stream;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvideo.srcObject = null;\n\t\t}\n\t}\n}\n\nFullView.propTypes =\n{\n\tvideoTrack   : PropTypes.any,\n\tvideoVisible : PropTypes.bool,\n\tvideoProfile : PropTypes.string,\n\tclasses      : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(FullView);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport NewWindow from './NewWindow';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from '../appPropTypes';\nimport * as roomActions from '../../actions/roomActions';\nimport FullView from '../VideoContainers/FullView';\n\nconst VideoWindow = (props) =>\n{\n\tconst {\n\t\tadvancedMode,\n\t\tconsumer,\n\t\ttoggleConsumerWindow\n\t} = props;\n\n\tif (!consumer)\n\t\treturn null;\n\n\tconst consumerVisible = (\n\t\tBoolean(consumer) &&\n\t\t!consumer.locallyPaused &&\n\t\t!consumer.remotelyPaused\n\t);\n\n\treturn (\n\t\t<NewWindow onUnload={toggleConsumerWindow}>\n\t\t\t<FullView\n\t\t\t\tadvancedMode={advancedMode}\n\t\t\t\tconsumerSpatialLayers={consumer ? consumer.spatialLayers : null}\n\t\t\t\tconsumerTemporalLayers={consumer ? consumer.temporalLayers : null}\n\t\t\t\tconsumerCurrentSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.currentSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerCurrentTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.currentTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredSpatialLayer={\n\t\t\t\t\tconsumer ? consumer.preferredSpatialLayer : null\n\t\t\t\t}\n\t\t\t\tconsumerPreferredTemporalLayer={\n\t\t\t\t\tconsumer ? consumer.preferredTemporalLayer : null\n\t\t\t\t}\n\t\t\t\tvideoMultiLayer={consumer && consumer.type !== 'simple'}\n\t\t\t\tvideoTrack={consumer && consumer.track}\n\t\t\t\tvideoVisible={consumerVisible}\n\t\t\t\tvideoCodec={consumer && consumer.codec}\n\t\t\t\tvideoScore={consumer ? consumer.score : null}\n\t\t\t/>\n\t\t</NewWindow>\n\t);\n};\n\nVideoWindow.propTypes =\n{\n\tadvancedMode         : PropTypes.bool,\n\tconsumer             : appPropTypes.Consumer,\n\ttoggleConsumerWindow : PropTypes.func.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tconsumer : state.consumers[state.room.windowConsumer]\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) =>\n{\n\treturn {\n\t\ttoggleConsumerWindow : () =>\n\t\t{\n\t\t\tdispatch(roomActions.toggleConsumerWindow());\n\t\t}\n\t};\n};\n\nconst VideoWindowContainer = connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.consumers[prev.room.windowConsumer] ===\n\t\t\t\t\tnext.consumers[next.room.windowConsumer]\n\t\t\t);\n\t\t}\n\t}\n)(VideoWindow);\n\nexport default VideoWindowContainer;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { withRoomContext } from '../../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport { permissions } from '../../../permissions';\nimport { makePermissionSelector } from '../../Selectors';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport EmptyAvatar from '../../../images/avatar-empty.jpeg';\nimport PromoteIcon from '@material-ui/icons/OpenInBrowser';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst styles = () =>\n\t({\n\t\troot :\n\t\t{\n\t\t\talignItems : 'center'\n\t\t}\n\t});\n\nconst ListLobbyPeer = (props) =>\n{\n\tconst {\n\t\troomClient,\n\t\tpeer,\n\t\tpromotionInProgress,\n\t\tcanPromote,\n\t\tclasses\n\t} = props;\n\n\tconst intl = useIntl();\n\n\tconst picture = peer.picture || EmptyAvatar;\n\n\treturn (\n\t\t<ListItem\n\t\t\tclassName={classnames(classes.root)}\n\t\t\tkey={peer.peerId}\n\t\t\tbutton\n\t\t\talignItems='flex-start'\n\t\t>\n\t\t\t<ListItemAvatar>\n\t\t\t\t<Avatar alt='Peer avatar' src={picture} />\n\t\t\t</ListItemAvatar>\n\t\t\t<ListItemText\n\t\t\t\tprimary={peer.displayName}\n\t\t\t/>\n\t\t\t<Tooltip\n\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\tid             : 'tooltip.admitFromLobby',\n\t\t\t\t\tdefaultMessage : 'Click to let them in'\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<IconButton\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\t!canPromote ||\n\t\t\t\t\t\tpeer.promotionInProgress ||\n\t\t\t\t\t\tpromotionInProgress\n\t\t\t\t\t}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t{\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\troomClient.promoteLobbyPeer(peer.id);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<PromoteIcon />\n\t\t\t\t</IconButton>\n\t\t\t</Tooltip>\n\t\t</ListItem>\n\t);\n};\n\nListLobbyPeer.propTypes =\n{\n\troomClient          : PropTypes.any.isRequired,\n\tadvancedMode        : PropTypes.bool,\n\tpeer                : PropTypes.object.isRequired,\n\tpromotionInProgress : PropTypes.bool.isRequired,\n\tcanPromote          : PropTypes.bool.isRequired,\n\tclasses             : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = (initialState, { id }) =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.PROMOTE_PEER);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\tpeer                : state.lobbyPeers[id],\n\t\t\tpromotionInProgress : state.room.lobbyPeersPromotionInProgress,\n\t\t\tcanPromote          : hasPermission(state)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.peers === next.peers && // For checking permissions\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.lobbyPeers === next.lobbyPeers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ListLobbyPeer)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n\tlobbyPeersKeySelector,\n\tmakePermissionSelector\n} from '../../Selectors';\nimport { permissions } from '../../../permissions';\nimport * as appPropTypes from '../../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../../RoomContext';\nimport * as roomActions from '../../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Button from '@material-ui/core/Button';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListLobbyPeer from './ListLobbyPeer';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t},\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tlock :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t}\n\t});\n\nconst LockDialog = ({\n\troomClient,\n\troom,\n\thandleCloseLockDialog,\n\tlobbyPeers,\n\tcanPromote,\n\tclasses\n}) =>\n{\n\treturn (\n\t\t<Dialog\n\t\t\tclassName={classes.root}\n\t\t\topen={room.lockDialogOpen}\n\t\t\tonClose={() => handleCloseLockDialog(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.lobbyAdministration'\n\t\t\t\t\tdefaultMessage='Lobby administration'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t{ lobbyPeers.length > 0 ?\n\t\t\t\t<List\n\t\t\t\t\tdense\n\t\t\t\t\tsubheader={\n\t\t\t\t\t\t<ListSubheader component='div'>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.peersInLobby'\n\t\t\t\t\t\t\t\tdefaultMessage='Participants in Lobby'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ListSubheader>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{\n\t\t\t\t\t\tlobbyPeers.map((peerId) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (<ListLobbyPeer key={peerId} id={peerId} />);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</List>\n\t\t\t\t:\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogContentText gutterBottom>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.lobbyEmpty'\n\t\t\t\t\t\t\tdefaultMessage='There are currently no one in the lobby'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</DialogContentText>\n\t\t\t\t</DialogContent>\n\t\t\t}\n\t\t\t<DialogActions>\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={\n\t\t\t\t\t\tlobbyPeers.length === 0 ||\n\t\t\t\t\t\t!canPromote ||\n\t\t\t\t\t\troom.lobbyPeersPromotionInProgress\n\t\t\t\t\t}\n\t\t\t\t\tonClick={() => roomClient.promoteAllLobbyPeers()}\n\t\t\t\t\tcolor='primary'\n\t\t\t\t>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.promoteAllPeers'\n\t\t\t\t\t\tdefaultMessage='Promote all'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={() => handleCloseLockDialog(false)} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nLockDialog.propTypes =\n{\n\troomClient            : PropTypes.object.isRequired,\n\troom                  : appPropTypes.Room.isRequired,\n\thandleCloseLockDialog : PropTypes.func.isRequired,\n\thandleAccessCode      : PropTypes.func.isRequired,\n\tlobbyPeers            : PropTypes.array,\n\tcanPromote            : PropTypes.bool,\n\tclasses               : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasPermission = makePermissionSelector(permissions.PROMOTE_PEER);\n\n\tconst mapStateToProps = (state) =>\n\t{\n\t\treturn {\n\t\t\troom       : state.room,\n\t\t\tlobbyPeers : lobbyPeersKeySelector(state),\n\t\t\tcanPromote : hasPermission(state)\n\t\t};\n\t};\n\n\treturn mapStateToProps;\n};\n\nconst mapDispatchToProps = {\n\thandleCloseLockDialog : roomActions.setLockDialogOpen,\n\thandleAccessCode      : roomActions.setAccessCode\n};\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.lobbyPeers === next.lobbyPeers\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(LockDialog)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport * as appPropTypes from '../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as settingsActions from '../../actions/settingsActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport classnames from 'classnames';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Select from '@material-ui/core/Select';\nimport Slider from '@material-ui/core/Slider';\nimport Typography from '@material-ui/core/Typography';\nimport Collapse from '@material-ui/core/Collapse';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport Switch from '@material-ui/core/Switch';\n\nconst NoiseSlider = withStyles(\n\t{\n\t\troot :\n\t\t{\n\t\t\tcolor   : '#3880ff',\n\t\t\theight  : 2,\n\t\t\tpadding : '15px 0'\n\t\t},\n\t\ttrack : {\n\t\t\theight : 2\n\t\t},\n\t\trail : {\n\t\t\theight  : 2,\n\t\t\topacity : 0.2\n\t\t},\n\t\tmark : {\n\t\t\tbackgroundColor : '#bfbfbf',\n\t\t\theight          : 10,\n\t\t\twidth           : 3,\n\t\t\tmarginTop       : -3\n\t\t},\n\t\tmarkActive : {\n\t\t\topacity         : 1,\n\t\t\tbackgroundColor : 'currentColor'\n\t\t}\n\t})(Slider);\n\nconst styles = (theme) => ({\n\tsetting :\n\t{\n\t\tpadding : theme.spacing(2)\n\t},\n\tmargin :\n\t{\n\t\theight : theme.spacing(3)\n\t},\n\troot : {\n\t\twidth           : '100%',\n\t\tbackgroundColor : theme.palette.background.paper\n\t},\n\tswitchLabel : {\n\t\tjustifyContent : 'space-between',\n\t\tflex           : 'auto',\n\t\tdisplay        : 'flex',\n\t\tpadding        : theme.spacing(1)\n\t},\n\tnested : {\n\t\tdisplay       : 'block',\n\t\tpaddingTop    : 0,\n\t\tpaddingBottom : 0,\n\t\tpaddingLeft   : '25px',\n\t\tpaddingRight  : '25px'\n\t},\n\tformControl :\n\t{\n\t\tdisplay : 'flex'\n\t}\n});\n\nconst MediaSettings = ({\n\tsetEchoCancellation,\n\tsetAutoGainControl,\n\tsetNoiseSuppression,\n\tsetVoiceActivatedUnmute,\n\troomClient,\n\tme,\n\tvolume,\n\tsettings,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\tconst [ audioSettingsOpen, setAudioSettingsOpen ] = React.useState(false);\n\tconst [ videoSettingsOpen, setVideoSettingsOpen ] = React.useState(false);\n\n\tconst resolutions = [ {\n\t\tvalue : 'low',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.low',\n\t\t\tdefaultMessage : 'Low'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'medium',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.medium',\n\t\t\tdefaultMessage : 'Medium'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'high',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.high',\n\t\t\tdefaultMessage : 'High (HD)'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'veryhigh',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.veryHigh',\n\t\t\tdefaultMessage : 'Very high (FHD)'\n\t\t})\n\t},\n\t{\n\t\tvalue : 'ultra',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.ultra',\n\t\t\tdefaultMessage : 'Ultra (UHD)'\n\t\t})\n\t} ];\n\n\tlet webcams;\n\n\tif (me.webcamDevices)\n\t\twebcams = Object.values(me.webcamDevices);\n\telse\n\t\twebcams = [];\n\n\tlet audioDevices;\n\n\tif (me.audioDevices)\n\t\taudioDevices = Object.values(me.audioDevices);\n\telse\n\t\taudioDevices = [];\n\n\tlet audioOutputDevices;\n\n\tif (me.audioOutputDevices)\n\t\taudioOutputDevices = Object.values(me.audioOutputDevices);\n\telse\n\t\taudioOutputDevices = [];\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={settings.selectedWebcam || ''}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\troomClient.updateWebcam({\n\t\t\t\t\t\t\t\t\trestart     : true,\n\t\t\t\t\t\t\t\t\tnewDeviceId : event.target.value\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.camera',\n\t\t\t\t\t\t\tdefaultMessage : 'Camera'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\tdisabled={webcams.length === 0 || me.webcamInProgress}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ webcams.map((webcam, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={webcam.deviceId}>{webcam.label}</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t{ webcams.length > 0 ?\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.selectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.cantSelectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t\t<List className={classes.root} component='nav'>\n\t\t\t\t\t<ListItem button onClick={() => setVideoSettingsOpen(!videoSettingsOpen)}>\n\t\t\t\t\t\t<ListItemText primary={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.showAdvancedVideo',\n\t\t\t\t\t\t\tdefaultMessage : 'Advanced video settings'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{videoSettingsOpen ? <ExpandLess /> : <ExpandMore />}\n\t\t\t\t\t</ListItem>\n\t\t\t\t\t<Collapse in={videoSettingsOpen} timeout='auto'>\n\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={settings.resolution || ''}\n\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ newResolution: event.target.value });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tname='Video resolution'\n\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{resolutions.map((resolution, index) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem key={index} value={resolution.value}>\n\t\t\t\t\t\t\t\t\t\t\t{resolution.label}\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='settings.resolution'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Select your video resolution'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t{ /*\n\t\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\tvalue={settings.frameRate || ''}\n\t\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\t\troomClient.updateWebcam({ newFrameRate: event.target.value });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tname='Frame rate'\n\t\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ [ 1, 5, 10, 15, 20, 25, 30 ].map((frameRate) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={frameRate} value={frameRate}>\n\t\t\t\t\t\t\t\t\t\t\t\t{frameRate}\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='settings.frameRate'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Select your video frame rate'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\tvalue={settings.screenSharingResolution || ''}\n\t\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ newResolution: event.target.value });\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tname='Screen sharing resolution'\n\t\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{resolutions.map((resolution, index) =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={index} value={resolution.value}>\n\t\t\t\t\t\t\t\t\t\t\t\t{resolution.label}\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\t\tid='settings.screenSharingResolution'\n\t\t\t\t\t\t\t\t\t\tdefaultMessage='Select your screen sharing resolution'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t*/ }\n\t\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={settings.screenSharingFrameRate || ''}\n\t\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ newFrameRate: event.target.value });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tname='Frame rate'\n\t\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ [ 1, 5, 10, 15, 20, 25, 30 ].map((screenSharingFrameRate) =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem key={screenSharingFrameRate} value={screenSharingFrameRate}>\n\t\t\t\t\t\t\t\t\t\t\t{screenSharingFrameRate}\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='settings.screenSharingFrameRate'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Select your screen sharing frame rate'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t</Collapse>\n\t\t\t\t</List>\n\t\t\t</form>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={settings.selectedAudioDevice || ''}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\troomClient.updateMic({ restart: true, newDeviceId: event.target.value });\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.audio',\n\t\t\t\t\t\t\tdefaultMessage : 'Audio input device'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\tdisabled={audioDevices.length === 0 || me.audioInProgress}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ audioDevices.map((audio, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={audio.deviceId}>{audio.label==='' ? index+1 : audio.label }</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t{ audioDevices.length > 0 ?\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.selectAudio',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Select audio input device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.cantSelectAudio',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select audio input device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t\t{ 'audioOutputSupportedBrowsers' in window.config &&\n\t\t\t\t\twindow.config.audioOutputSupportedBrowsers.includes(me.browser.name) &&\n\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={settings.selectedAudioOutputDevice || ''}\n\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\troomClient.changeAudioOutputDevice(event.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.audioOutput',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Audio output device'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t\tdisabled={audioOutputDevices.length === 0 || me.audioOutputInProgress}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ audioOutputDevices.map((audioOutput, index) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\tvalue={audioOutput.deviceId}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{audioOutput.label}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t{ audioOutputDevices.length > 0 ?\n\t\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'settings.selectAudioOutput',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Select audio output device'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'settings.cantSelectAudioOutput',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select audio output device'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t</FormControl>\n\t\t\t\t}\n\t\t\t\t<List className={classes.root} component='nav'>\n\t\t\t\t\t<ListItem button onClick={() => setAudioSettingsOpen(!audioSettingsOpen)}>\n\t\t\t\t\t\t<ListItemText primary={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.showAdvancedAudio',\n\t\t\t\t\t\t\tdefaultMessage : 'Advanced audio settings'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{audioSettingsOpen ? <ExpandLess /> : <ExpandMore />}\n\t\t\t\t\t</ListItem>\n\t\t\t\t\t<Collapse in={audioSettingsOpen} timeout='auto'>\n\t\t\t\t\t\t<List component='div'>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.echoCancellation}\n\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEchoCancellation(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.echoCancellation',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Echo cancellation'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.autoGainControl} onChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetAutoGainControl(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.autoGainControl',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Auto gain control'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.noiseSuppression} onChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetNoiseSuppression(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t\troomClient.updateMic();\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.noiseSuppression',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Noise suppression'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch color='secondary'\n\t\t\t\t\t\t\t\t\t\t\tchecked={settings.voiceActivatedUnmute} onChange={\n\t\t\t\t\t\t\t\t\t\t\t\t(event) =>\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetVoiceActivatedUnmute(event.target.checked);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>}\n\t\t\t\t\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'settings.voiceActivatedUnmute',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Voice activated unmute'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem className={classes.nested}>\n\t\t\t\t\t\t\t\t<div className={classes.margin} />\n\t\t\t\t\t\t\t\t<Typography gutterBottom>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'settings.noiseThreshold',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Noise threshold'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}:\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<NoiseSlider className={classnames(classes.slider, classnames.setting)}\n\t\t\t\t\t\t\t\t\tkey={'noise-threshold-slider'}\n\t\t\t\t\t\t\t\t\tmin={-100}\n\t\t\t\t\t\t\t\t\tvalue={settings.noiseThreshold}\n\t\t\t\t\t\t\t\t\tmax={0}\n\t\t\t\t\t\t\t\t\tvalueLabelDisplay={'auto'}\n\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t(event, value) =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient._setNoiseThreshold(value);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tmarks={[ { value: volume, label: `${volume} dB` } ]}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Collapse>\n\t\t\t\t</List>\n\t\t\t</form>\n\t\t</React.Fragment>\n\t);\n};\n\nMediaSettings.propTypes =\n{\n\troomClient              : PropTypes.any.isRequired,\n\tsetEchoCancellation     : PropTypes.func.isRequired,\n\tsetAutoGainControl      : PropTypes.func.isRequired,\n\tsetNoiseSuppression     : PropTypes.func.isRequired,\n\tsetVoiceActivatedUnmute : PropTypes.func.isRequired,\n\tme                      : appPropTypes.Me.isRequired,\n\tvolume                  : PropTypes.number,\n\tsettings                : PropTypes.object.isRequired,\n\tclasses                 : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n{\n\treturn {\n\t\tme       : state.me,\n\t\tvolume   : state.peerVolumes[state.me.id],\n\t\tsettings : state.settings\n\t};\n};\n\nconst mapDispatchToProps = {\n\tsetEchoCancellation     : settingsActions.setEchoCancellation,\n\tsetAutoGainControl      : settingsActions.setAutoGainControl,\n\tsetNoiseSuppression     : settingsActions.setNoiseSuppression,\n\tsetVoiceActivatedUnmute : settingsActions.setVoiceActivatedUnmute\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me === next.me &&\n\t\t\t\tprev.settings === next.settings &&\n\t\t\t\tprev.peerVolumes[prev.me.id] === next[next.me.id]\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(MediaSettings)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport * as appPropTypes from '../appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as roomActions from '../../actions/roomActions';\nimport * as settingsActions from '../../actions/settingsActions';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\n\nconst styles = (theme) =>\n\t({\n\t\tsetting :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t},\n\t\tformControl :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tswitchLabel : {\n\t\t\tjustifyContent : 'space-between',\n\t\t\tflex           : 'auto',\n\t\t\tdisplay        : 'flex',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tmarginRight    : 0\n\t\t}\n\t});\n\nconst AppearenceSettings = ({\n\tisMobile,\n\troom,\n\tsettings,\n\tonTogglePermanentTopBar,\n\tonToggleHiddenControls,\n\tonToggleButtonControlBar,\n\tonToggleShowNotifications,\n\tonToggleDrawerOverlayed,\n\thandleChangeMode,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\tconst modes = [ {\n\t\tvalue : 'democratic',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.democratic',\n\t\t\tdefaultMessage : 'Democratic view'\n\t\t})\n\t}, {\n\t\tvalue : 'filmstrip',\n\t\tlabel : intl.formatMessage({\n\t\t\tid             : 'label.filmstrip',\n\t\t\tdefaultMessage : 'Filmstrip view'\n\t\t})\n\t} ];\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={room.mode || ''}\n\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\thandleChangeMode(event.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.layout',\n\t\t\t\t\t\t\tdefaultMessage : 'Room layout'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ modes.map((mode, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={mode.value}>\n\t\t\t\t\t\t\t\t\t{mode.label}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='settings.selectRoomLayout'\n\t\t\t\t\t\t\tdefaultMessage='Select room layout'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t</form>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={\n\t\t\t\t\t<Switch checked={settings.permanentTopBar} onChange={onTogglePermanentTopBar} value='permanentTopBar' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.permanentTopBar',\n\t\t\t\t\tdefaultMessage : 'Permanent top bar'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.hiddenControls} onChange={onToggleHiddenControls} value='hiddenControls' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.hiddenControls',\n\t\t\t\t\tdefaultMessage : 'Hidden media controls'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.buttonControlBar} onChange={onToggleButtonControlBar} value='buttonControlBar' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.buttonControlBar',\n\t\t\t\t\tdefaultMessage : 'Separate media controls'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t{ !isMobile &&\n\t\t\t\t<FormControlLabel\n\t\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\t\tcontrol={<Switch checked={settings.drawerOverlayed} onChange={onToggleDrawerOverlayed} value='drawerOverlayed' />}\n\t\t\t\t\tlabelPlacement='start'\n\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\tid             : 'settings.drawerOverlayed',\n\t\t\t\t\t\tdefaultMessage : 'Side drawer over content'\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t}\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.showNotifications} onChange={onToggleShowNotifications} value='showNotifications' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.showNotifications',\n\t\t\t\t\tdefaultMessage : 'Show notifications'\n\t\t\t\t})}\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n};\n\nAppearenceSettings.propTypes =\n{\n\tisMobile                  : PropTypes.bool.isRequired,\n\troom                      : appPropTypes.Room.isRequired,\n\tsettings                  : PropTypes.object.isRequired,\n\tonTogglePermanentTopBar   : PropTypes.func.isRequired,\n\tonToggleHiddenControls    : PropTypes.func.isRequired,\n\tonToggleButtonControlBar  : PropTypes.func.isRequired,\n\tonToggleShowNotifications : PropTypes.func.isRequired,\n\tonToggleDrawerOverlayed   : PropTypes.func.isRequired,\n\thandleChangeMode          : PropTypes.func.isRequired,\n\tclasses                   : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tisMobile : state.me.browser.platform === 'mobile',\n\t\troom     : state.room,\n\t\tsettings : state.settings\n\t});\n\nconst mapDispatchToProps = {\n\tonTogglePermanentTopBar   : settingsActions.togglePermanentTopBar,\n\tonToggleHiddenControls    : settingsActions.toggleHiddenControls,\n\tonToggleShowNotifications : settingsActions.toggleShowNotifications,\n\tonToggleButtonControlBar  : settingsActions.toggleButtonControlBar,\n\tonToggleDrawerOverlayed   : settingsActions.toggleDrawerOverlayed,\n\thandleChangeMode          : roomActions.setDisplayMode\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.settings === next.settings\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(AppearenceSettings));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as settingsActions from '../../actions/settingsActions';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\n\nconst styles = (theme) =>\n\t({\n\t\tsetting :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t},\n\t\tformControl :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t},\n\t\tswitchLabel : {\n\t\t\tjustifyContent : 'space-between',\n\t\t\tflex           : 'auto',\n\t\t\tdisplay        : 'flex',\n\t\t\tpadding        : theme.spacing(1),\n\t\t\tmarginRight    : 0\n\t\t}\n\t});\n\nconst AdvancedSettings = ({\n\troomClient,\n\tsettings,\n\tonToggleAdvancedMode,\n\tonToggleNotificationSounds,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.advancedMode} onChange={onToggleAdvancedMode} value='advancedMode' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.advancedMode',\n\t\t\t\t\tdefaultMessage : 'Advanced mode'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t<FormControlLabel\n\t\t\t\tclassName={classnames(classes.setting, classes.switchLabel)}\n\t\t\t\tcontrol={<Switch checked={settings.notificationSounds} onChange={onToggleNotificationSounds} value='notificationSounds' />}\n\t\t\t\tlabelPlacement='start'\n\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\tid             : 'settings.notificationSounds',\n\t\t\t\t\tdefaultMessage : 'Notification sounds'\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t{ !window.config.lockLastN &&\n\t\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={settings.lastN || ''}\n\t\t\t\t\t\t\tonChange={(event) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (event.target.value)\n\t\t\t\t\t\t\t\t\troomClient.changeMaxSpotlights(event.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tname='Last N'\n\t\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ Array.from(\n\t\t\t\t\t\t\t\t{ length: window.config.maxLastN || 10 },\n\t\t\t\t\t\t\t\t(_, i) => i + 1\n\t\t\t\t\t\t\t).map((lastN) =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem key={lastN} value={lastN}>\n\t\t\t\t\t\t\t\t\t\t{lastN}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='settings.lastn'\n\t\t\t\t\t\t\t\tdefaultMessage='Number of visible videos'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t</FormControl>\n\t\t\t\t</form>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n};\n\nAdvancedSettings.propTypes =\n{\n\troomClient                 : PropTypes.any.isRequired,\n\tsettings                   : PropTypes.object.isRequired,\n\tonToggleAdvancedMode       : PropTypes.func.isRequired,\n\tonToggleNotificationSounds : PropTypes.func.isRequired,\n\tclasses                    : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tsettings : state.settings\n\t});\n\nconst mapDispatchToProps = {\n\tonToggleAdvancedMode       : settingsActions.toggleAdvancedMode,\n\tonToggleNotificationSounds : settingsActions.toggleNotificationSounds\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.settings === next.settings\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(AdvancedSettings)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport MediaSettings from './MediaSettings';\nimport AppearenceSettings from './AppearenceSettings';\nimport AdvancedSettings from './AdvancedSettings';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\n\nconst tabs =\n[\n\t'media',\n\t'appearence',\n\t'advanced'\n];\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t},\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\ttabsHeader :\n\t\t{\n\t\t\tflexGrow : 1\n\t\t}\n\t});\n\nconst Settings = ({\n\tcurrentSettingsTab,\n\tsettingsOpen,\n\thandleCloseSettings,\n\tsetSettingsTab,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<Dialog\n\t\t\tclassName={classes.root}\n\t\t\topen={settingsOpen}\n\t\t\tonClose={() => handleCloseSettings(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='settings.settings'\n\t\t\t\t\tdefaultMessage='Settings'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<Tabs\n\t\t\t\tclassName={classes.tabsHeader}\n\t\t\t\tvalue={tabs.indexOf(currentSettingsTab)}\n\t\t\t\tonChange={(event, value) => setSettingsTab(tabs[value])}\n\t\t\t\tindicatorColor='primary'\n\t\t\t\ttextColor='primary'\n\t\t\t\tvariant='fullWidth'\n\t\t\t>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.media',\n\t\t\t\t\t\t\tdefaultMessage : 'Media'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\tid             : 'label.appearance',\n\t\t\t\t\t\tdefaultMessage : 'Appearence'\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={intl.formatMessage({\n\t\t\t\t\t\tid             : 'label.advanced',\n\t\t\t\t\t\tdefaultMessage : 'Advanced'\n\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t</Tabs>\n\t\t\t{currentSettingsTab === 'media' && <MediaSettings />}\n\t\t\t{currentSettingsTab === 'appearence' && <AppearenceSettings />}\n\t\t\t{currentSettingsTab === 'advanced' && <AdvancedSettings />}\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={() => handleCloseSettings(false)} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nSettings.propTypes =\n{\n\tcurrentSettingsTab  : PropTypes.string.isRequired,\n\tsettingsOpen        : PropTypes.bool.isRequired,\n\thandleCloseSettings : PropTypes.func.isRequired,\n\tsetSettingsTab      : PropTypes.func.isRequired,\n\tclasses             : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tcurrentSettingsTab : state.room.currentSettingsTab,\n\t\tsettingsOpen       : state.room.settingsOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseSettings : roomActions.setSettingsOpen,\n\tsetSettingsTab      : roomActions.setSettingsTab\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.currentSettingsTab === next.room.currentSettingsTab &&\n\t\t\t\tprev.room.settingsOpen === next.room.settingsOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(Settings));","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {\n\tlobbyPeersKeySelector,\n\tpeersLengthSelector,\n\traisedHandsSelector,\n\tmakePermissionSelector\n} from '../Selectors';\nimport { permissions } from '../../permissions';\nimport * as appPropTypes from '../appPropTypes';\nimport { withRoomContext } from '../../RoomContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as roomActions from '../../actions/roomActions';\nimport * as toolareaActions from '../../actions/toolareaActions';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport classnames from 'classnames';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Avatar from '@material-ui/core/Avatar';\nimport Badge from '@material-ui/core/Badge';\nimport Paper from '@material-ui/core/Paper';\nimport ExtensionIcon from '@material-ui/icons/Extension';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport FullScreenIcon from '@material-ui/icons/Fullscreen';\nimport FullScreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport SecurityIcon from '@material-ui/icons/Security';\nimport PeopleIcon from '@material-ui/icons/People';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\nimport VideoCallIcon from '@material-ui/icons/VideoCall';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport HelpIcon from '@material-ui/icons/Help';\nimport InfoIcon from '@material-ui/icons/Info';\n\nconst styles = (theme) =>\n\t({\n\t\tpersistentDrawerOpen :\n\t\t{\n\t\t\twidth                          : 'calc(100% - 30vw)',\n\t\t\tmarginLeft                     : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 40vw)',\n\t\t\t\tmarginLeft : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 50vw)',\n\t\t\t\tmarginLeft : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 70vw)',\n\t\t\t\tmarginLeft : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth      : 'calc(100% - 90vw)',\n\t\t\t\tmarginLeft : '90vw'\n\t\t\t}\n\t\t},\n\t\tmenuButton :\n\t\t{\n\t\t\tmargin  : 0,\n\t\t\tpadding : 0\n\t\t},\n\t\tlogo :\n\t\t{\n\t\t\tdisplay                      : 'none',\n\t\t\tmarginLeft                   : 20,\n\t\t\t[theme.breakpoints.up('sm')] :\n\t\t\t{\n\t\t\t\tdisplay : 'block'\n\t\t\t}\n\t\t},\n\t\tdivider :\n\t\t{\n\t\t\tmarginLeft : theme.spacing(3)\n\t\t},\n\t\tshow :\n\t\t{\n\t\t\topacity    : 1,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\thide :\n\t\t{\n\t\t\topacity    : 0,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\tgrow :\n\t\t{\n\t\t\tflexGrow : 1\n\t\t},\n\t\ttitle :\n\t\t{\n\t\t\tdisplay                      : 'none',\n\t\t\tmarginLeft                   : 20,\n\t\t\t[theme.breakpoints.up('sm')] :\n\t\t\t{\n\t\t\t\tdisplay : 'block'\n\t\t\t}\n\t\t},\n\t\tsectionDesktop : {\n\t\t\tdisplay                      : 'none',\n\t\t\t[theme.breakpoints.up('md')] : {\n\t\t\t\tdisplay : 'flex'\n\t\t\t}\n\t\t},\n\t\tsectionMobile : {\n\t\t\tdisplay                      : 'flex',\n\t\t\t[theme.breakpoints.up('md')] : {\n\t\t\t\tdisplay : 'none'\n\t\t\t}\n\t\t},\n\t\tactionButton :\n\t\t{\n\t\t\tmargin  : theme.spacing(1, 0),\n\t\t\tpadding : theme.spacing(0, 1)\n\t\t},\n\t\tdisabledButton :\n\t\t{\n\t\t\tmargin : theme.spacing(1, 0)\n\t\t},\n\t\tgreen :\n\t\t{\n\t\t\tcolor : 'rgba(0, 153, 0, 1)'\n\t\t},\n\t\tmoreAction :\n\t\t{\n\t\t\tmargin : theme.spacing(0.5, 0, 0.5, 1.5)\n\t\t}\n\t});\n\nconst PulsingBadge = withStyles((theme) =>\n\t({\n\t\tbadge :\n\t\t{\n\t\t\tbackgroundColor : theme.palette.secondary.main,\n\t\t\t'&::after'      :\n\t\t\t{\n\t\t\t\tposition     : 'absolute',\n\t\t\t\twidth        : '100%',\n\t\t\t\theight       : '100%',\n\t\t\t\tborderRadius : '50%',\n\t\t\t\tanimation    : '$ripple 1.2s infinite ease-in-out',\n\t\t\t\tborder       : `3px solid ${theme.palette.secondary.main}`,\n\t\t\t\tcontent      : '\"\"'\n\t\t\t}\n\t\t},\n\t\t'@keyframes ripple' :\n\t\t{\n\t\t\t'0%' :\n\t\t\t{\n\t\t\t\ttransform : 'scale(.8)',\n\t\t\t\topacity   : 1\n\t\t\t},\n\t\t\t'100%' :\n\t\t\t{\n\t\t\t\ttransform : 'scale(2.4)',\n\t\t\t\topacity   : 0\n\t\t\t}\n\t\t}\n\t}))(Badge);\n\nconst TopBar = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst [ mobileMoreAnchorEl, setMobileMoreAnchorEl ] = useState(null);\n\tconst [ anchorEl, setAnchorEl ] = useState(null);\n\tconst [ currentMenu, setCurrentMenu ] = useState(null);\n\n\tconst handleExited = () =>\n\t{\n\t\tsetCurrentMenu(null);\n\t};\n\n\tconst handleMobileMenuOpen = (event) =>\n\t{\n\t\tsetMobileMoreAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleMobileMenuClose = () =>\n\t{\n\t\tsetMobileMoreAnchorEl(null);\n\t};\n\n\tconst handleMenuOpen = (event, menu) =>\n\t{\n\t\tsetAnchorEl(event.currentTarget);\n\t\tsetCurrentMenu(menu);\n\t};\n\n\tconst handleMenuClose = () =>\n\t{\n\t\tsetAnchorEl(null);\n\n\t\thandleMobileMenuClose();\n\t};\n\n\tconst {\n\t\troomClient,\n\t\troom,\n\t\tpeersLength,\n\t\tlobbyPeers,\n\t\tpermanentTopBar,\n\t\tdrawerOverlayed,\n\t\ttoolAreaOpen,\n\t\tisMobile,\n\t\tmyPicture,\n\t\tloggedIn,\n\t\tloginEnabled,\n\t\tfullscreenEnabled,\n\t\tfullscreen,\n\t\tonFullscreen,\n\t\tsetSettingsOpen,\n\t\tsetExtraVideoOpen,\n\t\tsetHelpOpen,\n\t\tsetAboutOpen,\n\t\tsetLockDialogOpen,\n\t\ttoggleToolArea,\n\t\topenUsersTab,\n\t\tunread,\n\t\tcanProduceExtraVideo,\n\t\tcanLock,\n\t\tcanPromote,\n\t\tclasses\n\t} = props;\n\n\tconst isMenuOpen = Boolean(anchorEl);\n\tconst isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n\n\tconst lockTooltip = room.locked ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.unLockRoom',\n\t\t\tdefaultMessage : 'Unlock room'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.lockRoom',\n\t\t\tdefaultMessage : 'Lock room'\n\t\t});\n\n\tconst fullscreenTooltip = fullscreen ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.leaveFullscreen',\n\t\t\tdefaultMessage : 'Leave fullscreen'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.enterFullscreen',\n\t\t\tdefaultMessage : 'Enter fullscreen'\n\t\t});\n\n\tconst loginTooltip = loggedIn ?\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.logout',\n\t\t\tdefaultMessage : 'Log out'\n\t\t})\n\t\t:\n\t\tintl.formatMessage({\n\t\t\tid             : 'tooltip.login',\n\t\t\tdefaultMessage : 'Log in'\n\t\t});\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<AppBar\n\t\t\t\tposition='fixed'\n\t\t\t\tclassName={classnames(\n\t\t\t\t\troom.toolbarsVisible || permanentTopBar ?\n\t\t\t\t\t\tclasses.show : classes.hide,\n\t\t\t\t\t!(isMobile || drawerOverlayed) && toolAreaOpen ?\n\t\t\t\t\t\tclasses.persistentDrawerOpen : null\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<PulsingBadge\n\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\tbadgeContent={unread}\n\t\t\t\t\t\tonClick={() => toggleToolArea()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.openDrawer',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Open drawer'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tclassName={classes.menuButton}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</PulsingBadge>\n\t\t\t\t\t{ window.config.logo && <img alt='Logo' className={classes.logo} src={window.config.logo} /> }\n\t\t\t\t\t<Typography\n\t\t\t\t\t\tclassName={classes.title}\n\t\t\t\t\t\tvariant='h6'\n\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\tnoWrap\n\t\t\t\t\t>\n\t\t\t\t\t\t{ window.config.title ? window.config.title : 'Multiparty meeting' }\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<div className={classes.grow} />\n\t\t\t\t\t<div className={classes.sectionDesktop}>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'label.moreActions',\n\t\t\t\t\t\t\t\tdefaultMessage : 'More actions'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-owns={\n\t\t\t\t\t\t\t\t\tisMenuOpen &&\n\t\t\t\t\t\t\t\t\tcurrentMenu === 'moreActions' ?\n\t\t\t\t\t\t\t\t\t\t'material-appbar' : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\taria-haspopup\n\t\t\t\t\t\t\t\tonClick={(event) => handleMenuOpen(event, 'moreActions')}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ExtensionIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{ fullscreenEnabled &&\n\t\t\t\t\t\t\t<Tooltip title={fullscreenTooltip}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.enterFullscreen',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Enter fullscreen'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tonClick={onFullscreen}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ fullscreen ?\n\t\t\t\t\t\t\t\t\t\t<FullScreenExitIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'tooltip.participants',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Show participants'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'tooltip.participants',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show participants'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\tonClick={() => openUsersTab()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\tbadgeContent={peersLength + 1}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<PeopleIcon />\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'tooltip.settings',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Show settings'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'tooltip.settings',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show settings'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\tonClick={() => setSettingsOpen(!room.settingsOpen)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<SettingsIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title={lockTooltip}>\n\t\t\t\t\t\t\t<span className={classes.disabledButton}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.lockRoom',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Lock room'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tdisabled={!canLock}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (room.locked)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient.unlockRoom();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\troomClient.lockRoom();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ room.locked ?\n\t\t\t\t\t\t\t\t\t\t<LockIcon />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<LockOpenIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{ lobbyPeers.length > 0 &&\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span className={classes.disabledButton}>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\t\tdisabled={!canPromote}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setLockDialogOpen(!room.lockDialogOpen)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<PulsingBadge\n\t\t\t\t\t\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\t\t\t\t\t\tbadgeContent={lobbyPeers.length}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<SecurityIcon />\n\t\t\t\t\t\t\t\t\t\t</PulsingBadge>\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ loginEnabled &&\n\t\t\t\t\t\t\t<Tooltip title={loginTooltip}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.login',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Log in'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tloggedIn ? roomClient.logout() : roomClient.login();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ myPicture ?\n\t\t\t\t\t\t\t\t\t\t<Avatar src={myPicture} />\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<AccountCircle className={loggedIn ? classes.green : null} />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.sectionMobile}>\n\t\t\t\t\t\t{ lobbyPeers.length > 0 &&\n\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\ttitle={intl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className={classes.disabledButton}>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\t\tid             : 'tooltip.lobby',\n\t\t\t\t\t\t\t\t\t\tdefaultMessage : 'Show lobby'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t\t\tdisabled={!canPromote}\n\t\t\t\t\t\t\t\t\tonClick={() => setLockDialogOpen(!room.lockDialogOpen)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<PulsingBadge\n\t\t\t\t\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\t\t\t\t\tbadgeContent={lobbyPeers.length}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<SecurityIcon />\n\t\t\t\t\t\t\t\t\t</PulsingBadge>\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\taria-haspopup\n\t\t\t\t\t\t\tonClick={handleMobileMenuOpen}\n\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MoreIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.divider} />\n\t\t\t\t\t<Button\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'label.leave',\n\t\t\t\t\t\t\tdefaultMessage : 'Leave'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\tonClick={() => roomClient.close()}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='label.leave'\n\t\t\t\t\t\t\tdefaultMessage='Leave'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Button>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t\t<Popover\n\t\t\t\tanchorEl={anchorEl}\n\t\t\t\tanchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\n\t\t\t\ttransformOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\topen={isMenuOpen}\n\t\t\t\tonClose={handleMenuClose}\n\t\t\t\tonExited={handleExited}\n\t\t\t\tgetContentAnchorEl={null}\n\t\t\t>\n\t\t\t\t{ currentMenu === 'moreActions' &&\n\t\t\t\t\t<Paper>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tdisabled={!canProduceExtraVideo}\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\t\tsetExtraVideoOpen(!room.extraVideoOpen);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<VideoCallIcon\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'label.addVideo',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Add video'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='label.addVideo'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Add video'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\t\tsetHelpOpen(!room.helpOpen);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<HelpIcon\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.help',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'Help'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.help'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Help'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\t\tsetAboutOpen(!room.aboutOpen);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<InfoIcon\n\t\t\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\t\t\tid             : 'room.about',\n\t\t\t\t\t\t\t\t\tdefaultMessage : 'About'\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='room.about'\n\t\t\t\t\t\t\t\t\tdefaultMessage='About'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t</Paper>\n\t\t\t\t}\n\t\t\t</Popover>\n\t\t\t<Menu\n\t\t\t\tanchorEl={mobileMoreAnchorEl}\n\t\t\t\tanchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\n\t\t\t\ttransformOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n\t\t\t\topen={isMobileMenuOpen}\n\t\t\t\tonClose={handleMenuClose}\n\t\t\t\tgetContentAnchorEl={null}\n\t\t\t>\n\t\t\t\t{ loginEnabled &&\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\taria-label={loginTooltip}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\tloggedIn ? roomClient.logout() : roomClient.login();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ myPicture ?\n\t\t\t\t\t\t\t<Avatar src={myPicture} />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<AccountCircle className={loggedIn ? classes.green : null} />\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ loggedIn ?\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='tooltip.logout'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Log out'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\t\tid='tooltip.login'\n\t\t\t\t\t\t\t\t\tdefaultMessage='Log in'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t}\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={lockTooltip}\n\t\t\t\t\tdisabled={!canLock}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\n\t\t\t\t\t\tif (room.locked)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\troomClient.unlockRoom();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\troomClient.lockRoom();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ room.locked ?\n\t\t\t\t\t\t<LockIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<LockOpenIcon />\n\t\t\t\t\t}\n\t\t\t\t\t{ room.locked ?\n\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='tooltip.unLockRoom'\n\t\t\t\t\t\t\t\tdefaultMessage='Unlock room'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='tooltip.lockRoom'\n\t\t\t\t\t\t\t\tdefaultMessage='Lock room'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t}\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.settings',\n\t\t\t\t\t\tdefaultMessage : 'Show settings'\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\tsetSettingsOpen(!room.settingsOpen);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<SettingsIcon />\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='tooltip.settings'\n\t\t\t\t\t\t\tdefaultMessage='Show settings'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'tooltip.participants',\n\t\t\t\t\t\tdefaultMessage : 'Show participants'\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\topenUsersTab();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Badge\n\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\tbadgeContent={peersLength + 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t<PeopleIcon />\n\t\t\t\t\t</Badge>\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='tooltip.participants'\n\t\t\t\t\t\t\tdefaultMessage='Show participants'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t\t{ fullscreenEnabled &&\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'tooltip.enterFullscreen',\n\t\t\t\t\t\t\tdefaultMessage : 'Enter fullscreen'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thandleMenuClose();\n\t\t\t\t\t\t\tonFullscreen();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ fullscreen ?\n\t\t\t\t\t\t\t<FullScreenExitIcon />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<FullScreenIcon />\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='tooltip.enterFullscreen'\n\t\t\t\t\t\t\t\tdefaultMessage='Enter fullscreen'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t}\n\t\t\t\t<MenuItem\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'label.moreActions',\n\t\t\t\t\t\tdefaultMessage : 'Add video'\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={(event) => handleMenuOpen(event, 'moreActions')}\n\t\t\t\t>\n\t\t\t\t\t<ExtensionIcon />\n\t\t\t\t\t<p className={classes.moreAction}>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='label.moreActions'\n\t\t\t\t\t\t\tdefaultMessage='More actions'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t</MenuItem>\n\t\t\t</Menu>\n\t\t</React.Fragment>\n\t);\n};\n\nTopBar.propTypes =\n{\n\troomClient           : PropTypes.object.isRequired,\n\troom                 : appPropTypes.Room.isRequired,\n\tisMobile             : PropTypes.bool.isRequired,\n\tpeersLength          : PropTypes.number,\n\tlobbyPeers           : PropTypes.array,\n\tpermanentTopBar      : PropTypes.bool.isRequired,\n\tdrawerOverlayed      : PropTypes.bool.isRequired,\n\ttoolAreaOpen         : PropTypes.bool.isRequired,\n\tmyPicture            : PropTypes.string,\n\tloggedIn             : PropTypes.bool.isRequired,\n\tloginEnabled         : PropTypes.bool.isRequired,\n\tfullscreenEnabled    : PropTypes.bool,\n\tfullscreen           : PropTypes.bool,\n\tonFullscreen         : PropTypes.func.isRequired,\n\tsetToolbarsVisible   : PropTypes.func.isRequired,\n\tsetSettingsOpen      : PropTypes.func.isRequired,\n\tsetExtraVideoOpen    : PropTypes.func.isRequired,\n\tsetHelpOpen          : PropTypes.func.isRequired,\n\tsetAboutOpen         : PropTypes.func.isRequired,\n\tsetLockDialogOpen    : PropTypes.func.isRequired,\n\ttoggleToolArea       : PropTypes.func.isRequired,\n\topenUsersTab         : PropTypes.func.isRequired,\n\tunread               : PropTypes.number.isRequired,\n\tcanProduceExtraVideo : PropTypes.bool.isRequired,\n\tcanLock              : PropTypes.bool.isRequired,\n\tcanPromote           : PropTypes.bool.isRequired,\n\tclasses              : PropTypes.object.isRequired,\n\ttheme                : PropTypes.object.isRequired\n};\n\nconst makeMapStateToProps = () =>\n{\n\tconst hasExtraVideoPermission =\n\t\tmakePermissionSelector(permissions.EXTRA_VIDEO);\n\n\tconst hasLockPermission =\n\t\tmakePermissionSelector(permissions.CHANGE_ROOM_LOCK);\n\n\tconst hasPromotionPermission =\n\t\tmakePermissionSelector(permissions.PROMOTE_PEER);\n\n\tconst mapStateToProps = (state) =>\n\t\t({\n\t\t\troom            : state.room,\n\t\t\tisMobile        : state.me.browser.platform === 'mobile',\n\t\t\tpeersLength     : peersLengthSelector(state),\n\t\t\tlobbyPeers      : lobbyPeersKeySelector(state),\n\t\t\tpermanentTopBar : state.settings.permanentTopBar,\n\t\t\tdrawerOverlayed : state.settings.drawerOverlayed,\n\t\t\ttoolAreaOpen    : state.toolarea.toolAreaOpen,\n\t\t\tloggedIn        : state.me.loggedIn,\n\t\t\tloginEnabled    : state.me.loginEnabled,\n\t\t\tmyPicture       : state.me.picture,\n\t\t\tunread          : state.toolarea.unreadMessages +\n\t\t\t\tstate.toolarea.unreadFiles + raisedHandsSelector(state),\n\t\t\tcanProduceExtraVideo : hasExtraVideoPermission(state),\n\t\t\tcanLock              : hasLockPermission(state),\n\t\t\tcanPromote           : hasPromotionPermission(state)\n\t\t});\n\n\treturn mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tsetToolbarsVisible : (visible) =>\n\t\t{\n\t\t\tdispatch(roomActions.setToolbarsVisible(visible));\n\t\t},\n\t\tsetSettingsOpen : (settingsOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setSettingsOpen(settingsOpen));\n\t\t},\n\t\tsetExtraVideoOpen : (extraVideoOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setExtraVideoOpen(extraVideoOpen));\n\t\t},\n\t\tsetHelpOpen : (helpOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setHelpOpen(helpOpen));\n\t\t},\n\t\tsetAboutOpen : (aboutOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setAboutOpen(aboutOpen));\n\t\t},\n\t\tsetLockDialogOpen : (lockDialogOpen) =>\n\t\t{\n\t\t\tdispatch(roomActions.setLockDialogOpen(lockDialogOpen));\n\t\t},\n\t\ttoggleToolArea : () =>\n\t\t{\n\t\t\tdispatch(toolareaActions.toggleToolArea());\n\t\t},\n\t\topenUsersTab : () =>\n\t\t{\n\t\t\tdispatch(toolareaActions.openToolArea());\n\t\t\tdispatch(toolareaActions.setToolTab('users'));\n\t\t}\n\t});\n\nexport default withRoomContext(connect(\n\tmakeMapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.peers === next.peers &&\n\t\t\t\tprev.lobbyPeers === next.lobbyPeers &&\n\t\t\t\tprev.settings.permanentTopBar === next.settings.permanentTopBar &&\n\t\t\t\tprev.settings.drawerOverlayed === next.settings.drawerOverlayed &&\n\t\t\t\tprev.me.loggedIn === next.me.loggedIn &&\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.me.loginEnabled === next.me.loginEnabled &&\n\t\t\t\tprev.me.picture === next.me.picture &&\n\t\t\t\tprev.me.roles === next.me.roles &&\n\t\t\t\tprev.toolarea.unreadMessages === next.toolarea.unreadMessages &&\n\t\t\t\tprev.toolarea.unreadFiles === next.toolarea.unreadFiles &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(TopBar)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tsetting :\n\t\t{\n\t\t\tpadding : theme.spacing(2)\n\t\t},\n\t\tformControl :\n\t\t{\n\t\t\tdisplay : 'flex'\n\t\t}\n\t});\n\nconst ExtraVideo = ({\n\troomClient,\n\textraVideoOpen,\n\twebcamDevices,\n\thandleCloseExtraVideo,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\tconst [ videoDevice, setVideoDevice ] = React.useState('');\n\n\tconst handleChange = (event) =>\n\t{\n\t\tsetVideoDevice(event.target.value);\n\t};\n\n\tlet videoDevices;\n\n\tif (webcamDevices)\n\t\tvideoDevices = Object.values(webcamDevices);\n\telse\n\t\tvideoDevices = [];\n\n\treturn (\n\t\t<Dialog\n\t\t\topen={extraVideoOpen}\n\t\t\tonClose={() => handleCloseExtraVideo(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.extraVideo'\n\t\t\t\t\tdefaultMessage='Extra video'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<form className={classes.setting} autoComplete='off'>\n\t\t\t\t<FormControl className={classes.formControl}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={videoDevice}\n\t\t\t\t\t\tdisplayEmpty\n\t\t\t\t\t\tname={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'settings.camera',\n\t\t\t\t\t\t\tdefaultMessage : 'Camera'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tautoWidth\n\t\t\t\t\t\tclassName={classes.selectEmpty}\n\t\t\t\t\t\tdisabled={videoDevices.length === 0}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ videoDevices.map((webcam, index) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem key={index} value={webcam.deviceId}>{webcam.label}</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Select>\n\t\t\t\t\t<FormHelperText>\n\t\t\t\t\t\t{ videoDevices.length > 0 ?\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.selectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\t\tid             : 'settings.cantSelectCamera',\n\t\t\t\t\t\t\t\tdefaultMessage : 'Unable to select video device'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</FormHelperText>\n\t\t\t\t</FormControl>\n\t\t\t</form>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={() => roomClient.addExtraVideo(videoDevice)} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.addVideo'\n\t\t\t\t\t\tdefaultMessage='Add video'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nExtraVideo.propTypes =\n{\n\troomClient            : PropTypes.object.isRequired,\n\textraVideoOpen        : PropTypes.bool.isRequired,\n\twebcamDevices         : PropTypes.object,\n\thandleCloseExtraVideo : PropTypes.func.isRequired,\n\tclasses               : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\twebcamDevices  : state.me.webcamDevices,\n\t\textraVideoOpen : state.room.extraVideoOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseExtraVideo : roomActions.setExtraVideoOpen\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.me.webcamDevices === next.me.webcamDevices &&\n\t\t\t\tprev.room.extraVideoOpen === next.room.extraVideoOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(ExtraVideo)));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { meProducersSelector } from '../Selectors';\nimport { withStyles } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport classnames from 'classnames';\nimport * as appPropTypes from '../appPropTypes';\nimport { withRoomContext } from '../../RoomContext';\nimport { useIntl } from 'react-intl';\nimport Fab from '@material-ui/core/Fab';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport MicIcon from '@material-ui/icons/Mic';\nimport MicOffIcon from '@material-ui/icons/MicOff';\nimport VideoIcon from '@material-ui/icons/Videocam';\nimport VideoOffIcon from '@material-ui/icons/VideocamOff';\nimport ScreenIcon from '@material-ui/icons/ScreenShare';\nimport ScreenOffIcon from '@material-ui/icons/StopScreenShare';\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tposition                     : 'fixed',\n\t\t\tdisplay                      : 'flex',\n\t\t\tzIndex                       : 30,\n\t\t\t[theme.breakpoints.up('md')] :\n\t\t\t{\n\t\t\t\ttop            : '50%',\n\t\t\t\ttransform      : 'translate(0%, -50%)',\n\t\t\t\tflexDirection  : 'column',\n\t\t\t\tjustifyContent : 'center',\n\t\t\t\talignItems     : 'center',\n\t\t\t\tleft           : theme.spacing(1)\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\tflexDirection : 'row',\n\t\t\t\tbottom        : theme.spacing(1),\n\t\t\t\tleft          : '50%',\n\t\t\t\ttransform     : 'translate(-50%, -0%)'\n\t\t\t}\n\t\t},\n\t\tfab :\n\t\t{\n\t\t\tmargin : theme.spacing(1)\n\t\t},\n\t\tshow :\n\t\t{\n\t\t\topacity    : 1,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\thide :\n\t\t{\n\t\t\topacity    : 0,\n\t\t\ttransition : 'opacity .5s'\n\t\t},\n\t\tmove :\n\t\t{\n\t\t\tleft                           : '30vw',\n\t\t\ttop                            : '50%',\n\t\t\ttransform                      : 'translate(0%, -50%)',\n\t\t\tflexDirection                  : 'column',\n\t\t\tjustifyContent                 : 'center',\n\t\t\talignItems                     : 'center',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\tleft : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\tleft : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\tleft : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\tleft : '90vw'\n\t\t\t}\n\t\t}\n\t});\n\nconst ButtonControlBar = (props) =>\n{\n\tconst intl = useIntl();\n\n\tconst {\n\t\troomClient,\n\t\ttoolbarsVisible,\n\t\thiddenControls,\n\t\tdrawerOverlayed,\n\t\ttoolAreaOpen,\n\t\tme,\n\t\tmicProducer,\n\t\twebcamProducer,\n\t\tscreenProducer,\n\t\tclasses,\n\t\ttheme\n\t} = props;\n\n\tlet micState;\n\n\tlet micTip;\n\n\tif (!me.canSendMic)\n\t{\n\t\tmicState = 'unsupported';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.audioUnsupported',\n\t\t\tdefaultMessage : 'Audio unsupported'\n\t\t});\n\t}\n\telse if (!micProducer)\n\t{\n\t\tmicState = 'off';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.activateAudio',\n\t\t\tdefaultMessage : 'Activate audio'\n\t\t});\n\t}\n\telse if (!micProducer.locallyPaused && !micProducer.remotelyPaused)\n\t{\n\t\tmicState = 'on';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.muteAudio',\n\t\t\tdefaultMessage : 'Mute audio'\n\t\t});\n\t}\n\telse\n\t{\n\t\tmicState = 'muted';\n\t\tmicTip = intl.formatMessage({\n\t\t\tid             : 'device.unMuteAudio',\n\t\t\tdefaultMessage : 'Unmute audio'\n\t\t});\n\t}\n\n\tlet webcamState;\n\n\tlet webcamTip;\n\n\tif (!me.canSendWebcam)\n\t{\n\t\twebcamState = 'unsupported';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.videoUnsupported',\n\t\t\tdefaultMessage : 'Video unsupported'\n\t\t});\n\t}\n\telse if (webcamProducer)\n\t{\n\t\twebcamState = 'on';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.stopVideo',\n\t\t\tdefaultMessage : 'Stop video'\n\t\t});\n\t}\n\telse\n\t{\n\t\twebcamState = 'off';\n\t\twebcamTip = intl.formatMessage({\n\t\t\tid             : 'device.startVideo',\n\t\t\tdefaultMessage : 'Start video'\n\t\t});\n\t}\n\n\tlet screenState;\n\n\tlet screenTip;\n\n\tif (!me.canShareScreen)\n\t{\n\t\tscreenState = 'unsupported';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.screenSharingUnsupported',\n\t\t\tdefaultMessage : 'Screen sharing not supported'\n\t\t});\n\t}\n\telse if (screenProducer)\n\t{\n\t\tscreenState = 'on';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.stopScreenSharing',\n\t\t\tdefaultMessage : 'Stop screen sharing'\n\t\t});\n\t}\n\telse\n\t{\n\t\tscreenState = 'off';\n\t\tscreenTip = intl.formatMessage({\n\t\t\tid             : 'device.startScreenSharing',\n\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t});\n\t}\n\n\tconst smallScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n\treturn (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tclassnames(\n\t\t\t\t\tclasses.root,\n\t\t\t\t\thiddenControls ?\n\t\t\t\t\t\t(toolbarsVisible ? classes.show : classes.hide) :\n\t\t\t\t\t\tclasses.show,\n\t\t\t\t\ttoolAreaOpen &&\n\t\t\t\t\t\t(me.browser.platform !== 'mobile' && !drawerOverlayed) ?\n\t\t\t\t\t\tclasses.move : null\n\t\t\t\t)\n\t\t\t}\n\t\t>\n\t\t\t<Tooltip title={micTip} placement={smallScreen ? 'top' : 'right'}>\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'device.muteAudio',\n\t\t\t\t\t\tdefaultMessage : 'Mute audio'\n\t\t\t\t\t})}\n\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\tdisabled={!me.canSendMic || me.audioInProgress}\n\t\t\t\t\tcolor={micState === 'on' ? 'default' : 'secondary'}\n\t\t\t\t\tsize={smallScreen ? 'large' : 'medium'}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (micState === 'off')\n\t\t\t\t\t\t\troomClient.updateMic({ start: true });\n\t\t\t\t\t\telse if (micState === 'on')\n\t\t\t\t\t\t\troomClient.muteMic();\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\troomClient.unmuteMic();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ micState === 'on' ?\n\t\t\t\t\t\t<MicIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<MicOffIcon />\n\t\t\t\t\t}\n\t\t\t\t</Fab>\n\t\t\t</Tooltip>\n\t\t\t<Tooltip title={webcamTip} placement={smallScreen ? 'top' : 'right'}>\n\t\t\t\t<Fab\n\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\tid             : 'device.startVideo',\n\t\t\t\t\t\tdefaultMessage : 'Start video'\n\t\t\t\t\t})}\n\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\tdisabled={!me.canSendWebcam || me.webcamInProgress}\n\t\t\t\t\tcolor={webcamState === 'on' ? 'default' : 'secondary'}\n\t\t\t\t\tsize={smallScreen ? 'large' : 'medium'}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\twebcamState === 'on' ?\n\t\t\t\t\t\t\troomClient.disableWebcam() :\n\t\t\t\t\t\t\troomClient.updateWebcam({ start: true });\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{ webcamState === 'on' ?\n\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<VideoOffIcon />\n\t\t\t\t\t}\n\t\t\t\t</Fab>\n\t\t\t</Tooltip>\n\t\t\t{ me.browser.platform !== 'mobile' &&\n\t\t\t\t<Tooltip title={screenTip} placement={smallScreen ? 'top' : 'right'}>\n\t\t\t\t\t<Fab\n\t\t\t\t\t\taria-label={intl.formatMessage({\n\t\t\t\t\t\t\tid             : 'device.startScreenSharing',\n\t\t\t\t\t\t\tdefaultMessage : 'Start screen sharing'\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tclassName={classes.fab}\n\t\t\t\t\t\tdisabled={!me.canShareScreen || me.screenShareInProgress}\n\t\t\t\t\t\tcolor={screenState === 'on' ? 'primary' : 'default'}\n\t\t\t\t\t\tsize={smallScreen ? 'large' : 'medium'}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (screenState === 'off')\n\t\t\t\t\t\t\t\troomClient.updateScreenSharing({ start: true });\n\t\t\t\t\t\t\telse if (screenState === 'on')\n\t\t\t\t\t\t\t\troomClient.disableScreenSharing();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ screenState === 'on' || screenState === 'unsupported' ?\n\t\t\t\t\t\t\t<ScreenOffIcon/>\n\t\t\t\t\t\t\t:null\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ screenState === 'off' ?\n\t\t\t\t\t\t\t<ScreenIcon/>\n\t\t\t\t\t\t\t:null\n\t\t\t\t\t\t}\n\t\t\t\t\t</Fab>\n\t\t\t\t</Tooltip>\n\t\t\t}\n\t\t</div>\n\t);\n};\n\nButtonControlBar.propTypes =\n{\n\troomClient      : PropTypes.any.isRequired,\n\ttoolbarsVisible : PropTypes.bool.isRequired,\n\thiddenControls  : PropTypes.bool.isRequired,\n\tdrawerOverlayed : PropTypes.bool.isRequired,\n\ttoolAreaOpen    : PropTypes.bool.isRequired,\n\tme              : appPropTypes.Me.isRequired,\n\tmicProducer     : appPropTypes.Producer,\n\twebcamProducer  : appPropTypes.Producer,\n\tscreenProducer  : appPropTypes.Producer,\n\tclasses         : PropTypes.object.isRequired,\n\ttheme           : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\ttoolbarsVisible : state.room.toolbarsVisible,\n\t\thiddenControls  : state.settings.hiddenControls,\n\t\tdrawerOverlayed : state.settings.drawerOverlayed,\n\t\ttoolAreaOpen    : state.toolarea.toolAreaOpen,\n\t\t...meProducersSelector(state),\n\t\tme              : state.me\n\t});\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tnull,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.toolbarsVisible === next.room.toolbarsVisible &&\n\t\t\t\tprev.settings.hiddenControls === next.settings.hiddenControls &&\n\t\t\t\tprev.settings.drawerOverlayed === next.settings.drawerOverlayed &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen &&\n\t\t\t\tprev.producers === next.producers &&\n\t\t\t\tprev.me === next.me\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(ButtonControlBar)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { useIntl, FormattedMessage } from 'react-intl';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nconst shortcuts=[\n\t{ key: 'h', label: 'room.help', defaultMessage: 'Help' },\n\t{ key: 'm', label: 'device.muteAudio', defaultMessage: 'Mute Audio' },\n\t{ key: 'v', label: 'device.stopVideo', defaultMessage: 'Mute Video' },\n\t{ key: '1', label: 'label.democratic', defaultMessage: 'Democratic View' },\n\t{ key: '2', label: 'label.filmstrip', defaultMessage: 'Filmstrip View' },\n\t{ key: 'space', label: 'me.mutedPTT', defaultMessage: 'Push SPACE to talk' },\n\t{ key: 'a', label: 'label.advanced', defaultMessage: 'Show advanced information' },\n\t{ key: `${String.fromCharCode(8592)} ${String.fromCharCode(8594)}`, label: 'room.browsePeersSpotlight', defaultMessage: 'Browse participants into Spotlight' }\n];\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t},\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'column'\n\t\t},\n\t\tpaper : {\n\t\t\tpadding      : theme.spacing(1),\n\t\t\ttextAlign    : 'center',\n\t\t\tcolor        : theme.palette.text.secondary,\n\t\t\twhiteSpace   : 'nowrap',\n\t\t\tmarginRight  : theme.spacing(3),\n\t\t\tmarginBottom : theme.spacing(1),\n\t\t\tminWidth     : theme.spacing(8)\n\t\t},\n\t\tshortcuts : {\n\t\t\tdisplay       : 'flex',\n\t\t\tflexDirection : 'row',\n\t\t\talignItems    : 'center',\n\t\t\tpaddingLeft   : theme.spacing(2),\n\t\t\tpaddingRight  : theme.spacing(2)\n\t\t},\n\t\ttabsHeader :\n\t\t{\n\t\t\tflexGrow     : 1,\n\t\t\tmarginBottom : theme.spacing(1)\n\t\t}\n\t});\n\nconst Help = ({\n\thelpOpen,\n\thandleCloseHelp,\n\tclasses\n}) =>\n{\n\tconst intl = useIntl();\n\n\treturn (\n\t\t<Dialog\n\t\t\topen={helpOpen}\n\t\t\tonClose={() => { handleCloseHelp(false); }}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.help'\n\t\t\t\t\tdefaultMessage='Help'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<Tabs\n\t\t\t\tvalue={0}\n\t\t\t\tclassName={classes.tabsHeader}\n\t\t\t\tindicatorColor='primary'\n\t\t\t\ttextColor='primary'\n\t\t\t\tvariant='fullWidth'\n\t\t\t>\n\t\t\t\t<Tab\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tintl.formatMessage({\n\t\t\t\t\t\t\tid             : 'room.shortcutKeys',\n\t\t\t\t\t\t\tdefaultMessage : 'Shortcut keys'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</Tabs>\n\t\t\t{shortcuts.map((value, index) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\t<div key={index} className={classes.shortcuts}>\n\t\t\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t\t\t{value.key}\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid={value.label}\n\t\t\t\t\t\t\tdefaultMessage={value.defaultMessage}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={() => { handleCloseHelp(false); }} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nHelp.propTypes =\n{\n\troomClient      : PropTypes.object.isRequired,\n\thelpOpen        : PropTypes.bool.isRequired,\n\thandleCloseHelp : PropTypes.func.isRequired,\n\tclasses         : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\thelpOpen : state.room.helpOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseHelp : roomActions.setHelpOpen\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.helpOpen === next.room.helpOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(Help)));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRoomContext } from '../../RoomContext';\nimport * as roomActions from '../../actions/roomActions';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport Link from '@material-ui/core/Link';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\n\nconst styles = (theme) =>\n\t({\n\t\tdialogPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tlogo :\n\t\t{\n\t\t\tmarginRight : 'auto'\n\t\t},\n\t\tlink :\n\t\t{\n\t\t\tdisplay      : 'block',\n\t\t\ttextAlign    : 'center',\n\t\t\tmarginBottom : theme.spacing(1)\n\t\t},\n\t\tdivider :\n\t\t{\n\t\t\tmarginBottom : theme.spacing(3)\n\t\t}\n\t});\nconst eduMeetUrl='https://edumeet.org';\nconst About = ({\n\taboutOpen,\n\thandleCloseAbout,\n\tclasses\n}) =>\n{\n\treturn (\n\t\t<Dialog\n\t\t\topen={aboutOpen}\n\t\t\tonClose={() => handleCloseAbout(false)}\n\t\t\tclasses={{\n\t\t\t\tpaper : classes.dialogPaper\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id='form-dialog-title'>\n\t\t\t\t<FormattedMessage\n\t\t\t\t\tid='room.about'\n\t\t\t\t\tdefaultMessage='About'\n\t\t\t\t/>\n\t\t\t</DialogTitle>\n\t\t\t<DialogContent dividers>\n\t\t\t\t<DialogContentText paragraph>\n\t\t\t\t\tContributions to this work were made on behalf of the GÉANT\n\t\t\t\t\tproject, a project that has received funding from the\n\t\t\t\t\tEuropean Union’s Horizon 2020 research and innovation\n\t\t\t\t\tprogramme under Grant Agreement No. 731122 (GN4-2).\n\t\t\t\t\tOn behalf of GÉANT project, GÉANT Association is the sole\n\t\t\t\t\towner of the copyright in all material which was developed\n\t\t\t\t\tby a member of the GÉANT project.\n\t\t\t\t</DialogContentText>\n\t\t\t\t<DialogContentText paragraph>\n\t\t\t\t\tGÉANT Vereniging (Association) is registered with the\n\t\t\t\t\tChamber of Commerce in Amsterdam with registration number\n\t\t\t\t\t40535155 and operates in the UK as a branch of GÉANT\n\t\t\t\t\tVereniging. Registered office: Hoekenrode 3, 1102BR\n\t\t\t\t\tAmsterdam, The Netherlands. UK branch address: City House,\n\t\t\t\t\t126-130 Hills Road, Cambridge CB2 1PQ, UK.\n\t\t\t\t</DialogContentText>\n\t\t\t\t<DialogContentText align='center' paragraph>\n\t\t\t\t\t<Link href={eduMeetUrl} target='_blank' rel='noreferrer' color='secondary' variant='h6'>\n\t\t\t\t\t\t{eduMeetUrl}\n\t\t\t\t\t</Link>\n\t\t\t\t</DialogContentText>\n\t\t\t\t<DialogContentText align='center' variant='body2'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.version'\n\t\t\t\t\t\tdefaultMessage='Version'\n\t\t\t\t\t/>\n\t\t\t\t\t:{` ${process.env.REACT_APP_VERSION}`}\n\t\t\t\t</DialogContentText>\n\t\t\t\t<Divider variant='middle' light className={classes.divider}/>\n\t\t\t\t{\n\t\t\t\t\twindow.config.supportUrl\n\t\t\t\t\t&&\n\t\t\t\t\t<DialogContentText align='center' paragraph>\n\t\t\t\t\t\t<span>Visit for more info: </span>\n\t\t\t\t\t\t<Link href={window.config.supportUrl} target='_blank' rel='noreferrer' color='secondary'>\n\t\t\t\t\t\t\t{ window.config.supportUrl }\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</DialogContentText>\n\t\t\t\t}\n\t\t\t\t<Link href={window.config.privacyUrl ? window.config.privacyUrl : 'privacy/privacy.html'} target='_blank' rel='noreferrer' color='secondary' className={classes.link}>\n\t\t\t\t\tData protection and Privacy Policy\n\t\t\t\t</Link>\n\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t{ window.config.logo && <img alt='Logo' className={classes.logo} src={window.config.logo} /> }\n\t\t\t\t<Button onClick={() => { handleCloseAbout(false); }} color='primary'>\n\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\tid='label.close'\n\t\t\t\t\t\tdefaultMessage='Close'\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n};\n\nAbout.propTypes =\n{\n\troomClient       : PropTypes.object.isRequired,\n\taboutOpen        : PropTypes.bool.isRequired,\n\thandleCloseAbout : PropTypes.func.isRequired,\n\tclasses          : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\taboutOpen : state.room.aboutOpen\n\t});\n\nconst mapDispatchToProps = {\n\thandleCloseAbout : roomActions.setAboutOpen\n};\n\nexport default withRoomContext(connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room.aboutOpen === next.room.aboutOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles)(About)));","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport * as appPropTypes from './appPropTypes';\nimport { withStyles } from '@material-ui/core/styles';\nimport isElectron from 'is-electron';\nimport * as roomActions from '../actions/roomActions';\nimport * as toolareaActions from '../actions/toolareaActions';\nimport { idle } from '../utils';\nimport FullScreen from './FullScreen';\nimport { FormattedMessage } from 'react-intl';\nimport CookieConsent from 'react-cookie-consent';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport Drawer from '@material-ui/core/Drawer';\nimport Hidden from '@material-ui/core/Hidden';\nimport Notifications from './Notifications/Notifications';\nimport MeetingDrawer from './MeetingDrawer/MeetingDrawer';\nimport Democratic from './MeetingViews/Democratic';\nimport Filmstrip from './MeetingViews/Filmstrip';\nimport AudioPeers from './PeerAudio/AudioPeers';\nimport FullScreenView from './VideoContainers/FullScreenView';\nimport VideoWindow from './VideoWindow/VideoWindow';\nimport LockDialog from './AccessControl/LockDialog/LockDialog';\nimport Settings from './Settings/Settings';\nimport TopBar from './Controls/TopBar';\nimport WakeLock from 'react-wakelock-react16';\nimport ExtraVideo from './Controls/ExtraVideo';\nimport ButtonControlBar from './Controls/ButtonControlBar';\nimport Help from './Controls/Help';\nimport About from './Controls/About';\n\nconst TIMEOUT = window.config.hideTimeout || 5000;\n\nconst styles = (theme) =>\n\t({\n\t\troot :\n\t\t{\n\t\t\tdisplay              : 'flex',\n\t\t\twidth                : '100%',\n\t\t\theight               : '100%',\n\t\t\tbackgroundColor      : 'var(--background-color)',\n\t\t\tbackgroundImage      : `url(${window.config ? window.config.background : null})`,\n\t\t\tbackgroundAttachment : 'fixed',\n\t\t\tbackgroundPosition   : 'center',\n\t\t\tbackgroundSize       : 'cover',\n\t\t\tbackgroundRepeat     : 'no-repeat'\n\t\t},\n\t\tdrawer :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\tflexShrink                     : 0,\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t},\n\t\tdrawerPaper :\n\t\t{\n\t\t\twidth                          : '30vw',\n\t\t\t[theme.breakpoints.down('lg')] :\n\t\t\t{\n\t\t\t\twidth : '40vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('md')] :\n\t\t\t{\n\t\t\t\twidth : '50vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('sm')] :\n\t\t\t{\n\t\t\t\twidth : '70vw'\n\t\t\t},\n\t\t\t[theme.breakpoints.down('xs')] :\n\t\t\t{\n\t\t\t\twidth : '90vw'\n\t\t\t}\n\t\t}\n\t});\n\nclass Room extends React.PureComponent\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.fullscreen = new FullScreen(document);\n\n\t\tthis.state =\n\t\t{\n\t\t\tfullscreen : false\n\t\t};\n\t}\n\n\twaitForHide = idle(() =>\n\t{\n\t\tthis.props.setToolbarsVisible(false);\n\t}, TIMEOUT);\n\n\thandleMovement = () =>\n\t{\n\t\t// If the toolbars were hidden, show them again when\n\t\t// the user moves their cursor.\n\t\tif (!this.props.room.toolbarsVisible)\n\t\t{\n\t\t\tthis.props.setToolbarsVisible(true);\n\t\t}\n\n\t\tthis.waitForHide();\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tif (this.fullscreen.fullscreenEnabled)\n\t\t{\n\t\t\tthis.fullscreen.addEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t}\n\n\t\twindow.addEventListener('mousemove', this.handleMovement);\n\t\twindow.addEventListener('touchstart', this.handleMovement);\n\t}\n\n\tcomponentWillUnmount()\n\t{\n\t\tif (this.fullscreen.fullscreenEnabled)\n\t\t{\n\t\t\tthis.fullscreen.removeEventListener('fullscreenchange', this.handleFullscreenChange);\n\t\t}\n\n\t\twindow.removeEventListener('mousemove', this.handleMovement);\n\t\twindow.removeEventListener('touchstart', this.handleMovement);\n\t}\n\n\thandleToggleFullscreen = () =>\n\t{\n\t\tif (this.fullscreen.fullscreenElement)\n\t\t{\n\t\t\tthis.fullscreen.exitFullscreen();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fullscreen.requestFullscreen(document.documentElement);\n\t\t}\n\t};\n\n\thandleFullscreenChange = () =>\n\t{\n\t\tthis.setState({\n\t\t\tfullscreen : this.fullscreen.fullscreenElement !== null\n\t\t});\n\t};\n\n\trender()\n\t{\n\t\tconst {\n\t\t\troom,\n\t\t\tbrowser,\n\t\t\tadvancedMode,\n\t\t\tshowNotifications,\n\t\t\tbuttonControlBar,\n\t\t\tdrawerOverlayed,\n\t\t\ttoolAreaOpen,\n\t\t\ttoggleToolArea,\n\t\t\tclasses,\n\t\t\ttheme\n\t\t} = this.props;\n\n\t\tconst View =\n\t\t{\n\t\t\tfilmstrip  : Filmstrip,\n\t\t\tdemocratic : Democratic\n\t\t}[room.mode];\n\n\t\tconst container = window !== undefined ? window.document.body : undefined;\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t{ !isElectron() &&\n\t\t\t\t\t<CookieConsent\n\t\t\t\t\t\tbuttonText={\n\t\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\t\tid='room.consentUnderstand'\n\t\t\t\t\t\t\t\tdefaultMessage='I understand'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FormattedMessage\n\t\t\t\t\t\t\tid='room.cookieConsent'\n\t\t\t\t\t\t\tdefaultMessage='This website uses cookies to enhance the user experience'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CookieConsent>\n\t\t\t\t}\n\n\t\t\t\t<FullScreenView advancedMode={advancedMode} />\n\n\t\t\t\t<VideoWindow advancedMode={advancedMode} />\n\n\t\t\t\t<AudioPeers />\n\n\t\t\t\t{ showNotifications &&\n\t\t\t\t\t<Notifications />\n\t\t\t\t}\n\n\t\t\t\t<CssBaseline />\n\n\t\t\t\t<TopBar\n\t\t\t\t\tfullscreenEnabled={this.fullscreen.fullscreenEnabled}\n\t\t\t\t\tfullscreen={this.state.fullscreen}\n\t\t\t\t\tonFullscreen={this.handleToggleFullscreen}\n\t\t\t\t/>\n\n\t\t\t\t{ (browser.platform === 'mobile' || drawerOverlayed) ?\n\t\t\t\t\t<nav>\n\t\t\t\t\t\t<Hidden implementation='css'>\n\t\t\t\t\t\t\t<SwipeableDrawer\n\t\t\t\t\t\t\t\tcontainer={container}\n\t\t\t\t\t\t\t\tvariant='temporary'\n\t\t\t\t\t\t\t\tanchor={theme.direction === 'rtl' ? 'right' : 'left'}\n\t\t\t\t\t\t\t\topen={toolAreaOpen}\n\t\t\t\t\t\t\t\tonClose={() => toggleToolArea()}\n\t\t\t\t\t\t\t\tonOpen={() => toggleToolArea()}\n\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\tpaper : classes.drawerPaper\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tModalProps={{\n\t\t\t\t\t\t\t\t\tkeepMounted : true // Better open performance on mobile.\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MeetingDrawer closeDrawer={toggleToolArea} />\n\t\t\t\t\t\t\t</SwipeableDrawer>\n\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t</nav>\n\t\t\t\t\t:\n\t\t\t\t\t<nav className={toolAreaOpen ? classes.drawer : null}>\n\t\t\t\t\t\t<Hidden implementation='css'>\n\t\t\t\t\t\t\t<Drawer\n\t\t\t\t\t\t\t\tvariant='persistent'\n\t\t\t\t\t\t\t\tanchor={theme.direction === 'rtl' ? 'right' : 'left'}\n\t\t\t\t\t\t\t\topen={toolAreaOpen}\n\t\t\t\t\t\t\t\tonClose={() => toggleToolArea()}\n\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\tpaper : classes.drawerPaper\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MeetingDrawer closeDrawer={toggleToolArea} />\n\t\t\t\t\t\t\t</Drawer>\n\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t</nav>\n\t\t\t\t}\n\n\t\t\t\t{ browser.platform === 'mobile' && browser.os !== 'ios' &&\n\t\t\t\t\t<WakeLock />\n\t\t\t\t}\n\n\t\t\t\t<View advancedMode={advancedMode} />\n\n\t\t\t\t{ buttonControlBar &&\n\t\t\t\t\t<ButtonControlBar />\n\t\t\t\t}\n\n\t\t\t\t{ room.lockDialogOpen &&\n\t\t\t\t\t<LockDialog />\n\t\t\t\t}\n\n\t\t\t\t{ room.settingsOpen &&\n\t\t\t\t\t<Settings />\n\t\t\t\t}\n\n\t\t\t\t{ room.extraVideoOpen &&\n\t\t\t\t\t<ExtraVideo />\n\t\t\t\t}\n\t\t\t\t{ room.helpOpen &&\n\t\t\t\t\t<Help />\n\t\t\t\t}\n\t\t\t\t{ room.aboutOpen &&\n\t\t\t\t\t<About />\n\t\t\t\t}\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nRoom.propTypes =\n{\n\troom               : appPropTypes.Room.isRequired,\n\tbrowser            : PropTypes.object.isRequired,\n\tadvancedMode       : PropTypes.bool.isRequired,\n\tshowNotifications  : PropTypes.bool.isRequired,\n\tbuttonControlBar   : PropTypes.bool.isRequired,\n\tdrawerOverlayed    : PropTypes.bool.isRequired,\n\ttoolAreaOpen       : PropTypes.bool.isRequired,\n\tsetToolbarsVisible : PropTypes.func.isRequired,\n\ttoggleToolArea     : PropTypes.func.isRequired,\n\tclasses            : PropTypes.object.isRequired,\n\ttheme              : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\troom              : state.room,\n\t\tbrowser           : state.me.browser,\n\t\tadvancedMode      : state.settings.advancedMode,\n\t\tshowNotifications : state.settings.showNotifications,\n\t\tbuttonControlBar  : state.settings.buttonControlBar,\n\t\tdrawerOverlayed   : state.settings.drawerOverlayed,\n\t\ttoolAreaOpen      : state.toolarea.toolAreaOpen\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tsetToolbarsVisible : (visible) =>\n\t\t{\n\t\t\tdispatch(roomActions.setToolbarsVisible(visible));\n\t\t},\n\t\ttoggleToolArea : () =>\n\t\t{\n\t\t\tdispatch(toolareaActions.toggleToolArea());\n\t\t}\n\t});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps,\n\tnull,\n\t{\n\t\tareStatesEqual : (next, prev) =>\n\t\t{\n\t\t\treturn (\n\t\t\t\tprev.room === next.room &&\n\t\t\t\tprev.me.browser === next.me.browser &&\n\t\t\t\tprev.settings.advancedMode === next.settings.advancedMode &&\n\t\t\t\tprev.settings.showNotifications === next.settings.showNotifications &&\n\t\t\t\tprev.settings.buttonControlBar === next.settings.buttonControlBar &&\n\t\t\t\tprev.settings.drawerOverlayed === next.settings.drawerOverlayed &&\n\t\t\t\tprev.toolarea.toolAreaOpen === next.toolarea.toolAreaOpen\n\t\t\t);\n\t\t}\n\t}\n)(withStyles(styles, { withTheme: true })(Room));"],"sourceRoot":""}